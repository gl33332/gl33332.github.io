<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å° | åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</title><noscript>å¼€å¯JavaScriptæ‰èƒ½è®¿é—®æœ¬ç«™å“¦~</noscript><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/index.css?v=3.0.21"><link rel="canonical" href="https://gl33332.github.io/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/index.html"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"><!-- Feature-specific CSS--><!-- aplayer--><!-- swiper--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11.0.5/swiper-bundle.min.css"><!-- fancybox ui--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.min.css"><!-- katex--><!-- Open Graph--><meta name="description" content="ğŸš€ éƒ¨ç½²ç®€ä»‹é€šè¿‡ Cloudflare Workers AI æä¾›çš„å…è´¹ç®—åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é›¶æˆæœ¬æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ç”Ÿå›¾ï¼ˆText-to-Imageï¼‰å·¥å…·ã€‚æœ¬æ•™ç¨‹å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆä»ä»£ç å¤åˆ¶åˆ°åŸŸåç»‘å®šçš„å…¨è¿‡ç¨‹ã€‚  ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ– å‡†å¤‡åŸŸåï¼šå»ºè®®å‡†å¤‡ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆå¦‚ ai.138gl.comï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·²æœ‰çš„åŸŸåæˆ–æ³¨å†Œå…è´¹åŸŸåã€‚ ç™»å½•å¹³å°ï¼šè®¿é—®å¹¶ç™»å½• Cloudflare æ§åˆ¶">
<meta property="og:type" content="article">
<meta property="og:title" content="AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°">
<meta property="og:url" content="https://gl33332.github.io/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/index.html">
<meta property="og:site_name" content="åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘">
<meta property="og:description" content="ğŸš€ éƒ¨ç½²ç®€ä»‹é€šè¿‡ Cloudflare Workers AI æä¾›çš„å…è´¹ç®—åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é›¶æˆæœ¬æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ç”Ÿå›¾ï¼ˆText-to-Imageï¼‰å·¥å…·ã€‚æœ¬æ•™ç¨‹å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆä»ä»£ç å¤åˆ¶åˆ°åŸŸåç»‘å®šçš„å…¨è¿‡ç¨‹ã€‚  ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ– å‡†å¤‡åŸŸåï¼šå»ºè®®å‡†å¤‡ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆå¦‚ ai.138gl.comï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·²æœ‰çš„åŸŸåæˆ–æ³¨å†Œå…è´¹åŸŸåã€‚ ç™»å½•å¹³å°ï¼šè®¿é—®å¹¶ç™»å½• Cloudflare æ§åˆ¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imgbed.138gl.com/file/blog/%E6%96%87%E7%AB%A0/AI/1755614107881_TWAIbt-001.png">
<meta property="article:published_time" content="2025-08-19T12:00:00.000Z">
<meta property="article:modified_time" content="2026-01-27T17:29:02.000Z">
<meta property="article:author" content="åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘">
<meta property="article:tag" content="AIéƒ¨ç½²">
<meta property="article:tag" content="Cloudflare">
<meta property="article:tag" content="æ–‡ç”Ÿå›¾">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgbed.138gl.com/file/blog/%E6%96%87%E7%AB%A0/AI/1755614107881_TWAIbt-001.png"><!-- pwa--><meta name="apple-mobile-web-app-capable" content="åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘"><meta name="theme-color" content="var(--efu-main)"><meta name="apple-mobile-web-app-status-bar-style" content="var(--efu-main)"><link rel="bookmark" href="/img/favicon.png"><link rel="apple-touch-icon" href="/img/favicon.png" sizes="180x180"><script>console.log(' %c Solitude %c ' + '3.0.21' + ' %c https://github.com/everfu/hexo-theme-solitude',
    'background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff',
    'background:#ff9a9a ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff',
    'background:unset ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff')
</script><link rel="stylesheet" href="/schedule/schedule.css"><script>(()=>{
        const saveToLocal = {
            set: function setWithExpiry(key, value, ttl) {
                if (ttl === 0)
                    return
                const now = new Date()
                const expiryDay = ttl * 86400000
                const item = {
                    value: value,
                    expiry: now.getTime() + expiryDay
                }
                localStorage.setItem(key, JSON.stringify(item))
            },
            get: function getWithExpiry(key) {
                const itemStr = localStorage.getItem(key)

                if (!itemStr) {
                    return undefined
                }
                const item = JSON.parse(itemStr)
                const now = new Date()

                if (now.getTime() > item.expiry) {
                    localStorage.removeItem(key)
                    return undefined
                }
                return item.value
            }
        };
        window.utils = {
            saveToLocal: saveToLocal,
            getCSS: (url, id = false) => new Promise((resolve, reject) => {
              const link = document.createElement('link')
              link.rel = 'stylesheet'
              link.href = url
              if (id) link.id = id
              link.onerror = reject
              link.onload = link.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                link.onload = link.onreadystatechange = null
                resolve()
              }
              document.head.appendChild(link)
            }),
            getScript: (url, attr = {}) => new Promise((resolve, reject) => {
              const script = document.createElement('script')
              script.src = url
              script.async = true
              script.onerror = reject
              script.onload = script.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                script.onload = script.onreadystatechange = null
                resolve()
              }

              Object.keys(attr).forEach(key => {
                script.setAttribute(key, attr[key])
              })

              document.head.appendChild(script)
            }),
            addGlobalFn: (key, fn, name = false, parent = window) => {
                const globalFn = parent.globalFn || {}
                const keyObj = globalFn[key] || {}

                if (name && keyObj[name]) return

                name = name || Object.keys(keyObj).length
                keyObj[name] = fn
                globalFn[key] = keyObj
                parent.globalFn = globalFn
            },
            addEventListenerPjax: (ele, event, fn, option = false) => {
              ele.addEventListener(event, fn, option)
              utils.addGlobalFn('pjax', () => {
                  ele.removeEventListener(event, fn, option)
              })
            },
            diffDateFormat: (selector) => {
                selector.forEach(item => {
                    const date = new Date(item.getAttribute('datetime') || item.textContent);
                    item.textContent = (date.getMonth() + 1).toString()+'/'+date.getDate().toString();
                });
            },
        }
    })()</script><!-- theme--><script>initTheme = () => {
    let isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const cachedMode = utils.saveToLocal.get('theme');
    if (cachedMode === undefined) {
        const nowMode =
            isDarkMode ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', nowMode);
    } else {
        document.documentElement.setAttribute('data-theme', cachedMode);
    }
    typeof rm === 'object' && rm.mode(cachedMode === 'dark' && isDarkMode)
}
initTheme()</script><script>const GLOBAL_CONFIG = {
    root: '/',
    algolia: undefined,
    localsearch: {"preload":false,"path":"/search.xml"},
    runtime: '2025-04-01 00:00:00',
    lazyload: {
        enable: false,
        error: '/img/error_load.avif'
    },
    copyright: false,
    highlight: {"limit":200,"expand":true,"copy":true,"syntax":"highlight.js"},
    randomlink: false,
    lang: {"theme":{"dark":"å·²åˆ‡æ¢è‡³æ·±è‰²æ¨¡å¼","light":"å·²åˆ‡æ¢è‡³æµ…è‰²æ¨¡å¼"},"copy":{"success":"å¤åˆ¶æˆåŠŸ","error":"å¤åˆ¶å¤±è´¥"},"backtop":"è¿”å›é¡¶éƒ¨","time":{"day":"å¤©å‰","hour":"å°æ—¶å‰","just":"åˆšåˆš","min":"åˆ†é’Ÿå‰","month":"ä¸ªæœˆå‰"},"day":" å¤©","f12":"å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªGPLåè®®ã€‚","totalk":"æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¾“å…¥è¯„è®ºå³å¯","search":{"empty":"æ‰¾ä¸åˆ°ä½ æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hit":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’","placeholder":"è¾“å…¥å…³é”®è¯å¿«é€ŸæŸ¥æ‰¾","count":"å…± <b>${count}</b> æ¡ç»“æœã€‚","loading":"æœç´¢ä¸­..."},"barrage":{"title":"çƒ­è¯„"}},
    aside: {
        state: {
            morning: "âœ¨ æ—©ä¸Šå¥½ï¼Œæ–°çš„ä¸€å¤©å¼€å§‹äº†",
            noon: "ğŸ² åˆé¤æ—¶é—´",
            afternoon: "ğŸŒ ä¸‹åˆå¥½",
            night: "æ—©ç‚¹ä¼‘æ¯",
            goodnight: "æ™šå®‰ ğŸ˜´",
        },
        witty_words: ["ä½ å¯ä»¥çš„","ä½ ä¸€å®šå¯ä»¥çš„","ç¥ä½ å¥½è¿ï¼Œé™Œç”Ÿäºº"],
        witty_comment: {
            prefix: 'å¥½ä¹…ä¸è§ï¼Œ',
            back: 'æ¬¢è¿å†æ¬¡å›æ¥ï¼Œ',
        },
    },
    covercolor: {
        enable: true
    },
    comment: {"avatar":"https://gravatar.com/avatar","commentBarrage":true},
    lightbox: 'fancybox',
    right_menu: {"mode":{"dark":"æ·±è‰²æ¨¡å¼","light":"æµ…è‰²æ¨¡å¼"},"img_error":"æ­¤å›¾ç‰‡æ— æ³•å¤åˆ¶ä¸ä¸‹è½½","barrage":{"open":"æ˜¾ç¤ºçƒ­è¯„","close":"å…³é—­çƒ­è¯„"},"translate":true,"ctrlOriginalMenu":"æŒ‰ä½Ctrl+å³é”®å¯æ‰“å¼€æµè§ˆå™¨å³é”®èœå•"},
    translate: {"translateDelay":0,"defaultEncoding":2},
    lure: false,
    expire: false,
};</script><script id="config-diff">var PAGE_CONFIG = {
    is_post: true,
    is_page: false,
    is_home: false,
    page: '',
    toc: true,
    comment: true,
    ai_text: false,
    color: false,
}</script><meta name="generator" content="Hexo 8.1.1"></head><body id="body"><div><div id="loading-box" onclick="preloader.endLoading();" style="zoom:1"><div class="loading-bg"><img class="loading-img nolazyload" src="/img/avatar.png" alt="loading image"></div></div><script>const preloader = {
    isLoaded: false,
    endLoading: () => {
        if (!preloader.isLoaded) {
            document.getElementById('loading-box').classList.add('loaded');
            preloader.isLoaded = true;
            preloader.togglePaceDone();
        }
    },
    initLoading: () => {
        document.getElementById('loading-box').classList.remove('loaded');
        preloader.isLoaded = false;
        preloader.togglePaceDone();
    },
    togglePaceDone: () => {
        document.getElementById('body').className = preloader.isLoaded ? 'pace-done' : '';
    }
}

window.addEventListener('load', () => {
    preloader.endLoading();
});

window.addEventListener('pjax:send', () => {
    preloader.initLoading();
});

document.addEventListener('pjax:complete', () => {
    preloader.endLoading();
});

setTimeout(() => {
    preloader.endLoading();
}, 5000);</script></div><div><div id="console"><div class="close-btn" onclick="sco.hideConsole()"><i class="solitude fas fa-xmark"></i></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><div class="author-content-item-title">æœ€æ–°è¯„è®º<a class="recent-comment-more" href="/recentcomments/" title="æœ€è¿‘è¯„è®º"><i class="solitude fas fa-circle-chevron-right"></i></a></div></div><div class="console_recentcomments"><script pjax>(async () => {
    document.querySelector('.console-card .console_recentcomments').textContent = `åŠ è½½ä¸­...`
    const emojiReg = /<img class="tk-owo-emotion" [^>]+>/g
    let cache = utils.saveToLocal.get('twikoo-recent-comments-console')
    if (cache) {
        setHtml(document.querySelector('.console-card .console_recentcomments'), cache)
        return
    }
    let ls = []

    await fetch('https://pl.138gl.com/.netlify/functions/twikoo', {
        method: "POST",
        body: JSON.stringify({
            "event": "GET_RECENT_COMMENTS",
            "includeReply": true,
            "pageSize": 6
        }),
        headers: {'Content-Type': 'application/json'}
    }).then(res => res.json()).then(async ({data}) => {
        for (const i of data) {
            if (i.avatar === undefined) i.avatar = 'https://gravatar.com/avatar/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp'
            let title = ''
            if (i.url) {
                await fetch(i.url).then(res => res.text()).then(html => {
                    const parser = new DOMParser()
                    const doc = parser.parseFromString(html, 'text/html')
                    title = doc.querySelector('title').innerText
                }).catch(() => {
                    title = i.url
                })
            }
            if (title.indexOf('|') > 0) {
                title = title.split('|')[0]
            }
            ls.push({
                avatar: i.avatar,
                nick: i.nick,
                title: title,
                content: i.comment,
                url: i.url + '#' + i.id,
                time: i.created
            })
        }
        setHtml(document.querySelector('.console-card .console_recentcomments'), ls)
        utils.saveToLocal.set('twikoo-recent-comments-console', ls, 0.2)
    });

    function setHtml(el, data) {
        el.innerHTML = data.length !== 0 ? data.map(i => `
            <div class="comment-card" title="${i.title}" onclick="pjax.loadUrl('${i.url}')">
                <div class="comment-info">
                    <img src="${i.avatar}" class="nolazyload" alt="${i.nick}">
                    <div>
                        <span class="comment-user">${i.nick}</span>
                    </div>
                    <time class="comment-time" datetime="${new Date(i.time)}"></time>
                </div>
                <div class="comment-content">${formatContent(i.content)}</div>
                <div class="comment-title">
                <i class="solitude fas fa-comment"></i>
                ${i.title}</div>
            </div>
        `).join('') : `æš‚æ— è¯„è®º...`
        if (typeof utils !== 'undefined') utils.diffDateFormat(document.querySelectorAll('.comment-time'))
        else {
            document.addEventListener('pjax:complete', () => utils.diffDateFormat(document.querySelectorAll('.comment-time')))
            document.addEventListener('DOMContentLoaded', () => utils.diffDateFormat(document.querySelectorAll('.comment-time')))
        }
    }

    function formatContent(content) {
        content = content.replace(emojiReg, 'è¡¨æƒ…')
        content = content.replace(/<\/*br>|[\s\uFEFF\xA0]+/g, '');
        content = content.replace(/<img.*?>/g, '[å›¾ç‰‡]');
        content = content.replace(/<a.*?>.*?<\/a>/g, '[é“¾æ¥]');
        content = content.replace(/<pre.*?>.*?<\/pre>/g, '[ä»£ç ]');
        content = content.replace(/<.*?>/g, '');
        return content
    }
})()</script></div></div></div><div class="console-card-group-right"><div class="console-card tags" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">æ ‡ç­¾</div><div class="author-content-item-title">å¯»æ‰¾æ„Ÿå…´è¶£çš„é¢†åŸŸ</div></div><div class="card-tag-cloud"><a href="/tags/Hexo/">Hexo<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">åšå®¢æ­å»º<sup>1</sup></a><a href="/tags/%E6%8C%87%E5%8D%97/">æŒ‡å—<sup>1</sup></a><a href="/tags/%E5%BD%B1%E8%A7%86/">å½±è§†<sup>1</sup></a><a href="/tags/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">å¼€æºè½¯ä»¶<sup>2</sup></a><a href="/tags/%E7%A7%81%E4%BF%A1/">ç§ä¿¡<sup>1</sup></a><a href="/tags/%E9%98%85%E5%90%8E%E5%8D%B3%E7%84%9A/">é˜…åå³ç„š<sup>1</sup></a><a href="/tags/%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1/">å®‰å…¨é€šä¿¡<sup>1</sup></a><a href="/tags/%E7%94%B5%E8%A7%86%E7%9B%B4%E6%92%AD/">ç”µè§†ç›´æ’­<sup>1</sup></a><a href="/tags/TV%E5%BA%94%E7%94%A8/">TVåº”ç”¨<sup>1</sup></a><a href="/tags/%E5%AE%89%E5%8D%93%E8%BD%A6%E8%BD%BD/">å®‰å“è½¦è½½<sup>1</sup></a><a href="/tags/X5%E5%86%85%E6%A0%B8/">X5å†…æ ¸<sup>1</sup></a><a href="/tags/Cloudflare/">Cloudflare<sup>1</sup></a><a href="/tags/AI%E9%83%A8%E7%BD%B2/">AIéƒ¨ç½²<sup>1</sup></a><a href="/tags/%E6%96%87%E7%94%9F%E5%9B%BE/">æ–‡ç”Ÿå›¾<sup>1</sup></a></div></div><div class="console-card history" onclick="sco.hideConsole()"><ul class="card-archive-list"><li class="item"><a href="/archives/2026/01/"><span class="date">2026/01</span><div class="count-group"><span class="count">1</span><span class="unit">ç¯‡</span></div></a></li><li class="item"><a href="/archives/2025/08/"><span class="date">2025/08</span><div class="count-group"><span class="count">1</span><span class="unit">ç¯‡</span></div></a></li><li class="item"><a href="/archives/2025/05/"><span class="date">2025/05</span><div class="count-group"><span class="count">2</span><span class="unit">ç¯‡</span></div></a></li><li class="item"><a href="/archives/2025/04/"><span class="date">2025/04</span><div class="count-group"><span class="count">1</span><span class="unit">ç¯‡</span></div></a></li><li class="item"><a href="/archives/"><span class="date">å…¨éƒ¨æ–‡ç« </span><div class="count-group"><span class="count">5</span><span class="unit">ç¯‡</span></div></a></li></ul></div></div></div><div class="button-group"><div class="console-btn-item"><span class="darkmode_switchbutton" onclick="sco.switchDarkMode()" title="æ˜¼å¤œåˆ‡æ¢"><i class="solitude fas fa-circle-half-stroke"></i></span></div><div class="console-btn-item" id="consoleHideAside"><span class="asideSwitch" onclick="sco.switchHideAside()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><i class="solitude fas fa-arrows-left-right-to-line"></i></span></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="sco.switchCommentBarrage()"><span class="commentBarrage"><i class="solitude fas fa-comment"></i></span></div></div><div class="console-mask" onclick="sco.hideConsole()"></div></div></div><div id="sidebar" style="zoom: 1;"><div id="menu-mask" style="display: none;"></div><div id="sidebar-menus"><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/recentcomments/"><div class="headline">è¯„è®º</div><div class="length-num" id="twikoo_allcount"><i class="solitude fas fa-spinner fa-spin"></i></div><script pjax="pjax">(async () => {
  await fetch('https://pl.138gl.com/.netlify/functions/twikoo', {
    method: "POST",
    body: JSON.stringify({
      "event": "GET_RECENT_COMMENTS",
      "includeReply": true,
      "pageSize": 999
    }),
    headers: {'Content-Type': 'application/json'}
  }).then(res => res.json()).then(async ({data}) => {
    document.querySelector('#twikoo_allcount').innerHTML = data.length
  })
})()</script></a></div></div></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><span class="darkmode_switchbutton menu-child" onclick="sco.switchDarkMode()"><i class="solitude fas fa-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude  fas fa-folder-closed"></i><span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude  fas fa-clone"></i><span>åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude  fas fa-tags"></i><span>æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="solitude  fas fa-tv"></i><span>è¿½ç•ª</span></a></li><li><a class="site-page child" href="/message/"><i class="solitude  fas fa-comments"></i><span>ç•™è¨€æ¿</span></a></li><li><a class="site-page child" href="/about/"><i class="solitude  fas fa-user"></i><span>å…³äº</span></a></li></ul></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="card-tag-cloud"><a href="/tags/Hexo/">Hexo<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">åšå®¢æ­å»º<sup>1</sup></a><a href="/tags/%E6%8C%87%E5%8D%97/">æŒ‡å—<sup>1</sup></a><a href="/tags/%E5%BD%B1%E8%A7%86/">å½±è§†<sup>1</sup></a><a href="/tags/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/">å¼€æºè½¯ä»¶<sup>2</sup></a><a href="/tags/%E7%A7%81%E4%BF%A1/">ç§ä¿¡<sup>1</sup></a><a href="/tags/%E9%98%85%E5%90%8E%E5%8D%B3%E7%84%9A/">é˜…åå³ç„š<sup>1</sup></a><a href="/tags/%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1/">å®‰å…¨é€šä¿¡<sup>1</sup></a><a href="/tags/%E7%94%B5%E8%A7%86%E7%9B%B4%E6%92%AD/">ç”µè§†ç›´æ’­<sup>1</sup></a><a href="/tags/TV%E5%BA%94%E7%94%A8/">TVåº”ç”¨<sup>1</sup></a><a href="/tags/%E5%AE%89%E5%8D%93%E8%BD%A6%E8%BD%BD/">å®‰å“è½¦è½½<sup>1</sup></a><a href="/tags/X5%E5%86%85%E6%A0%B8/">X5å†…æ ¸<sup>1</sup></a><a href="/tags/Cloudflare/">Cloudflare<sup>1</sup></a><a href="/tags/AI%E9%83%A8%E7%BD%B2/">AIéƒ¨ç½²<sup>1</sup></a><a href="/tags/%E6%96%87%E7%94%9F%E5%9B%BE/">æ–‡ç”Ÿå›¾<sup>1</sup></a></div></div></div></div><div><div class="needEndHide" id="rightside"><div class="rs_hide"><button class="translate" type="button" title="ç®€ç¹è½¬æ¢">ç®€</button><button class="mode" type="button" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" onclick="sco.switchDarkMode()"><i class="fas fa-circle-half-stroke"></i></button><button class="aside pc" type="button" title="ä¾§è¾¹æ " onclick="sco.switchHideAside()"><i class="fas fa-arrows-alt-h"></i></button></div><div class="rs_show"><button class="config" type="button" title="æ‰©å±•" onclick="document.querySelector(&quot;.rs_hide&quot;).classList.toggle(&quot;show&quot;)"><i class="fas fa-gear fa-spin"></i></button><button class="mobile toc" type="button" title="ç›®å½•" onclick="document.querySelector('#card-toc').classList.toggle('open')"><i class="fas fa-list"></i></button><button class="comment" type="button" title="è¯„è®º" onclick="sco.scrollTo('post-comment')"><i class="fas fa-comment"></i></button><button class="barrage pc" type="button" title="å¼¹" onclick="sco.switchCommentBarrage()"><span>å¼¹</span></button><button class="top" type="button" title="è¿”å›é¡¶éƒ¨" onclick="sco.toTop()"><i class="fas fa-arrow-up"></i><span id="percent">0</span></button></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav class="show" id="nav"><div id="nav-group"><div id="blog_name"><a href="/" title="è¿”å›åšå®¢ä¸»é¡µ" id="site-name"><span class="title">åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</span><i class="solitude fas fa-home"></i></a></div><div id="page-name-mask"><div id="page-name"><a id="page-name-text" onclick="sco.toTop()">AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude  fas fa-folder-closed"></i><span>å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude  fas fa-clone"></i><span>åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude  fas fa-tags"></i><span>æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="solitude  fas fa-tv"></i><span>è¿½ç•ª</span></a></li><li><a class="site-page child" href="/message/"><i class="solitude  fas fa-comments"></i><span>ç•™è¨€æ¿</span></a></li><li><a class="site-page child" href="/about/"><i class="solitude  fas fa-user"></i><span>å…³äº</span></a></li></ul></div></div></div><div id="nav-left"></div><div id="nav-right"><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢"><i class="solitude fas fa-magnifying-glass"></i></a></div><div class="nav-button" id="nav-console"><a class="console_switchbutton" onclick="sco.showConsole()" title="ä¸­æ§å°" href="javascript:void(0);"><label><i class="left"></i><i class="center"></i><i class="right"></i></label></a></div><div id="toggle-menu"><a class="site-page"><i class="solitude fas fa-bars"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="nolazyload" id="post-cover" src="https://imgbed.138gl.com/file/blog/æ–‡ç« /AI/1755614107881_TWAIbt-001.png" alt="AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°"></div><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a><span class="post-meta-categories"><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a></span><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cloudflare/"><span class="tags-name tags-punctuation"><i class="solitude fas fa-hashtag"></i>Cloudflare</span></a><a class="post-meta__tags" href="/tags/AI%E9%83%A8%E7%BD%B2/"><span class="tags-name tags-punctuation"><i class="solitude fas fa-hashtag"></i>AIéƒ¨ç½²</span></a><a class="post-meta__tags" href="/tags/%E6%96%87%E7%94%9F%E5%9B%BE/"><span class="tags-name tags-punctuation"><i class="solitude fas fa-hashtag"></i>æ–‡ç”Ÿå›¾</span></a></div></div></div></div><h1 class="post-title">AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°</h1><div id="post-meta"><div class="meta-secondline"><span class="post-meta-date" title="å‘å¸ƒäº 2025-08-19 12:00:00"><i class="post-meta-icon solitude fas fa-calendar-days"></i><time datetime="2025-08-19T12:00:00.000Z">2025-08-19T12:00:00.000Z</time></span><span class="post-meta-date" title="æœ€åæ›´æ–°äº 2026-01-27 17:29:02"><i class="post-meta-icon solitude fas fa-arrows-rotate"></i><time datetime="2026-01-27T17:29:02.000Z">2026-01-27T17:29:02.000Z</time></span><span class="post-meta-commentcount" title="è¯„è®ºæ•°" onclick="sco.scrollTo('post-comment')"><i class="solitude fas fa-comment"></i><a href="/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/#post-comment"><span class="twikoo-count"><i class="solitude fas fa-spinner fa-spin"></i></span></a></span></div></div></div><div class="post-radius-bottom"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content article-container"><p><img src="https://imgbed.138gl.com/file/blog/%E6%96%87%E7%AB%A0/AI/1755614107881_TWAIbt-001.png" alt="AIå…è´¹éƒ¨ç½²æ–‡ç”Ÿå›¾"></p>
<h2 id="ğŸš€-éƒ¨ç½²ç®€ä»‹"><a href="#ğŸš€-éƒ¨ç½²ç®€ä»‹" class="headerlink" title="ğŸš€ éƒ¨ç½²ç®€ä»‹"></a>ğŸš€ éƒ¨ç½²ç®€ä»‹</h2><p>é€šè¿‡ Cloudflare Workers AI æä¾›çš„å…è´¹ç®—åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é›¶æˆæœ¬æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ç”Ÿå›¾ï¼ˆText-to-Imageï¼‰å·¥å…·ã€‚æœ¬æ•™ç¨‹å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆä»ä»£ç å¤åˆ¶åˆ°åŸŸåç»‘å®šçš„å…¨è¿‡ç¨‹ã€‚</p>
<hr>
<h2 id="ğŸ› ï¸-éƒ¨ç½²æ­¥éª¤"><a href="#ğŸ› ï¸-éƒ¨ç½²æ­¥éª¤" class="headerlink" title="ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤"></a>ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤</h2><h3 id="ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–"></a>ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–</h3><ol>
<li><strong>å‡†å¤‡åŸŸå</strong>ï¼šå»ºè®®å‡†å¤‡ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆå¦‚ <code>ai.138gl.com</code>ï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·²æœ‰çš„åŸŸåæˆ–æ³¨å†Œå…è´¹åŸŸåã€‚</li>
<li><strong>ç™»å½•å¹³å°</strong>ï¼šè®¿é—®å¹¶ç™»å½• <a target="_blank" rel="noopener" href="https://dash.cloudflare.com/">Cloudflare æ§åˆ¶å°</a>ã€‚</li>
<li><strong>åˆ›å»º Worker</strong>ï¼šè¿›å…¥ <strong>Workers å’Œ Pages</strong>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <strong>Hello World</strong> é¡¹ç›®ã€‚</li>
</ol>
<p>ç¬¬äºŒé˜¶æ®µï¼šä»£ç é…ç½®<br>æ³¨å…¥æ ¸å¿ƒé€»è¾‘ (worker.js)ï¼š</p>
<p>åœ¨ Cloudflare Workers çš„ä»£ç ç¼–è¾‘å™¨ä¸­ï¼Œæ‰¾åˆ°é»˜è®¤çš„ worker.jsã€‚<br>æ“ä½œï¼šå…¨é€‰å¹¶åˆ é™¤ç¼–è¾‘å™¨å†…çš„æ‰€æœ‰åŸæœ‰ä»£ç ã€‚<br>ä»£ç æ¥æºï¼šä½ å¯ä»¥ğŸ”— ç‚¹å‡»æ­¤å¤„è·³è½¬ GitHub å¤åˆ¶ï¼Œæˆ–è€…å±•å¼€ä¸‹æ–¹ä»£ç å—ç›´æ¥å¤åˆ¶ï¼š</p>
<details>
<summary>ğŸ“„ ç‚¹å‡»å±•å¼€ worker.js å®Œæ•´ä»£ç </summary>
    <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: kared</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>_date: 2025-05-10 21:15:59</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@last</span>_editors: kared</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@last</span>_edit_time: 2025-05-11 01:25:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: This Cloudflare Worker script handles image generation.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import html template</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">HTML</span> <span class="keyword">from</span> <span class="string">&#x27;./index.html&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Available models list</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">AVAILABLE_MODELS</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-xl-base-1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion XL Base 1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;Stability AI SDXL æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/stabilityai/stable-diffusion-xl-base-1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;flux-1-schnell&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;FLUX.1 [schnell]&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;ç²¾ç¡®ç»†èŠ‚è¡¨ç°çš„é«˜æ€§èƒ½æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/black-forest-labs/flux-1-schnell&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;dreamshaper-8-lcm&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;DreamShaper 8 LCM&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;å¢å¼ºå›¾åƒçœŸå®æ„Ÿçš„ SD å¾®è°ƒæ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/lykon/dreamshaper-8-lcm&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-xl-lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion XL Lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;æ›´åŠ é«˜æ•ˆçš„æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/bytedance/stable-diffusion-xl-lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-v1-5-img2img&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion v1.5 å›¾ç”Ÿå›¾&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;å°†è¾“å…¥å›¾åƒé£æ ¼åŒ–æˆ–å˜æ¢ï¼ˆéœ€è¦æä¾›å›¾åƒURLï¼‰&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/runwayml/stable-diffusion-v1-5-img2img&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion v1.5 å±€éƒ¨é‡ç»˜&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;æ ¹æ®é®ç½©å¯¹å±€éƒ¨åŒºåŸŸè¿›è¡Œé‡ç»˜ï¼ˆéœ€è¦å›¾åƒURLï¼Œå¯é€‰é®ç½©URLï¼‰&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/runwayml/stable-diffusion-v1-5-inpainting&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">requiresMask</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Random prompts list</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">RANDOM_PROMPTS</span> = [</span><br><span class="line">  <span class="string">&#x27;cyberpunk cat samurai graphic art, blood splattered, beautiful colors&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;1girl, solo, outdoors, camping, night, mountains, nature, stars, moon, tent, twin ponytails, green eyes, cheerful, happy, backpack, sleeping bag, camping stove, water bottle, mountain boots, gloves, sweater, hat, flashlight,forest, rocks, river, wood, smoke, shadows, contrast, clear sky, constellations, Milky Way&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;masterpiece, best quality, amazing quality, very aesthetic, high resolution, ultra-detailed, absurdres, newest, scenery, anime, anime coloring, (dappled sunlight:1.2), rim light, backlit, dramatic shadow, 1girl, long blonde hair, blue eyes, shiny eyes, parted lips, medium breasts, puffy sleeve white dress, forest, flowers, white butterfly, looking at viewer&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;frost_glass, masterpiece, best quality, absurdres, cute girl wearing red Christmas dress, holding small reindeer, hug, braided ponytail, sidelocks, hairclip, hair ornaments, green eyes, (snowy forest, moonlight, Christmas trees), (sparkles, sparkling clothes), frosted, snow, aurora, moon, night, sharp focus, highly detailed, abstract, flowing&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;1girl, hatsune miku, white pupils, power elements, microphone, vibrant blue color palette, abstract,abstract background, dreamlike atmosphere, delicate linework, wind-swept hair, energy, masterpiece, best quality, amazing quality&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;cyberpunk cat(neon lights:1.3) clutter,ultra detailed, ctrash, chaotic, low light, contrast, dark, rain ,at night ,cinematic , dystopic, broken ground, tunnels, skyscrapers&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;Cyberpunk catgirl with purple hair, wearing leather and latex outfit with pink and purple cheetah print, holding a hand gun, black latex brassiere, glowing blue eyes with purple tech sunglasses, tail, large breasts, glowing techwear clothes, handguns, black leather jacket, tight shiny leather pants, cyberpunk alley background, Cyb3rWar3, Cyberware&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;a wide aerial view of a floating elven city in the sky, with two elven figures walking side by side across a glowing skybridge, the bridge arching between tall crystal towers, surrounded by clouds and golden light, majestic and serene atmosphere, vivid style, magical fantasy architecture&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;masterpiece, newest, absurdres,incredibly absurdres, best quality, amazing quality, very aesthetic, 1girl, very long hair, blonde, multi-tied hair, center-flap bangs, sunset, cumulonimbus cloud, old tree,sitting in tree, dark blue track suit, adidas, simple bird&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;beautiful girl, breasts, curvy, looking down scope, looking away from viewer, laying on the ground, laying ontop of jacket, aiming a sniper rifle, dark braided hair, backwards hat, armor, sleeveless, arm sleeve tattoos, muscle tone, dogtags, sweaty, foreshortening, depth of field, at night, night, alpine, lightly snowing, dusting of snow, Closeup, detailed face, freckles&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Passwords for authentication</span></span><br><span class="line"><span class="comment">// demo: const PASSWORDS = [&#x27;P@ssw0rd&#x27;]</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PASSWORDS</span> = [<span class="string">&#x27;admin123&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">request, env</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> originalHost = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;host&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// CORS Headers</span></span><br><span class="line">    <span class="keyword">const</span> corsHeaders = &#123;</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, OPTIONS&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;Content-Type&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: corsHeaders</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">      <span class="keyword">const</span> path = url.<span class="property">pathname</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// process api requests</span></span><br><span class="line">      <span class="keyword">if</span> (path === <span class="string">&#x27;/api/models&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// get available models list</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable constant_">AVAILABLE_MODELS</span>), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/prompts&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// get random prompts list</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable constant_">RANDOM_PROMPTS</span>), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/config&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// expose minimal config to client</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">require_password</span>: <span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> &gt; <span class="number">0</span> &#125;), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/auth&#x27;</span> &amp;&amp; request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// perform password authentication and set cookie</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">json</span>().<span class="title function_">catch</span>(<span class="function">() =&gt;</span> (&#123;&#125;));</span><br><span class="line">        <span class="keyword">const</span> ok = <span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> === <span class="number">0</span> ? <span class="literal">true</span> : (data &amp;&amp; <span class="keyword">typeof</span> data.<span class="property">password</span> === <span class="string">&#x27;string&#x27;</span> &amp;&amp; <span class="variable constant_">PASSWORDS</span>.<span class="title function_">includes</span>(data.<span class="property">password</span>));</span><br><span class="line">        <span class="keyword">if</span> (!ok) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;å¯†ç é”™è¯¯&#x27;</span> &#125;), &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> cookie = <span class="string">`auth=1; Path=/; Max-Age=<span class="subst">$&#123;<span class="number">7</span> * <span class="number">24</span> * <span class="number">3600</span>&#125;</span>; HttpOnly; SameSite=Lax; Secure`</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">success</span>: <span class="literal">true</span> &#125;), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>, <span class="string">&#x27;Set-Cookie&#x27;</span>: cookie &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// process POST request for image generation</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">json</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Check if password is required and valid (Cookie or request body)</span></span><br><span class="line">        <span class="keyword">const</span> cookieHeader = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cookie&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">const</span> authedByCookie = <span class="regexp">/(?:^|;\s*)auth=1(?:;|$)/</span>.<span class="title function_">test</span>(cookieHeader);</span><br><span class="line">        <span class="keyword">const</span> authedByBody = data &amp;&amp; <span class="keyword">typeof</span> data.<span class="property">password</span> === <span class="string">&#x27;string&#x27;</span> &amp;&amp; <span class="variable constant_">PASSWORDS</span>.<span class="title function_">includes</span>(data.<span class="property">password</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; !(authedByCookie || authedByBody)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;éœ€è¦æ­£ç¡®çš„è®¿é—®å¯†ç &#x27;</span> &#125;), &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&#x27;prompt&#x27;</span> <span class="keyword">in</span> data &amp;&amp; <span class="string">&#x27;model&#x27;</span> <span class="keyword">in</span> data) &#123;</span><br><span class="line">          <span class="keyword">const</span> selectedModel = <span class="variable constant_">AVAILABLE_MODELS</span>.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === data.<span class="property">model</span>);</span><br><span class="line">          <span class="keyword">if</span> (!selectedModel) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Model is invalid&#x27;</span> &#125;), &#123; </span><br><span class="line">              <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">              <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">const</span> model = selectedModel.<span class="property">key</span>;</span><br><span class="line">          <span class="keyword">let</span> inputs = &#123;&#125;;</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">fetchImageToBytes</span> = <span class="keyword">async</span> (<span class="params">url, label</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">            <span class="keyword">if</span> (!resp.<span class="property">ok</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>è·å–å¤±è´¥ï¼ŒHTTP <span class="subst">$&#123;resp.status&#125;</span>`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> ct = resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (!ct.<span class="title function_">startsWith</span>(<span class="string">&#x27;image/&#x27;</span>)) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>ä¸æ˜¯å›¾ç‰‡èµ„æºï¼Œcontent-type=<span class="subst">$&#123;ct&#125;</span>`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> cl = <span class="built_in">parseInt</span>(resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-length&#x27;</span>) || <span class="string">&#x27;0&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">            <span class="comment">// è®¾å®š 10MB ä¸Šé™ï¼Œé¿å…å¤§æ–‡ä»¶è§¦å‘å†…éƒ¨é”™è¯¯</span></span><br><span class="line">            <span class="keyword">if</span> (cl &amp;&amp; cl &gt; <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>ä½“ç§¯è¿‡å¤§(<span class="subst">$&#123;(cl/<span class="number">1024</span>/<span class="number">1024</span>).toFixed(<span class="number">2</span>)&#125;</span>MB)ï¼Œè¯·ä¸è¶…è¿‡10MB`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="keyword">await</span> resp.<span class="title function_">arrayBuffer</span>());</span><br><span class="line">            <span class="keyword">return</span> &#123; bytes, <span class="attr">contentType</span>: ct, <span class="attr">size</span>: bytes.<span class="property">length</span> &#125;;</span><br><span class="line">          &#125;;</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">clamp</span> = (<span class="params">val, min, max</span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">max</span>(min, <span class="title class_">Math</span>.<span class="title function_">min</span>(max, val));</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">sanitizeDimension</span> = (<span class="params">val, def = <span class="number">512</span></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> v = <span class="keyword">typeof</span> val === <span class="string">&#x27;number&#x27;</span> ? val : def;</span><br><span class="line">            v = <span class="title function_">clamp</span>(v, <span class="number">256</span>, <span class="number">2048</span>);</span><br><span class="line">            <span class="comment">// å››èˆäº”å…¥åˆ°æœ€è¿‘çš„64å€æ•°</span></span><br><span class="line">            v = <span class="title class_">Math</span>.<span class="title function_">round</span>(v / <span class="number">64</span>) * <span class="number">64</span>;</span><br><span class="line">            <span class="keyword">return</span> v;</span><br><span class="line">          &#125;;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// Input parameter processing</span></span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> steps = data.<span class="property">num_steps</span> || <span class="number">6</span>;</span><br><span class="line">            <span class="keyword">if</span> (steps &gt;= <span class="number">8</span>) steps = <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (steps &lt;= <span class="number">4</span>) steps = <span class="number">4</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Only prompt and steps</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">steps</span>: steps</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">            data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-img2img&#x27;</span> ||</span><br><span class="line">            data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span></span><br><span class="line">          ) &#123;</span><br><span class="line">            <span class="comment">// å›¾ç”Ÿå›¾ / å±€éƒ¨é‡ç»˜éœ€è¦å›¾åƒURL</span></span><br><span class="line">            <span class="keyword">if</span> (!data.<span class="property">image_url</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾› image_url å‚æ•°ï¼ˆè¾“å…¥å›¾åƒ URLï¼‰&#x27;</span> &#125;), &#123;</span><br><span class="line">                <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‹‰å–è¾“å…¥å›¾åƒ/é®ç½©ä¸ºäºŒè¿›åˆ¶å¹¶æ ¡éªŒ</span></span><br><span class="line">            <span class="keyword">const</span> imageResult = <span class="keyword">await</span> <span class="title function_">fetchImageToBytes</span>(data.<span class="property">image_url</span>, <span class="string">&#x27;è¾“å…¥å›¾åƒ&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (imageResult.<span class="property">error</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: imageResult.<span class="property">error</span> &#125;), &#123;</span><br><span class="line">                <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> maskBytes = <span class="literal">undefined</span>;</span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (!data.<span class="property">mask_url</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾› mask_url å‚æ•°ï¼ˆé®ç½©å›¾åƒ URLï¼‰&#x27;</span> &#125;), &#123;</span><br><span class="line">                  <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">const</span> maskResult = <span class="keyword">await</span> <span class="title function_">fetchImageToBytes</span>(data.<span class="property">mask_url</span>, <span class="string">&#x27;é®ç½©å›¾åƒ&#x27;</span>);</span><br><span class="line">              <span class="keyword">if</span> (maskResult.<span class="property">error</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: maskResult.<span class="property">error</span> &#125;), &#123;</span><br><span class="line">                  <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">              maskBytes = maskResult.<span class="property">bytes</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…¼å®¹ä¸€äº›æ¨¡å‹å¯¹å­—æ®µå‘½åçš„è¦æ±‚ï¼šæœ‰çš„éœ€è¦ mask_image</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">negative_prompt</span>: data.<span class="property">negative_prompt</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              <span class="comment">// å»ºè®®ä½¿ç”¨æ›´å°çš„åˆ†è¾¨ç‡ï¼Œé¿å… 3001 å†…éƒ¨é”™è¯¯</span></span><br><span class="line">              <span class="attr">height</span>: <span class="title function_">sanitizeDimension</span>(<span class="built_in">parseInt</span>(data.<span class="property">height</span>, <span class="number">10</span>) || <span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">              <span class="attr">width</span>: <span class="title function_">sanitizeDimension</span>(<span class="built_in">parseInt</span>(data.<span class="property">width</span>, <span class="number">10</span>) || <span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">              <span class="attr">num_steps</span>: <span class="title function_">clamp</span>(<span class="built_in">parseInt</span>(data.<span class="property">num_steps</span>, <span class="number">10</span>) || <span class="number">20</span>, <span class="number">1</span>, <span class="number">50</span>),</span><br><span class="line">              <span class="attr">strength</span>: <span class="title function_">clamp</span>(<span class="built_in">parseFloat</span>(data.<span class="property">strength</span> ?? <span class="number">0.8</span>), <span class="number">0.0</span>, <span class="number">1.0</span>),</span><br><span class="line">              <span class="attr">guidance</span>: <span class="title function_">clamp</span>(<span class="built_in">parseFloat</span>(data.<span class="property">guidance</span> ?? <span class="number">7.5</span>), <span class="number">0.0</span>, <span class="number">30.0</span>),</span><br><span class="line">              <span class="attr">seed</span>: data.<span class="property">seed</span> || <span class="built_in">parseInt</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1024</span> * <span class="number">1024</span>).<span class="title function_">toString</span>(), <span class="number">10</span>),</span><br><span class="line">              <span class="attr">image</span>: [...imageResult.<span class="property">bytes</span>],</span><br><span class="line">              ...(maskBytes ? &#123; <span class="attr">mask</span>: [...maskBytes], <span class="attr">mask_image</span>: [...maskBytes] &#125; : &#123;&#125;)</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Default input parameters</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">negative_prompt</span>: data.<span class="property">negative_prompt</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              <span class="attr">height</span>: data.<span class="property">height</span> || <span class="number">1024</span>,</span><br><span class="line">              <span class="attr">width</span>: data.<span class="property">width</span> || <span class="number">1024</span>,</span><br><span class="line">              <span class="attr">num_steps</span>: data.<span class="property">num_steps</span> || <span class="number">20</span>,</span><br><span class="line">              <span class="attr">strength</span>: data.<span class="property">strength</span> || <span class="number">0.1</span>,</span><br><span class="line">              <span class="attr">guidance</span>: data.<span class="property">guidance</span> || <span class="number">7.5</span>,</span><br><span class="line">              <span class="attr">seed</span>: data.<span class="property">seed</span> || <span class="built_in">parseInt</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1024</span> * <span class="number">1024</span>).<span class="title function_">toString</span>(), <span class="number">10</span>),</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Generating image with <span class="subst">$&#123;model&#125;</span> and prompt: <span class="subst">$&#123;inputs.prompt.substring(<span class="number">0</span>, <span class="number">50</span>)&#125;</span>...`</span>);</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> numOutputs = <span class="title function_">clamp</span>(<span class="built_in">parseInt</span>(data.<span class="property">num_outputs</span>, <span class="number">10</span>) || <span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">generateOnce</span> = <span class="keyword">async</span> (<span class="params">seedOffset = <span class="number">0</span></span>) =&gt; &#123;</span><br><span class="line">              <span class="keyword">const</span> localInputs = &#123; ...inputs &#125;;</span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> localInputs.<span class="property">seed</span> === <span class="string">&#x27;number&#x27;</span>) localInputs.<span class="property">seed</span> = localInputs.<span class="property">seed</span> + seedOffset;</span><br><span class="line">              <span class="keyword">const</span> t0 = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">              <span class="keyword">const</span> res = <span class="keyword">await</span> env.<span class="property">AI</span>.<span class="title function_">run</span>(model, localInputs);</span><br><span class="line">              <span class="keyword">const</span> t1 = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">              <span class="keyword">return</span> &#123; res, <span class="attr">seconds</span>: (t1 - t0) / <span class="number">1000</span> &#125;;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// helper: convert bytes to base64</span></span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">bytesToBase64</span> = (<span class="params">bytes</span>) =&gt; &#123;</span><br><span class="line">              <span class="keyword">let</span> binary = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">              <span class="keyword">const</span> chunk = <span class="number">0x8000</span>;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytes.<span class="property">length</span>; i += chunk) &#123;</span><br><span class="line">                <span class="keyword">const</span> sub = bytes.<span class="title function_">subarray</span>(i, i + chunk);</span><br><span class="line">                binary += <span class="title class_">String</span>.<span class="property">fromCharCode</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, sub);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="title function_">btoa</span>(binary);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (numOutputs &gt; <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="keyword">const</span> tasks = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: numOutputs &#125;, <span class="function">(<span class="params">_, i</span>) =&gt;</span> <span class="title function_">generateOnce</span>(i));</span><br><span class="line">              <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(tasks);</span><br><span class="line">              <span class="keyword">const</span> secondsAvg = results.<span class="title function_">reduce</span>(<span class="function">(<span class="params">s, r</span>) =&gt;</span> s + r.<span class="property">seconds</span>, <span class="number">0</span>) / results.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">const</span> images = [];</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">const</span> &#123; res &#125; <span class="keyword">of</span> results) &#123;</span><br><span class="line">                <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">                  <span class="keyword">const</span> json = <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> ? res : <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res);</span><br><span class="line">                  <span class="keyword">if</span> (!json.<span class="property">image</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Invalid response from FLUX: missing image&#x27;</span>);</span><br><span class="line">                  images.<span class="title function_">push</span>(<span class="string">`data:image/png;base64,<span class="subst">$&#123;json.image&#125;</span>`</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="comment">// binary bytes -&gt; base64</span></span><br><span class="line">                  <span class="keyword">let</span> bytes;</span><br><span class="line">                  <span class="keyword">if</span> (res <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span>) bytes = res;</span><br><span class="line">                  <span class="keyword">else</span> <span class="keyword">if</span> (res &amp;&amp; <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> res.<span class="property">byteLength</span> === <span class="string">&#x27;number&#x27;</span>) bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(res);</span><br><span class="line">                  <span class="keyword">else</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(res).<span class="title function_">arrayBuffer</span>());</span><br><span class="line">                  images.<span class="title function_">push</span>(<span class="string">`data:image/png;base64,<span class="subst">$&#123;bytesToBase64(bytes)&#125;</span>`</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; images &#125;), &#123;</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                  ...corsHeaders,</span><br><span class="line">                  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                  <span class="string">&#x27;X-Server-Seconds&#x27;</span>: secondsAvg.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">res</span>: response, <span class="attr">seconds</span>: serverSeconds &#125; = <span class="keyword">await</span> <span class="title function_">generateOnce</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">            <span class="comment">// Processing the response of the flux-1-schnell model</span></span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">let</span> jsonResponse;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> response === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                jsonResponse = response;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  jsonResponse = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(response);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to parse JSON response:&#x27;</span>, e);</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                    <span class="attr">error</span>: <span class="string">&#x27;Failed to parse response&#x27;</span>,</span><br><span class="line">                    <span class="attr">details</span>: e.<span class="property">message</span></span><br><span class="line">                  &#125;), &#123; </span><br><span class="line">                    <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                    <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">if</span> (!jsonResponse.<span class="property">image</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                  <span class="attr">error</span>: <span class="string">&#x27;Invalid response format&#x27;</span>,</span><br><span class="line">                  <span class="attr">details</span>: <span class="string">&#x27;Image data not found in response&#x27;</span></span><br><span class="line">                &#125;), &#123; </span><br><span class="line">                  <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// Convert from base64 to binary data</span></span><br><span class="line">                <span class="keyword">const</span> binaryString = <span class="title function_">atob</span>(jsonResponse.<span class="property">image</span>);</span><br><span class="line">                <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(binaryString.<span class="property">length</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; binaryString.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                  bytes[i] = binaryString.<span class="title function_">charCodeAt</span>(i);</span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">                <span class="comment">// Returns binary data in PNG format</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(bytes, &#123;</span><br><span class="line">                  <span class="attr">headers</span>: &#123;</span><br><span class="line">                    ...corsHeaders,</span><br><span class="line">                    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                    ...(inputs.<span class="property">seed</span> ? &#123; <span class="string">&#x27;X-Seed&#x27;</span>: <span class="title class_">String</span>(inputs.<span class="property">seed</span>) &#125; : &#123;&#125;),</span><br><span class="line">                    <span class="string">&#x27;X-Image-Bytes&#x27;</span>: <span class="title class_">String</span>(bytes.<span class="property">length</span>),</span><br><span class="line">                    <span class="string">&#x27;X-Server-Seconds&#x27;</span>: serverSeconds.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to convert base64 to binary:&#x27;</span>, e);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                  <span class="attr">error</span>: <span class="string">&#x27;Failed to process image data&#x27;</span>,</span><br><span class="line">                  <span class="attr">details</span>: e.<span class="property">message</span></span><br><span class="line">                &#125;), &#123; </span><br><span class="line">                  <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Return the response directly (binary)</span></span><br><span class="line">                <span class="keyword">let</span> imageByteSize = <span class="literal">undefined</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  <span class="keyword">if</span> (response &amp;&amp; <span class="keyword">typeof</span> response === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (response <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span>) imageByteSize = response.<span class="property">length</span>;</span><br><span class="line">                    <span class="comment">// ArrayBuffer has byteLength</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> response.<span class="property">byteLength</span> === <span class="string">&#x27;number&#x27;</span>) imageByteSize = response.<span class="property">byteLength</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (_) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(response, &#123;</span><br><span class="line">                  <span class="attr">headers</span>: &#123;</span><br><span class="line">                    ...corsHeaders,</span><br><span class="line">                    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                    ...(inputs.<span class="property">seed</span> ? &#123; <span class="string">&#x27;X-Seed&#x27;</span>: <span class="title class_">String</span>(inputs.<span class="property">seed</span>) &#125; : &#123;&#125;),</span><br><span class="line">                    ...(imageByteSize ? &#123; <span class="string">&#x27;X-Image-Bytes&#x27;</span>: <span class="title class_">String</span>(imageByteSize) &#125; : &#123;&#125;),</span><br><span class="line">                    <span class="string">&#x27;X-Server-Seconds&#x27;</span>: serverSeconds.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (aiError) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;AI generation error:&#x27;</span>, aiError);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">              <span class="attr">error</span>: <span class="string">&#x27;Image generation failed&#x27;</span>,</span><br><span class="line">              <span class="attr">details</span>: aiError &amp;&amp; (aiError.<span class="property">message</span> || aiError.<span class="title function_">toString</span>()),</span><br><span class="line">              <span class="attr">model</span>: selectedModel.<span class="property">id</span></span><br><span class="line">            &#125;), &#123; </span><br><span class="line">              <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">              <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Missing required parameter: prompt or model&#x27;</span> &#125;), &#123; </span><br><span class="line">            <span class="attr">status</span>: <span class="number">400</span>, </span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125; </span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path.<span class="title function_">endsWith</span>(<span class="string">&#x27;.html&#x27;</span>) || path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// redirect to index.html for HTML requests</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">HTML</span>.<span class="title function_">replace</span>(<span class="regexp">/&#123;&#123;host&#125;&#125;/g</span>, originalHost), &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Not Found&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">404</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Worker error:&#x27;</span>, error);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal server error&#x27;</span>, <span class="attr">details</span>: error.<span class="property">message</span> &#125;), &#123; </span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
    </details>

<ol start="5">
<li><p><strong>è®¾ç½®è®¿é—®å¯†ç </strong>ï¼š</p>
<ul>
<li>åœ¨ <code>worker.js</code> ä¸­æ‰¾åˆ°ä»¥ä¸‹ä½ç½®ï¼ˆçº¦ç¬¬ 75 è¡Œï¼‰ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ’¡ æç¤ºï¼šåœ¨ä¸‹é¢è¿™è¡Œä¿®æ”¹ä½ çš„è®¿é—®å¯†ç </span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PASSWORDS</span> = [<span class="string">&#x27;admin123&#x27;</span>]; </span><br></pre></td></tr></table></figure>
<ul>
<li><strong>å…³é”®æ­¥éª¤ï¼š</strong> å°† <code>&#39;admin123&#39;</code> æ›¿æ¢ä¸ºä½ è‡ªå®šä¹‰çš„å¯†ç ï¼Œé˜²æ­¢ä»–äººæ»¥ç”¨ä½ çš„ç®—åŠ›é¢åº¦ã€‚ï¼ˆæ³¨æ„ä¿ç•™å•å¼•å·ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>æ·»åŠ å‰ç«¯ç•Œé¢ (<code>index.html</code>)</strong>ï¼š</p>
<ul>
<li>åœ¨ Workers ç¼–è¾‘å™¨å·¦ä¾§æ–‡ä»¶æ ï¼Œç‚¹å‡» â€œ+â€ æˆ–å³é”®ç‚¹å‡» <strong>â€œNew Fileâ€</strong>ã€‚</li>
<li>æ–‡ä»¶åï¼šåŠ¡å¿…å¡«å…¥ <code>index.html</code>ï¼ˆå…¨å°å†™ï¼‰ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.com/gl33332/138gl-ai/blob/main/index.html">ğŸ”— ç‚¹å‡»æ­¤å¤„è·³è½¬ GitHub å¤åˆ¶ </a>ï¼Œæˆ–è€…å±•å¼€ä¸‹æ–¹ä»£ç å—å¤åˆ¶ï¼š</li>
</ul>
</li>
</ol>
<details>
<summary>ğŸ“„ ç‚¹å‡»å±•å¼€ index.html å®Œæ•´ä»£ç </summary>
    <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span> <span class="attr">class</span>=<span class="string">&quot;light&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŸºäº CloudFlare çš„åœ¨çº¿æ–‡ç”Ÿå›¾æœåŠ¡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/huarzone/Text2img-Cloudflare-Workers@main/public/favicon.ico&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-pseudo">:root</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary</span>: <span class="number">#5046e5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-light</span>: <span class="number">#6e67eb</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-dark</span>: <span class="number">#4338ca</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--secondary</span>: <span class="number">#f0f4f8</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text</span>: <span class="number">#1a202c</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text-light</span>: <span class="number">#4a5568</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--background</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--card-bg</span>: <span class="number">#f7fafc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--border</span>: <span class="number">#e2e8f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--success</span>: <span class="number">#10b981</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--error</span>: <span class="number">#ef4444</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--warning</span>: <span class="number">#f59e0b</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--info</span>: <span class="number">#3b82f6</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.dark</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary</span>: <span class="number">#6e67eb</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-light</span>: <span class="number">#8a84ee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-dark</span>: <span class="number">#5046e5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--secondary</span>: <span class="number">#2d3748</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text</span>: <span class="number">#f7fafc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text-light</span>: <span class="number">#cbd5e0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--background</span>: <span class="number">#111827</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--card-bg</span>: <span class="number">#1f2937</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--border</span>: <span class="number">#374151</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--success</span>: <span class="number">#10b981</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--error</span>: <span class="number">#ef4444</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--warning</span>: <span class="number">#f59e0b</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--info</span>: <span class="number">#3b82f6</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease, color <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&quot;Segoe UI&quot;</span>, Roboto, Helvetica, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.375rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary-light);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.06</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary-dark);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--secondary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.06</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">15px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span>, <span class="selector-tag">select</span>, <span class="selector-tag">textarea</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.375rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>, <span class="selector-tag">select</span><span class="selector-pseudo">:focus</span>, <span class="selector-tag">textarea</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-color</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span> &#123;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-webkit-slider-thumb &#123;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-webkit-slider-thumb:hover &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-moz-range-thumb &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-moz-range-thumb:hover &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.animate-pulse</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: pulse <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.4</span>, <span class="number">0</span>, <span class="number">0.6</span>, <span class="number">1</span>) infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> pulse &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span>, <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">50%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: .<span class="number">5</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loading-mask</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">10</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">4px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.image-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">aspect-ratio</span>: <span class="number">1</span> / <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-height</span>: <span class="number">400px</span>; <span class="comment">/* æ·»åŠ æœ€å¤§é«˜åº¦é™åˆ¶ */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* å±…ä¸­æ˜¾ç¤º */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>; <span class="comment">/* ä¿æŒå®½åº¦å“åº”å¼ */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#imageStatus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">20</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.25rem</span> <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">9999px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.param-badge</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--secondary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.25rem</span> <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.25rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.fade-in</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: fadeIn <span class="number">0.5s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> fadeIn &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">from</span> &#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">to</span> &#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">visibility</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">125%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: opacity <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">visibility</span>: visible;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.mobile-flex-col</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding-left</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding-right</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.image-container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">max-height</span>: <span class="number">400px</span>; <span class="comment">/* ç§»åŠ¨ç«¯é€‚å½“å‡å°æœ€å¤§é«˜åº¦ */</span></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1024px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;min-h-screen py-4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container mx-auto px-4 py-4 max-w-6xl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center justify-between mb-6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;text-2xl md:text-3xl font-bold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                ğŸ³<span class="symbol">&amp;nbsp;</span>åœ¨çº¿æ–‡ç”Ÿå›¾æœåŠ¡</span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center space-x-2&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;themeToggle&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary p-2 h-10 w-10 flex items-center justify-center&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;åˆ‡æ¢æš—è‰²ä¸»é¢˜&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-moon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;github&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary p-2 h-10 w-10 flex items-center justify-center&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;é¡¹ç›®åœ°å€&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.open(&#x27;https://github.com/huarzone/Text2img-Cloudflare-Workers&#x27;, &#x27;_blank&#x27;)&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-brands fa-github&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex flex-col lg:flex-row gap-6 mobile-flex-col&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å·¦ä¾§æ§åˆ¶é¢æ¿ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full lg:w-2/5 space-y-4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-sliders mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            åŸºæœ¬è®¾ç½®</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;randomButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-dice mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> éšæœºæç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-key mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è®¿é—®å¯†ç </span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥è®¿é—®å¯†ç &quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin123&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;prompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-wand-magic-sparkles mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ­£å‘æç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;prompt&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;æè¿°æ‚¨æƒ³è¦ç”Ÿæˆçš„å›¾åƒå†…å®¹åŠæ ·å¼...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span>cyberpunk cat<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;negative_prompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-ban mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> åå‘æç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;negative_prompt&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;2&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;æè¿°åœ¨ç”Ÿæˆçš„å›¾åƒä¸­è¦é¿å…çš„å…ƒç´ æ–‡æœ¬...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;model&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-robot mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ–‡ç”Ÿå›¾æ¨¡å‹</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;model&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">disabled</span> <span class="attr">selected</span>&gt;</span>åŠ è½½ä¸­...<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 mt-2&quot;</span>&gt;</span>éƒ¨åˆ†æ¨¡å‹éœ€è¦æä¾›å›¾ç‰‡URLæˆ–é®ç½©URLï¼ˆè§ä¸‹æ–¹è¾“å…¥æ¡†ï¼‰ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;img2imgInputs&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden space-y-2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;image_url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¾“å…¥å›¾åƒURLï¼ˆå¿…å¡«ï¼‰</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;image_url&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;https://example.com/your-image.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mask_url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-mask mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> é®ç½©å›¾åƒURLï¼ˆå¿…å¡«ï¼Œinpainting ä½¿ç”¨ï¼‰</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mask_url&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;https://example.com/your-mask.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-gear mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            é«˜çº§é€‰é¡¹</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;toggleAdvanced&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-xs btn btn-secondary py-1 px-3 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-chevron-down mr-1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;advancedIcon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ˜¾ç¤º/éšè—</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;advancedOptions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;space-y-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;width&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-arrows-left-right mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å›¾åƒå®½åº¦</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;widthValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>1024px<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;width&quot;</span> <span class="attr">min</span>=<span class="string">&quot;256&quot;</span> <span class="attr">max</span>=<span class="string">&quot;2048&quot;</span> <span class="attr">step</span>=<span class="string">&quot;64&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1024&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;height&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-arrows-up-down mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å›¾åƒé«˜åº¦</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;heightValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>1024px<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;height&quot;</span> <span class="attr">min</span>=<span class="string">&quot;256&quot;</span> <span class="attr">max</span>=<span class="string">&quot;2048&quot;</span> <span class="attr">step</span>=<span class="string">&quot;64&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1024&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;num_steps&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-shoe-prints mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¿­ä»£æ­¥æ•°</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>æ›´é«˜çš„æ­¥æ•°é€šå¸¸ä¼šäº§ç”Ÿæ›´ç²¾ç»†çš„ç»†èŠ‚ï¼Œä½†éœ€è¦æ›´é•¿çš„å¤„ç†æ—¶é—´<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;num_stepsValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;num_steps&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;20&quot;</span> <span class="attr">step</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;guidance&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-compass mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å¼•å¯¼ç³»æ•°</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>æ§åˆ¶ç”Ÿæˆå›¾åƒä¸æç¤ºè¯çš„åŒ¹é…ç¨‹åº¦ï¼Œè¾ƒé«˜çš„å€¼ä¼šæ›´ä¸¥æ ¼éµå¾ªæç¤ºè¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;guidanceValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>7.5<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;guidance&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;30&quot;</span> <span class="attr">step</span>=<span class="string">&quot;0.5&quot;</span> <span class="attr">value</span>=<span class="string">&quot;7.5&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;seed&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-seedling mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> éšæœºç§å­</span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>ä½¿ç”¨ç›¸åŒçš„ç§å­å€¼å¯ä»¥åœ¨å…¶ä»–å‚æ•°ç›¸åŒçš„æƒ…å†µä¸‹ç”Ÿæˆç›¸ä¼¼çš„å›¾åƒ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex gap-2&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;seed&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;éšæœºç§å­å€¼&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;randomSeed&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-random&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 mt-1&quot;</span>&gt;</span>ç•™ç©ºåˆ™éšæœºç”Ÿæˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;submitButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary w-full py-3 flex items-center justify-center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-wand-magic-sparkles mr-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç”Ÿæˆå›¾åƒ</span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- å³ä¾§å›¾åƒå±•ç¤º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full lg:w-3/5&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card h-full p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            ç”Ÿæˆç»“æœ</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex space-x-2&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;copyParamsButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-copy mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å¤åˆ¶å‚æ•°</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-download mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä¸‹è½½å›¾åƒ</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadZipButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-file-zipper mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä¸‹è½½ZIP</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;image-container card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;loadingOverlay&quot;</span> <span class="attr">class</span>=<span class="string">&quot;loading-mask hidden&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center w-full px-6&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-white mt-3 font-medium&quot;</span>&gt;</span>ç”Ÿæˆä¸­ï¼Œè¯·ç¨å€™...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-white text-sm mt-1&quot;</span>&gt;</span>è¿™å¯èƒ½éœ€è¦å‡ ç§’åˆ°å‡ åç§’ä¸ç­‰<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;progressBarContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full mt-4&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;progressBar&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg-blue-500 h-2.5 rounded-full&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 0%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between text-xs mt-1 text-white&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;progressText&quot;</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;progressExtra&quot;</span>&gt;</span>ä¼°ç®—<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;initialPrompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-center text-gray-400 dark:text-gray-600&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image-portrait text-4xl mb-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹åˆ›å»ºå›¾åƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;imageStatus&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg-gray-300 text-gray-700 hidden&quot;</span>&gt;</span>çŠ¶æ€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;aiImage&quot;</span> <span class="attr">class</span>=<span class="string">&quot;max-h-full max-w-full rounded hidden&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç”Ÿæˆçš„å›¾åƒ&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageGallery&quot;</span> <span class="attr">class</span>=<span class="string">&quot;grid grid-cols-4 gap-2 mt-3 hidden&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageInfo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;space-y-3 mt-2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid grid-cols-2 gap-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-regular fa-clock mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç”Ÿæˆæ—¶é—´ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;generationTime&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-microchip mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä½¿ç”¨æ¨¡å‹ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;usedModel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-bolt mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç®—åŠ›ä¼°è®¡ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;computeInfo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 ml-2&quot;</span>&gt;</span>(it/s)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-database mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¾“å‡ºå¤§å°ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;imageSize&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;allParamsContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden mt-3 border-t border-gray-200 dark:border-gray-700 pt-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-medium mb-2 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-list-check mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ‰€æœ‰å‚æ•°</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;allParams&quot;</span> <span class="attr">class</span>=<span class="string">&quot;flex flex-wrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageMeta&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden mt-3 border-t border-gray-200 dark:border-gray-700 pt-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-medium mb-2 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-table mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ¯å¼ å›¾ç‰‡ä¿¡æ¯</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;w-full text-xs&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;text-left&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>å°ºå¯¸<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>å¤§å°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;imageMetaBody&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åˆå§‹åŒ–æ¨¡å‹åˆ—è¡¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> availableModels = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> randomPromptsList = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> currentImageParams = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> currentImagesArray = <span class="literal">null</span>; <span class="comment">// å¤šå›¾æ—¶çš„ dataURL æ•°ç»„</span></span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åŠ è½½æ¨¡å‹åˆ—è¡¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadModels</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/models&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨å¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    availableModels = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> modelSelect = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ¸…ç©ºå½“å‰é€‰é¡¹</span></span></span><br><span class="line"><span class="language-javascript">                    modelSelect.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ·»åŠ æ–°é€‰é¡¹</span></span></span><br><span class="line"><span class="language-javascript">                    availableModels.<span class="title function_">forEach</span>(<span class="function"><span class="params">model</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> option = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;option&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">value</span> = model.<span class="property">id</span>;</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;model.name&#125;</span> - <span class="subst">$&#123;model.description&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">dataset</span>.<span class="property">requiresImage</span> = model.<span class="property">requiresImage</span> ? <span class="string">&#x27;1&#x27;</span> : <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        modelSelect.<span class="title function_">appendChild</span>(option);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// é»˜è®¤é€‰æ‹©ç¬¬äºŒä¸ªæ¨¡å‹ï¼ˆé€šå¸¸æ˜¯æ›´å¥½çš„æ¨¡å‹ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (availableModels.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        modelSelect.<span class="property">value</span> = availableModels[<span class="number">1</span>].<span class="property">id</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨é”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åŠ è½½éšæœºæç¤ºè¯</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadRandomPrompts</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/prompts&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;åŠ è½½æç¤ºè¯å¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    randomPromptsList = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;åŠ è½½æç¤ºè¯é”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    randomPromptsList = [<span class="string">&#x27;æœªèƒ½åŠ è½½æç¤ºè¯åˆ—è¡¨ï¼Œè¯·é‡è¯•æˆ–æ‰‹åŠ¨è¾“å…¥&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åˆå§‹åŒ–åŠ è½½èµ„æº</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadModels</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadRandomPrompts</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç™»å½•</span></span></span><br><span class="line"><span class="language-javascript">            (<span class="title function_">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/config&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> cfg = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (cfg.<span class="property">require_password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">showLogin</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)();</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ç›¸å…³ä»£ç </span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> themeToggle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;themeToggle&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> html = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> moonIcon = <span class="string">`&lt;i class=&quot;fa-solid fa-moon&quot;&gt;&lt;/i&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> sunIcon = <span class="string">`&lt;i class=&quot;fa-solid fa-sun&quot;&gt;&lt;/i&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ£€æŸ¥ç³»ç»Ÿä¸»é¢˜æˆ–å­˜å‚¨çš„ä¸»é¢˜å¹¶è®¾ç½®åˆå§‹çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="property">theme</span> === <span class="string">&#x27;dark&#x27;</span> || (!(<span class="string">&#x27;theme&#x27;</span> <span class="keyword">in</span> <span class="variable language_">localStorage</span>) &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(<span class="string">&#x27;(prefers-color-scheme: dark)&#x27;</span>).<span class="property">matches</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                html.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="property">innerHTML</span> = sunIcon;</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢äº®è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                html.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="property">innerHTML</span> = moonIcon;</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢æš—è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            themeToggle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (html.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    html.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">localStorage</span>.<span class="property">theme</span> = <span class="string">&#x27;light&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="property">innerHTML</span> = moonIcon;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢æš—è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    html.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">localStorage</span>.<span class="property">theme</span> = <span class="string">&#x27;dark&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="property">innerHTML</span> = sunIcon;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢äº®è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é«˜çº§é€‰é¡¹åˆ‡æ¢</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> toggleAdvanced = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;toggleAdvanced&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> advancedOptions = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;advancedOptions&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> advancedIcon = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;advancedIcon&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            toggleAdvanced.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (advancedOptions.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hidden&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    advancedOptions.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;fa-chevron-down&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;fa-chevron-up&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    advancedOptions.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;fa-chevron-up&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;fa-chevron-down&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ¨¡å‹åˆ‡æ¢æ—¶æ˜¾ç¤º/éšè—å›¾ç”Ÿå›¾å­—æ®µ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> modelSelectEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> img2imgInputs = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;img2imgInputs&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (modelSelectEl &amp;&amp; img2imgInputs) &#123;</span></span><br><span class="line"><span class="language-javascript">                modelSelectEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> selected = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === <span class="variable language_">this</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (selected &amp;&amp; selected.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        img2imgInputs.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        img2imgInputs.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ»‘å—å€¼æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> sliders = [<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;num_steps&#x27;</span>, <span class="string">&#x27;guidance&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">            sliders.<span class="title function_">forEach</span>(<span class="function"><span class="params">id</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> slider = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> valueDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">`<span class="subst">$&#123;id&#125;</span>Value`</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                slider.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (id === <span class="string">&#x27;width&#x27;</span> || id === <span class="string">&#x27;height&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span>px`</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (id === <span class="string">&#x27;guidance&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="built_in">parseFloat</span>(<span class="variable language_">this</span>.<span class="property">value</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="variable language_">this</span>.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç”Ÿæˆæ•°é‡æ§ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> countContainer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            countContainer.<span class="property">className</span> = <span class="string">&#x27;mt-2&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            countContainer.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;label for=&quot;num_outputs&quot; class=&quot;block text-sm font-medium mb-1 flex items-center&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;i class=&quot;fa-solid fa-layer-group mr-1 text-xs&quot;&gt;&lt;/i&gt; ç”Ÿæˆæ•°é‡</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/label&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;select id=&quot;num_outputs&quot; class=&quot;w-full&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;1&quot; selected&gt;1&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;7&quot;&gt;7&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;8&quot;&gt;8&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/select&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">            `</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.card.p-4.space-y-4.fade-in&#x27;</span>).<span class="title function_">appendChild</span>(countContainer);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// éšæœºç§å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;randomSeed&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> randomSeed = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4294967295</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;seed&#x27;</span>).<span class="property">value</span> = randomSeed;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// éšæœºæç¤ºè¯</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;randomButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (randomPromptsList.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> randomIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * randomPromptsList.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prompt&#x27;</span>).<span class="property">value</span> = randomPromptsList[randomIndex];</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æç¤ºè¯åˆ—è¡¨æœªåŠ è½½ï¼Œè¯·ç¨åå†è¯•&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å¤åˆ¶å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;copyParamsButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!currentImageParams) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åˆ›å»ºå‚æ•°æ–‡æœ¬</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> paramsText = <span class="string">&#x27;--- AIç»˜å›¾åˆ›ä½œç”Ÿæˆå‚æ•° ---\n&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(currentImageParams)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (key === <span class="string">&#x27;password&#x27;</span>) <span class="keyword">continue</span>; <span class="comment">// ä¸å¤åˆ¶å¯†ç </span></span></span><br><span class="line"><span class="language-javascript">                    paramsText += <span class="string">`<span class="subst">$&#123;formatParamName(key)&#125;</span>: <span class="subst">$&#123;value&#125;</span>\n`</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¤åˆ¶åˆ°å‰ªè´´æ¿</span></span></span><br><span class="line"><span class="language-javascript">                navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(paramsText)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å‚æ•°å·²å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¤åˆ¶å¤±è´¥:&#x27;</span>, err);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å¤åˆ¶å‚æ•°å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ ¼å¼åŒ–å‚æ•°åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">formatParamName</span>(<span class="params">name</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> nameMap = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;prompt&#x27;</span>: <span class="string">&#x27;æ­£å‘æç¤ºè¯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;negative_prompt&#x27;</span>: <span class="string">&#x27;åå‘æç¤ºè¯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;model&#x27;</span>: <span class="string">&#x27;æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;width&#x27;</span>: <span class="string">&#x27;å›¾åƒå®½åº¦&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;height&#x27;</span>: <span class="string">&#x27;å›¾åƒé«˜åº¦&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;num_steps&#x27;</span>: <span class="string">&#x27;è¿­ä»£æ­¥æ•°&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;guidance&#x27;</span>: <span class="string">&#x27;å¼•å¯¼ç³»æ•°&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;seed&#x27;</span>: <span class="string">&#x27;éšæœºç§å­&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> nameMap[name] || name;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸‹è½½å›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aiImage&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> gallery = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageGallery&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> src = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!gallery.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hidden&#x27;</span>) &amp;&amp; currentImagesArray &amp;&amp; currentImagesArray.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    src = currentImagesArray[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    src = img.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!src) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ²¡æœ‰å¯ä¸‹è½½çš„å›¾åƒ&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ä»å›¾åƒæ•°æ®åˆ›å»ºblob</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(src);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> blob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// åˆ›å»ºä¸‹è½½é“¾æ¥</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ç”Ÿæˆæ–‡ä»¶å</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>.png`</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è§¦å‘ä¸‹è½½</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ¸…ç†</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å›¾åƒä¸‹è½½æˆåŠŸ&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ä¸‹è½½å›¾åƒé”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ä¸‹è½½å›¾åƒå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸‹è½½ ZIPï¼ˆå¤šå›¾ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadZipButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!currentImagesArray || currentImagesArray.<span class="property">length</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ²¡æœ‰å¯æ‰“åŒ…çš„å›¾ç‰‡&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> zip = <span class="keyword">new</span> <span class="title class_">JSZip</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; currentImagesArray.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> dataURL = currentImagesArray[i];</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> base64 = dataURL.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">                        zip.<span class="title function_">file</span>(<span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>-<span class="subst">$&#123;i+<span class="number">1</span>&#125;</span>.png`</span>, base64, &#123; <span class="attr">base64</span>: <span class="literal">true</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> blob = <span class="keyword">await</span> zip.<span class="title function_">generateAsync</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;blob&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>.zip`</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ZIP ä¸‹è½½å·²å¼€å§‹&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ZIPæ‰“åŒ…å¤±è´¥:&#x27;</span>, e);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ‰“åŒ…ZIPå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æäº¤ç”Ÿæˆè¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å¤ç”¨å…¨å±€çš„è®¡æ—¶å™¨ä¸æ§åˆ¶å™¨ï¼Œé¿å…é—ªçƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> progressTimer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> pendingController = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;submitButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤ºåŠ è½½ä¸­çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> loadingOverlay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loadingOverlay&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> initialPrompt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;initialPrompt&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> aiImage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aiImage&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressBarContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressBarContainer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressBar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressBar&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressText = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressText&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressExtra = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressExtra&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!loadingOverlay || !initialPrompt || !aiImage) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¿…è¦çš„DOMå…ƒç´ æœªæ‰¾åˆ°&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// éšè—åˆå§‹æç¤ºå’Œå›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">                initialPrompt.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                loadingOverlay.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// éšè—ä¹‹å‰çš„æç¤ºå’ŒæŒ‰é’®ï¼Œå¹¶æ¸…ç†ä¸Šä¸€æ¬¡çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> imageStatus = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageStatus&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> copyParamsButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;copyParamsButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> downloadButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (imageStatus) imageStatus.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (copyParamsButton) copyParamsButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (downloadButton) downloadButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (progressTimer) &#123; <span class="built_in">clearInterval</span>(progressTimer); progressTimer = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (pendingController) &#123; <span class="keyword">try</span> &#123; pendingController.<span class="title function_">abort</span>(); &#125; <span class="keyword">catch</span>(_)&#123;&#125; pendingController = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è·å–å‚æ•°ï¼ˆåˆå§‹è‰æ¡ˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> rawParams = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">password</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;password&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">prompt</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prompt&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">negative_prompt</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;negative_prompt&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">model</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>)?.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">width</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;width&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1024</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">height</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;height&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1024</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_steps</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;num_steps&#x27;</span>)?.<span class="property">value</span>) || <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">guidance</span>: <span class="built_in">parseFloat</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;guidance&#x27;</span>)?.<span class="property">value</span>) || <span class="number">7.5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">seed</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;seed&#x27;</span>)?.<span class="property">value</span>) || <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4294967295</span>),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">image_url</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;image_url&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">mask_url</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mask_url&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_outputs</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;num_outputs&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åŸºäºæ¨¡å‹ç‰¹æ€§ï¼Œæ¸…æ´—å‡ºæœ€ç»ˆè¦å‘é€/å±•ç¤ºçš„å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> selectedModelMeta = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === rawParams.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> params = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">password</span>: rawParams.<span class="property">password</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">prompt</span>: rawParams.<span class="property">prompt</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">negative_prompt</span>: rawParams.<span class="property">negative_prompt</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">model</span>: rawParams.<span class="property">model</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">width</span>: rawParams.<span class="property">width</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">height</span>: rawParams.<span class="property">height</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_steps</span>: rawParams.<span class="property">num_steps</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">guidance</span>: rawParams.<span class="property">guidance</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">seed</span>: rawParams.<span class="property">seed</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_outputs</span>: rawParams.<span class="property">num_outputs</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta?.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    params.<span class="property">image_url</span> = rawParams.<span class="property">image_url</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta?.<span class="property">requiresMask</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    params.<span class="property">mask_url</span> = rawParams.<span class="property">mask_url</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ä¿å­˜å½“å‰å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                currentImageParams = &#123;...params&#125;;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å‰ç«¯å¿…å¡«æ ¡éªŒï¼ˆä¾æ®æ¨¡å‹å…ƒä¿¡æ¯ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta &amp;&amp; selectedModelMeta.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!rawParams.<span class="property">image_url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾›è¾“å…¥å›¾åƒURL&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta &amp;&amp; selectedModelMeta.<span class="property">requiresMask</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!rawParams.<span class="property">mask_url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å±€éƒ¨é‡ç»˜æ¨¡å‹éœ€è¦æä¾›é®ç½©URL&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// å¯åŠ¨æ‹ŸçœŸè¿›åº¦æ¡</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> progress = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressBarContainer &amp;&amp; progressBar &amp;&amp; progressText) &#123;</span></span><br><span class="line"><span class="language-javascript">                        progressBarContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        progress = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;0%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        progressText.<span class="property">textContent</span> = <span class="string">&#x27;0%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (progressExtra) progressExtra.<span class="property">textContent</span> = <span class="string">&#x27;ä¼°ç®—&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> steps = params.<span class="property">num_steps</span> || <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> baseMs = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">4000</span>, <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">20000</span>, steps * <span class="number">600</span>));</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> startTs = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">                        progressTimer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> elapsed = <span class="title class_">Date</span>.<span class="title function_">now</span>() - startTs;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> ratio = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">0.95</span>, elapsed / baseMs); <span class="comment">// æœ€é«˜åˆ°95%ï¼Œç­‰å¾…çœŸå®å®Œæˆå†å°é¡¶</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> cur = <span class="title class_">Math</span>.<span class="title function_">floor</span>(ratio * <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (cur &gt; progress) &#123;</span></span><br><span class="line"><span class="language-javascript">                                progress = cur;</span></span><br><span class="line"><span class="language-javascript">                                progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">                                progressText.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;, <span class="number">150</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 60ç§’è¶…æ—¶æ§åˆ¶</span></span></span><br><span class="line"><span class="language-javascript">                    pendingController = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> pendingController &amp;&amp; pendingController.<span class="title function_">abort</span>(<span class="string">&#x27;timeout&#x27;</span>), <span class="number">60000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;image/*&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(params),</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">signal</span>: pendingController.<span class="property">signal</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearTimeout</span>(timeoutId);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> contentType = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (contentType?.<span class="title function_">includes</span>(<span class="string">&#x27;application/json&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> errorData = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> msg = errorData.<span class="property">error</span> || errorData.<span class="property">message</span> || <span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> details = errorData.<span class="property">details</span> ? <span class="string">`ï¼ˆ<span class="subst">$&#123;errorData.details&#125;</span>ï¼‰`</span> : <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;msg&#125;</span><span class="subst">$&#123;details&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> errorText = <span class="keyword">await</span> response.<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æœåŠ¡å™¨é”™è¯¯:&#x27;</span>, errorText);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> respType = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> serverSecondsHeader = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Server-Seconds&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> serverSeconds = serverSecondsHeader ? <span class="built_in">parseFloat</span>(serverSecondsHeader) : <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> base64Image = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> imageBlob = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> imagesArray = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (respType.<span class="title function_">includes</span>(<span class="string">&#x27;application/json&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(json.<span class="property">images</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                            imagesArray = json.<span class="property">images</span>;</span></span><br><span class="line"><span class="language-javascript">                            base64Image = imagesArray[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;å“åº”æ ¼å¼é”™è¯¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        imageBlob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                        base64Image = <span class="keyword">await</span> <span class="title function_">blobToBase64</span>(imageBlob);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> endTime = performance.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> generationTime = ((endTime - startTime) / <span class="number">1000</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è®¾ç½®å›¾åƒä¿¡æ¯å¹¶æ˜¾ç¤ºå›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> gallery = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageGallery&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    gallery.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        gallery.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        currentImagesArray = imagesArray.<span class="title function_">slice</span>();</span></span><br><span class="line"><span class="language-javascript">                        imagesArray.<span class="title function_">forEach</span>(<span class="function">(<span class="params">src, idx</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> wrap = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="property">className</span> = <span class="string">&#x27;relative group&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">src</span> = src;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">alt</span> = <span class="string">`ç”Ÿæˆçš„å›¾åƒ <span class="subst">$&#123;idx+<span class="number">1</span>&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">className</span> = <span class="string">&#x27;w-full h-auto rounded&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;zoom-in&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> <span class="title function_">openImageModal</span>(src));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// æ‚¬æµ®æ“ä½œæ¡</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> bar = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="property">className</span> = <span class="string">&#x27;absolute bottom-1 left-1 right-1 hidden group-hover:flex bg-black bg-opacity-50 text-white text-xs rounded px-1 py-0.5 gap-1 justify-center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnZoom = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-magnifying-glass-plus&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">title</span> = <span class="string">&#x27;æ”¾å¤§&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">onclick</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; e.<span class="title function_">stopPropagation</span>(); <span class="title function_">openImageModal</span>(src); &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnCopy = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-copy&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">title</span> = <span class="string">&#x27;å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">onclick</span> = <span class="title function_">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                                e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">await</span> navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å¤åˆ¶å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnDl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-download&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">title</span> = <span class="string">&#x27;ä¸‹è½½æ­¤å›¾&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">onclick</span> = <span class="title function_">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                                e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> blob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>-<span class="subst">$&#123;idx+<span class="number">1</span>&#125;</span>.png`</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link); link.<span class="title function_">click</span>(); <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ä¸‹è½½å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnZoom);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnCopy);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnDl);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="title function_">appendChild</span>(img);</span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="title function_">appendChild</span>(bar);</span></span><br><span class="line"><span class="language-javascript">                            gallery.<span class="title function_">appendChild</span>(wrap);</span></span><br><span class="line"><span class="language-javascript">                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        gallery.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        currentImagesArray = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">src</span> = base64Image;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ç»Ÿä¸€çš„UIå®Œæˆé€»è¾‘ï¼ˆä¸ä¾èµ– onload ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> <span class="title function_">finalize</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å›¾åƒåŠ è½½å®Œæˆåæ›´æ–°UI</span></span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!imagesArray || imagesArray.<span class="property">length</span> &lt;= <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            aiImage.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å®‰å…¨åœ°æ›´æ–°ä¿¡æ¯æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> elements = &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">generationTime</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;generationTime&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">usedModel</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">computeInfo</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;computeInfo&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">imageSize</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageSize&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">generationTime</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">generationTime</span>.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;generationTime&#125;</span>ç§’`</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">usedModel</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">usedModel</span>.<span class="property">textContent</span> = <span class="title function_">getModelNameById</span>(params.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// ä»å“åº”å¤´æå–ä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> usedModelHeader = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Used-Model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> usedModelName = usedModelHeader ? <span class="title function_">getModelNameById</span>(usedModelHeader) : <span class="title function_">getModelNameById</span>(params.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">usedModel</span>) elements.<span class="property">usedModel</span>.<span class="property">textContent</span> = usedModelName;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> bytesStr = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Image-Bytes&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">imageSize</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (bytesStr) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> bytes = <span class="built_in">parseInt</span>(bytesStr, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(bytes);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (imageBlob) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="comment">// å›é€€ï¼šç”¨blobå¤§å°</span></span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(imageBlob.<span class="property">size</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray[<span class="number">0</span>]) &#123;</span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(<span class="title function_">dataURLBytes</span>(imagesArray[<span class="number">0</span>]));</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// è®¡ç®—çœŸå® it/sï¼šè¿­ä»£æ­¥æ•° / å®é™…è€—æ—¶</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> itPerSec = (<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> steps = <span class="title class_">Number</span>(params.<span class="property">num_steps</span>) || <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> seconds = serverSeconds &amp;&amp; serverSeconds &gt; <span class="number">0</span> ? serverSeconds : (<span class="built_in">parseFloat</span>(generationTime) || <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (steps &gt; <span class="number">0</span> &amp;&amp; seconds &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> (steps / seconds).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> <span class="string">&#x27;-&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">computeInfo</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">computeInfo</span>.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;itPerSec&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// æ›´æ–°æ‰€æœ‰å‚æ•°é¢æ¿ï¼ˆéšè—ä¸ç›¸å…³å­—æ®µï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">updateParamsDisplay</span>(params);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¡«å……æ¯å¼ å›¾ç‰‡çš„å°ºå¯¸ä¸å¤§å°</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> metaPanel = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMeta&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> metaBody = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMetaBody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; metaPanel &amp;&amp; metaBody) &#123;</span></span><br><span class="line"><span class="language-javascript">                            metaBody.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> loadPromises = imagesArray.<span class="title function_">map</span>(<span class="function">(<span class="params">src, i</span>) =&gt;</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> probe = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> tr = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;tr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> sizeBytes = <span class="title function_">dataURLBytes</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    tr.<span class="property">innerHTML</span> = <span class="string">`&lt;td class=\&quot;py-1 pr-3\&quot;&gt;<span class="subst">$&#123;i+<span class="number">1</span>&#125;</span>&lt;/td&gt;&lt;td class=\&quot;py-1 pr-3\&quot;&gt;<span class="subst">$&#123;probe.width&#125;</span>Ã—<span class="subst">$&#123;probe.height&#125;</span>&lt;/td&gt;&lt;td class=\&quot;py-1\&quot;&gt;<span class="subst">$&#123;formatBytes(sizeBytes)&#125;</span>&lt;/td&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">                                    metaBody.<span class="title function_">appendChild</span>(tr);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">resolve</span>();</span></span><br><span class="line"><span class="language-javascript">                                &#125;;</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">onerror</span> = <span class="function">() =&gt;</span> <span class="title function_">resolve</span>();</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">src</span> = src;</span></span><br><span class="line"><span class="language-javascript">                            &#125;));</span></span><br><span class="line"><span class="language-javascript">                            <span class="title class_">Promise</span>.<span class="title function_">all</span>(loadPromises).<span class="title function_">then</span>(<span class="function">() =&gt;</span> metaPanel.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> panel = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMeta&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (panel) panel.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// è¿›åº¦æ¡æ”¶å£åˆ°100%</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (progressBarContainer &amp;&amp; progressBar &amp;&amp; progressText) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (progressTimer) <span class="built_in">clearInterval</span>(progressTimer);</span></span><br><span class="line"><span class="language-javascript">                            progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            progressText.<span class="property">textContent</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> progressBarContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>), <span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// æ˜¾ç¤ºçŠ¶æ€å’Œæ“ä½œæŒ‰é’®</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(imagesArray ? <span class="string">`ç”ŸæˆæˆåŠŸï¼ˆ<span class="subst">$&#123;imagesArray.length&#125;</span> å¼ ï¼‰`</span> : <span class="string">&#x27;ç”ŸæˆæˆåŠŸ&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (copyParamsButton) copyParamsButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (downloadButton) downloadButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> downloadZipButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadZipButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (downloadZipButton) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) downloadZipButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">else</span> downloadZipButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è§¦å‘ finalize</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">finalize</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">onload</span> = finalize;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç”Ÿæˆå›¾åƒé”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (error &amp;&amp; (error.<span class="property">name</span> === <span class="string">&#x27;AbortError&#x27;</span> || error.<span class="property">message</span> === <span class="string">&#x27;timeout&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;ç”Ÿæˆè¶…æ—¶ï¼Œè¯·å°è¯•æ›´æ¢æ¨¡å‹æˆ–é™ä½å®½é«˜åé‡è¯•&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(error.<span class="property">message</span> || <span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ˜¾ç¤ºåˆå§‹æç¤º</span></span></span><br><span class="line"><span class="language-javascript">                    initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">finally</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressTimer) &#123; <span class="built_in">clearInterval</span>(progressTimer); progressTimer = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressBarContainer) progressBarContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    pendingController = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å°†Blobè½¬æ¢ä¸ºBase64</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">blobToBase64</span>(<span class="params">blob</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onloadend</span> = <span class="function">() =&gt;</span> <span class="title function_">resolve</span>(reader.<span class="property">result</span>);</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onerror</span> = reject;</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="title function_">readAsDataURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å­—èŠ‚è½¬å¯è¯»å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">formatBytes</span>(<span class="params">bytes</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!bytes &amp;&amp; bytes !== <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;-&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> sizes = [<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;KB&#x27;</span>, <span class="string">&#x27;MB&#x27;</span>, <span class="string">&#x27;GB&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (bytes === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;0 B&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">log</span>(bytes) / <span class="title class_">Math</span>.<span class="title function_">log</span>(<span class="number">1024</span>));</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> value = (bytes / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">1024</span>, i)).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;value&#125;</span> <span class="subst">$&#123;sizes[i]&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è®¡ç®— dataURL çš„å­—èŠ‚å¤§å°ï¼ˆç²—ç•¥ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">dataURLBytes</span>(<span class="params">dataURL</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> base64 = dataURL.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// base64 é•¿åº¦ * 3/4 çº¦ç­‰äºå­—èŠ‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>((base64.<span class="property">length</span> * <span class="number">3</span>) / <span class="number">4</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç®€æ˜“å›¾ç‰‡æ”¾å¤§é¢„è§ˆ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">openImageModal</span>(<span class="params">src</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> existing = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imgModal&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (existing) existing.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> modal = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">id</span> = <span class="string">&#x27;imgModal&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">inset</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(0,0,0,0.7)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;flex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">alignItems</span> = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">justifyContent</span> = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;1000&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;div class=&quot;max-w-5xl max-h-[90vh] p-2&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;img src=&quot;<span class="subst">$&#123;src&#125;</span>&quot; class=&quot;rounded shadow-lg max-h-[85vh] mx-auto&quot; /&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;div class=&quot;text-center mt-2&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                      &lt;button id=&quot;closeImgModal&quot; class=&quot;btn btn-secondary&quot;&gt;å…³é—­&lt;/button&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;/div&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(modal);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;closeImgModal&#x27;</span>).<span class="property">onclick</span> = <span class="function">() =&gt;</span> modal.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; <span class="keyword">if</span> (e.<span class="property">target</span> === modal) modal.<span class="title function_">remove</span>(); &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é€šè¿‡IDè·å–æ¨¡å‹åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">getModelNameById</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> model = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === id);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> model ? model.<span class="property">name</span> : id;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ›´æ–°å‚æ•°æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">updateParamsDisplay</span>(<span class="params">params</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> allParamsContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;allParamsContainer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> allParamsElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;allParams&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!allParamsContainer || !allParamsElement) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ¸…ç©ºç°æœ‰å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                allParamsElement.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ·»åŠ æ–°å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(params)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (key === <span class="string">&#x27;password&#x27;</span>) <span class="keyword">continue</span>; <span class="comment">// ä¸æ˜¾ç¤ºå¯†ç </span></span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> paramName = <span class="title function_">formatParamName</span>(key);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> paramValue = value;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// åˆ›å»ºå‚æ•°å¾½ç« </span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> badge = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    badge.<span class="property">className</span> = <span class="string">&#x27;param-badge&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    badge.<span class="property">innerHTML</span> = <span class="string">`&lt;span class=&quot;font-medium&quot;&gt;<span class="subst">$&#123;paramName&#125;</span>:&lt;/span&gt; <span class="subst">$&#123;paramValue&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    allParamsElement.<span class="title function_">appendChild</span>(badge);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤ºå‚æ•°å®¹å™¨</span></span></span><br><span class="line"><span class="language-javascript">                allParamsContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ˜¾ç¤ºçŠ¶æ€æç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">showStatus</span>(<span class="params">message, type = <span class="string">&#x27;info&#x27;</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> statusElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageStatus&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!statusElement) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">switch</span> (type) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;success&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-green-100&#x27;</span>, <span class="string">&#x27;text-green-800&#x27;</span>, <span class="string">&#x27;dark:bg-green-900&#x27;</span>, <span class="string">&#x27;dark:text-green-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;error&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-red-100&#x27;</span>, <span class="string">&#x27;text-red-800&#x27;</span>, <span class="string">&#x27;dark:bg-red-900&#x27;</span>, <span class="string">&#x27;dark:text-red-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-yellow-100&#x27;</span>, <span class="string">&#x27;text-yellow-800&#x27;</span>, <span class="string">&#x27;dark:bg-yellow-900&#x27;</span>, <span class="string">&#x27;dark:text-yellow-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-blue-100&#x27;</span>, <span class="string">&#x27;text-blue-800&#x27;</span>, <span class="string">&#x27;dark:bg-blue-900&#x27;</span>, <span class="string">&#x27;dark:text-blue-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è®¾ç½®æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">textContent</span> = message;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 5ç§’åè‡ªåŠ¨éšè—</span></span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ç™»å½•é®ç½©åŠé€»è¾‘</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">showLogin</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginOverlay&#x27;</span>)) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">id</span> = <span class="string">&#x27;loginOverlay&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">inset</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">backdropFilter</span> = <span class="string">&#x27;blur(3px)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(0,0,0,0.4)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;1000&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;div class=&quot;w-full h-full flex items-center justify-center&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;div class=&quot;card p-6 w-96 bg-white dark:bg-gray-800&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;h3 class=&quot;text-lg font-semibold mb-4&quot;&gt;è¯·è¾“å…¥è®¿é—®å¯†ç &lt;/h3&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;input type=&quot;password&quot; id=&quot;loginPassword&quot; class=&quot;w-full&quot; placeholder=&quot;è®¿é—®å¯†ç &quot; /&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;button id=&quot;loginButton&quot; class=&quot;btn btn-primary w-full mt-4&quot;&gt;ç™»å½•&lt;/button&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p id=&quot;loginError&quot; class=&quot;text-red-500 text-sm mt-2 hidden&quot;&gt;å¯†ç é”™è¯¯&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/div&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(overlay);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">submitLogin</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> pwd = (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/auth&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">password</span>: pwd &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!resp.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginError&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    overlay.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginError&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, submitLogin);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;Enter&#x27;</span>) <span class="title function_">submitLogin</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
7.  **ä¿å­˜éƒ¨ç½²**ï¼šç‚¹å‡»å³ä¸Šè§’çš„è“è‰² **â€œéƒ¨ç½²â€** æŒ‰é’®ã€‚

<h3 id="ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰"></a>ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰</h3><ol start="8">
<li><strong>è¿›å…¥è®¾ç½®</strong>ï¼šè¿”å› Workers é¡¹ç›®ä¸»é¡µï¼Œç‚¹å‡» <strong>è®¾ç½® (Settings)</strong> -&gt; <strong>å˜é‡ (Variables)</strong>ã€‚</li>
<li><strong>æ·»åŠ  AI ç»‘å®š</strong>ï¼š<ul>
<li>åœ¨ä¸‹æ–¹æ‰¾åˆ° <strong>â€œWorkers AI ç»‘å®šâ€</strong> éƒ¨åˆ†ï¼Œç‚¹å‡»æ·»åŠ ç»‘å®šã€‚</li>
<li>åç§°é€šå¸¸ä¿æŒé»˜è®¤ï¼Œä¿å­˜å³å¯ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥"><a href="#ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥" class="headerlink" title="ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥"></a>ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥</h3><ol start="10">
<li><strong>æ·»åŠ è‡ªå®šä¹‰åŸŸ</strong>ï¼šåœ¨é¡¹ç›®é¡µç‚¹å‡» <strong>è®¾ç½®</strong> -&gt; <strong>è§¦å‘å™¨ (Triggers)</strong> -&gt; <strong>æ·»åŠ è‡ªå®šä¹‰åŸŸ</strong>ã€‚</li>
<li><strong>å¡«å†™åŸŸå</strong>ï¼šè¾“å…¥æ‚¨çš„åŸŸåï¼ˆä¾‹å¦‚ <code>ai.138gl.com</code>ï¼‰ï¼Œç‚¹å‡»æ·»åŠ ã€‚</li>
<li><strong>è§£æç”Ÿæ•ˆ</strong>ï¼šç­‰å¾… Cloudflare å®Œæˆ DNS è§£æåï¼Œå³å¯é€šè¿‡è¯¥åŸŸåç›´æ¥è®¿é—®å¹¶å¼€å§‹ AI ç»˜å›¾ï¼</li>
</ol>
<hr>
<h2 id="ğŸ’¡-ä½¿ç”¨å°è´´å£«"><a href="#ğŸ’¡-ä½¿ç”¨å°è´´å£«" class="headerlink" title="ğŸ’¡ ä½¿ç”¨å°è´´å£«"></a>ğŸ’¡ ä½¿ç”¨å°è´´å£«</h2><ul>
<li><strong>ç™»å½•æ–¹å¼</strong>ï¼šè®¿é—®åŸŸååï¼Œè¾“å…¥æ‚¨åœ¨ç¬¬ 5 æ­¥è®¾ç½®çš„å¯†ç å³å¯ç™»å½•ã€‚</li>
<li><strong>å…è´¹é¢åº¦</strong>ï¼šCloudflare Workers AI ç›®å‰æœ‰æ¯æ—¥å…è´¹é¢åº¦é™åˆ¶ï¼Œå»ºè®®ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œè¯·å‹¿æ»¥ç”¨ã€‚</li>
</ul>
<blockquote>
<p>[!TIP]<br>å¦‚æœéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ° <code>Environment Variable</code> ç›¸å…³é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç¬¬ 9 æ­¥çš„ AI ç»‘å®šæ˜¯å¦æˆåŠŸå®Œæˆã€‚</p>
</blockquote>
<hr>
<p><strong>ğŸ’¬ ç•™è¨€åé¦ˆ</strong><br>å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•æŠ¥é”™ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºè´´å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šååŠ©æ‚¨è§£å†³ï¼</p>
</article><div class="post-copyright"><div class="post-copyright__author_group"><div class="post-copyright__author_img"><img class="post-copyright__author_img_front" src="/img/avatar.png"></div><div class="post-copyright__author_name">åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</div><div class="post-copyright__author_desc"></div></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div id="quit-box" onclick="RemoveRewardMask()"></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans">CC BY-NC-SA 4.0</a>åè®®ï¼Œå®Œæ•´è½¬è½½è¯·æ³¨æ˜æ¥è‡ª<a href="/">åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</a></span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cloudflare/"><span class="tags-punctuation"><i class="solitude fas fa-hashtag"></i>Cloudflare<span class="tagsPageCount">1</span></span></a><a class="post-meta__tags" href="/tags/AI%E9%83%A8%E7%BD%B2/"><span class="tags-punctuation"><i class="solitude fas fa-hashtag"></i>AIéƒ¨ç½²<span class="tagsPageCount">1</span></span></a><a class="post-meta__tags" href="/tags/%E6%96%87%E7%94%9F%E5%9B%BE/"><span class="tags-punctuation"><i class="solitude fas fa-hashtag"></i>æ–‡ç”Ÿå›¾<span class="tagsPageCount">1</span></span></a></div></div></div><nav class="needEndHide pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2026/01/30/WebViewTvLive%20%E7%BD%91%E8%A7%86%E7%94%B5%E8%A7%86/"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)</div></div></a></div><div class="next-post pull-right"><a href="/2025/05/30/%E5%BD%B1%E8%A7%86tv/"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°</div></div></a></div></nav><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="solitude fas fa-comment"></i><span> è¯„è®º</span><span class="count"> (<span class="twikoo-count"><i class="solitude fas fa-spinner fa-spin"></i></span>)</span></div></div><div class="comment-wrap"><div id="twikoo-wrap"></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><div class="top-group"><div class="sayhi" id="sayhi" onclick="sco.changeWittyWord()"></div></div></div><div class="avatar"><img alt="å¤´åƒ" src="/img/avatar.png"><div class="sticker"><img class="sticker-img" src="/img/24x24å¾½ç« .gif" alt="å¿ƒæƒ…è´´çº¸"></div></div><div class="description">è¿™æ˜¯æˆ‘çš„åšå®¢blog.138gl.com<br> - å‘è§‰æ–°é²œäº‹ç‰©,åˆ†äº«å¿«ä¹è¶£é—»<br> - è®°å½•ç²¾å½©ç¬é—´,äº«å—å¹¸ç¦æ—¶åˆ»</div><div class="bottom-group"><span class="left"><div class="name">åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</div><div class="desc">åªæœ‰è¿é£ï¼Œé£ç­æ‰èƒ½é£å¾—æ›´é«˜ã€‚</div></span><div class="social-icons is-center"><a class="social-icon" target="_blank" rel="noopener" href="https://github.com/gl33332" title="Github"><i class="solitude  fab fa-github"></i></a><a class="social-icon" target="_blank" rel="noopener" href="https://space.bilibili.com/472696710" title="Bilibili"><i class="solitude  fab fa-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="solitude fas fa-bars"></i><span>æ–‡ç« ç›®å½•</span></div><div class="toc-content" id="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9A%80-%E9%83%A8%E7%BD%B2%E7%AE%80%E4%BB%8B"><span class="toc-text">ğŸš€ éƒ¨ç½²ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4"><span class="toc-text">ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5%EF%BC%9A%E8%B5%84%E6%BA%90%E7%BB%91%E5%AE%9A%EF%BC%88%E5%85%B3%E9%94%AE%EF%BC%89"><span class="toc-text">ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5%EF%BC%9A%E5%9F%9F%E5%90%8D%E6%8E%A5%E5%85%A5"><span class="toc-text">ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%A1-%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%B4%B4%E5%A3%AB"><span class="toc-text">ğŸ’¡ ä½¿ç”¨å°è´´å£«</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="solitude fas fa-map"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><a class="aside-list-item" href="/2026/01/30/WebViewTvLive%20%E7%BD%91%E8%A7%86%E7%94%B5%E8%A7%86/" title="WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)"><div class="thumbnail"><img alt="WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)" src="https://github.com/hxh19950701/WebViewTvLive/raw/main/images/image_9.jpg"></div><div class="content"><span class="title" href="/2026/01/30/WebViewTvLive%20%E7%BD%91%E8%A7%86%E7%94%B5%E8%A7%86/" title="WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)">WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)</span><span class="categories" href="/2026/01/30/WebViewTvLive%20%E7%BD%91%E8%A7%86%E7%94%B5%E8%A7%86/">è½¯ä»¶</span></div></a><a class="aside-list-item" href="/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/" title="AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°"><div class="thumbnail"><img alt="AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°" src="https://imgbed.138gl.com/file/blog/æ–‡ç« /AI/1755614107881_TWAIbt-001.png"></div><div class="content"><span class="title" href="/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/" title="AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°">AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°</span><span class="categories" href="/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/">æŠ€æœ¯</span></div></a><a class="aside-list-item" href="/2025/05/30/%E5%BD%B1%E8%A7%86tv/" title="å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°"><div class="thumbnail"><img alt="å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°" src="https://imgbed.138gl.com/file/dh/dbxc/1748494392477_wdys_2025-05-29_12-49-21.png"></div><div class="content"><span class="title" href="/2025/05/30/%E5%BD%B1%E8%A7%86tv/" title="å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°">å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°</span><span class="categories" href="/2025/05/30/%E5%BD%B1%E8%A7%86tv/">å½±è§†</span></div></a><a class="aside-list-item" href="/2025/05/30/%E7%A7%81%E4%BF%A1%E4%BB%8B%E7%BB%8D/" title="ç§ä¿¡ä»‹ç»ï¼šé˜…åå³ç„šã€å®‰å…¨ä¼ è¾“çš„æ­£ç¡®æ‰“å¼€æ–¹å¼"><div class="thumbnail"><img alt="ç§ä¿¡ä»‹ç»ï¼šé˜…åå³ç„šã€å®‰å…¨ä¼ è¾“çš„æ­£ç¡®æ‰“å¼€æ–¹å¼" src="https://imgbed.138gl.com/file/dh/dbxc/1748588221075_sx_2025-05-30_14-30-4201.png"></div><div class="content"><span class="title" href="/2025/05/30/%E7%A7%81%E4%BF%A1%E4%BB%8B%E7%BB%8D/" title="ç§ä¿¡ä»‹ç»ï¼šé˜…åå³ç„šã€å®‰å…¨ä¼ è¾“çš„æ­£ç¡®æ‰“å¼€æ–¹å¼">ç§ä¿¡ä»‹ç»ï¼šé˜…åå³ç„šã€å®‰å…¨ä¼ è¾“çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</span><span class="categories" href="/2025/05/30/%E7%A7%81%E4%BF%A1%E4%BB%8B%E7%BB%8D/">è½¯ä»¶æ•™ç¨‹</span></div></a><a class="aside-list-item" href="/2025/04/01/Hexo-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" title="Hexo åŸºç¡€å‘½ä»¤ï¼šä»æœ¬åœ°æ’°å†™åˆ°ä¸€é”®éƒ¨ç½²"><div class="thumbnail"><img alt="Hexo åŸºç¡€å‘½ä»¤ï¼šä»æœ¬åœ°æ’°å†™åˆ°ä¸€é”®éƒ¨ç½²" src="https://lmage.138gl.com/PicGo/2025/04/bw-fm001.jpg"></div><div class="content"><span class="title" href="/2025/04/01/Hexo-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" title="Hexo åŸºç¡€å‘½ä»¤ï¼šä»æœ¬åœ°æ’°å†™åˆ°ä¸€é”®éƒ¨ç½²">Hexo åŸºç¡€å‘½ä»¤ï¼šä»æœ¬åœ°æ’°å†™åˆ°ä¸€é”®éƒ¨ç½²</span><span class="categories" href="/2025/04/01/Hexo-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/">æ•™ç¨‹</span></div></a></div></div></div></div></main><footer id="footer"><div id="st-footer-bar"><div class="footer-logo"><span>åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</span></div><div class="footer-bar-description"></div><div><a class="footer-bar-link" href="/about/" title="äº†è§£æ›´å¤š">äº†è§£æ›´å¤š</a></div></div><div id="st-footer"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div class="copyright">Â© 2025 - 2026 By<a class="footer-bar-link" href="/" title="åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘">åŒè¡Œé™Œè·¯ä¸¤ä¸ç–‘</a></div><div class="beian-group"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://hexo.io/" title="æ¡†æ¶ï¼šHexo">æ¡†æ¶ï¼šHexo</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/everfu/hexo-theme-solitude" title="ä¸»é¢˜ï¼šSolitude">ä¸»é¢˜ï¼šSolitude</a></div></div><div class="footer-bar-right"></div></div></div><div><div class="comment-barrage needEndHide"></div></div></footer></div><div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="solitude fas fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="solitude fas fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="solitude fas fa-arrows-rotate"></i></div><div class="rightMenu-item" id="menu-top"><i class="solitude fas fa-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="solitude fas fa-clone"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="solitude fas fa-clipboard"></i><span>ç²˜è´´æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-commenttext"><i class="solitude fas fa-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></div><div class="rightMenu-item" id="menu-newwindow"><i class="solitude far fa-window-maximize"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="solitude fas fa-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="solitude fas fa-clone"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="solitude fas fa-cloud-arrow-down"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="solitude fas fa-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class="rightMenu-item" id="menu-commentBarrage" onclick="sco.switchCommentBarrage()"><i class="solitude fas fa-comment"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></div><div class="rightMenu-item" id="menu-darkmode" onclick="sco.switchDarkMode()"><i class="solitude fas fa-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></div><div class="rightMenu-item" id="menu-translate"><i class="solitude fas fa-language"></i><span>è½‰ç‚ºç¹é«”</span></div></div></div><div id="rightmenu-mask"></div></div><div><!-- Critical scripts loaded synchronously--><script src="/js/utils.js?v=3.0.21"></script><script src="/js/main.js?v=3.0.21"></script><!-- Non-critical scripts loaded asynchronously--><script async src="/js/third_party/waterfall.min.js?v=3.0.21"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><!-- Feature-specific scripts loaded asynchronously--><script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/typeit@8.8.7/dist/index.umd.min.js"></script><script defer src="/js/tw_cn.js?v=3.0.21"></script><!-- UI enhancement scripts--><script defer src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/swiper@11.0.5/swiper-bundle.min.js"></script><!-- Music player scripts--><!-- Cover color processing scripts--><script defer src="https://cdn.jsdelivr.net/npm/colorthief@2.6.0/dist/color-thief.min.js"></script><script defer src="/js/covercolor/local.js?v=3.0.21"></script><script>window.paceOptions = {
  restartOnPushState: false
}

utils.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')
</script><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- Search functionality--><!-- Right menu functionality--><script defer src="/js/right_menu.js?v=3.0.21"></script><script src="https://npm.elemecdn.com/chinese-lunar@0.1.4/lib/chinese-lunar.js"></script><script src="/schedule/schedule.js"></script><div class="js-pjax"><script>(() => {
    const getCount = () => {
        const ele = document.querySelectorAll('.twikoo-count')
        if (!ele) return
        twikoo.getCommentsCount({
            envId: 'https://pl.138gl.com/.netlify/functions/twikoo',
            region: '',
            urls: [window.location.pathname],
            includeReply: false
        }).then(res => {
            ele.forEach(item => item.textContent = res[0].count)
        }).catch(err => {
            console.error(err)
        })
    }
    const init = () => {
        twikoo.init(Object.assign({
            el: '#twikoo-wrap',
            envId: 'https://pl.138gl.com/.netlify/functions/twikoo',
            region: '',
            path: window.location.pathname,
            onCommentLoaded: () => {
                GLOBAL_CONFIG.lightbox && utils.lightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
            }
        }, null))

         && getCount()
        sco.owoBig({
            body: '.OwO-body',
            item: '.OwO-items li'
        })

        true && barrageTwikoo()
    }

    const loadTwikoo = () => {
        if (typeof twikoo === 'object') setTimeout(init,0)
        else utils.getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js').then(init)
    }

    if ('Twikoo' === 'Twikoo' || true) {
        if (true) utils.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
        else loadTwikoo()
    } else {
        window.loadTwoComment = loadTwikoo
    }
})()
</script><script>async function barrageTwikoo() {
    await fetch("https://pl.138gl.com/.netlify/functions/twikoo", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            event: "COMMENT_GET",
            accessToken: "",
            url: window.location.pathname
        })
    }).then(async res => {
        if (!res.ok) throw new Error("HTTP error! status: " + res.status)
        const data = await res.json();
        const init = () => {
            initializeCommentBarrage((data.data).map(item => Object.assign({
                content: item.comment,
                nick: item.nick,
                mailMd5: item.mailMd5,
                id: item.id
            })))
        }
        if (typeof initializeCommentBarrage === "undefined") await utils.getScript('/js/third_party/barrage.min.js?v=3.0.21').then(init)
        else init()
    }).catch(error => console.error("An error occurred while fetching comments: ", error))
}</script><script>mermaid.run();
</script></div></div><!-- pjax--><script>let pjax = null;

function initPjax() {
    if (typeof Pjax === 'undefined') {
        console.warn('Pjax is not loaded yet, retrying...');
        setTimeout(initPjax, 100);
        return;
    }

    pjax = new Pjax({
        elements: 'a:not([target="_blank"])',
        selectors: ["title","#body-wrap","#site-config","meta[name=\"description\"]",".js-pjax","meta[property^=\"og:\"]","#config-diff",".rs_show",".rs_hide"],
        cacheBust: false,
        analytics: false,
        scrollRestoration: false
    })

    // å°† pjax å®ä¾‹æŒ‚è½½åˆ°å…¨å±€
    window.pjax = pjax;

    document.querySelectorAll('script[data-pjax]').forEach(item => {
        const newScript = document.createElement('script')
        const content = item.text || item.textContent || item.innerHTML || ""
        Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
        newScript.appendChild(document.createTextNode(content))
        item.parentNode.replaceChild(newScript, item)
    })

    document.addEventListener('pjax:complete', () => {
        window.refreshFn()

        document.querySelectorAll('script[data-pjax]').forEach(item => {
            const newScript = document.createElement('script')
            const content = item.text || item.textContent || item.innerHTML || ""
            Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
            newScript.appendChild(document.createTextNode(content))
            item.parentNode.replaceChild(newScript, item)
        })

        GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

    })

    document.addEventListener('pjax:error', (e) => {
        if (e.request.status === 404) {
            pjax.loadUrl('/404.html')
        }
    })
}

// åˆå§‹åŒ– Pjax
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPjax);
} else {
    initPjax();
}</script><!-- google adsense--><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="solitude fas fa-xmark"></i></button></nav><div class="search-wrap"><div class="search-box"><input class="search-box-input" id="search-input" type="text" autocomplete="off" spellcheck="false" autocorrect="off" autocapitalize="off" placeholder="è¾“å…¥å…³é”®è¯å¿«é€ŸæŸ¥æ‰¾"></div><div id="search-results"><div id="search-hits"><a class="tag-list" href="javascript:void(0);" onclick="pjax.loadUrl('/tags/Hexo/')">Hexo</a></div></div><div id="search-pagination"></div><div id="search-tips"></div></div></div><div id="search-mask"></div></div><script src="/js/search/local.js?v=3.0.21"></script></body></html>
        <script>
            const posts = ["2026/01/30/WebViewTvLive ç½‘è§†ç”µè§†/","2025/08/19/AIå…è´¹éƒ¨ç½²æ–‡ç”Ÿå›¾/","2025/05/30/å½±è§†tv/","2025/05/30/ç§ä¿¡ä»‹ç»/","2025/04/01/Hexo-åŸºç¡€å‘½ä»¤/"];
            function toRandomPost() {
                const randomPost = posts[Math.floor(Math.random() * posts.length)];
                pjax.loadUrl(GLOBAL_CONFIG.root + randomPost);
            }
        </script>