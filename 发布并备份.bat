@echo off
setlocal enabledelayedexpansion

echo ======================================================
echo   æ­£åœ¨å¯åŠ¨ï¼šåšå®¢ä¸€é”®æ›´æ–°ï¼ˆç•ªå‰§åŒæ­¥ + æºç å¤‡ä»½ + å‘å¸ƒï¼‰
echo ======================================================

:: 1. åŒæ­¥ç•ªå‰§æ•°æ® (å¦‚æœä½ åœ¨ Bangumi ä¸Šæœ‰æ–°åŠ¨ä½œ)
echo [Step 1/4] æ­£åœ¨æŠ“å– Bangumi.tv ç•ªå‰§æ•°æ®...
call hexo bangumi -u

:: 2. æ¸…ç†å¹¶ç”Ÿæˆ
echo [Step 2/4] æ­£åœ¨æ¸…ç†ç¼“å­˜å¹¶é‡æ–°ç”Ÿæˆç½‘é¡µ...
call hexo cl && call hexo g

:: 3. å¤‡ä»½æºç åˆ° GitHub
echo [Step 3/4] æ­£åœ¨å¤‡ä»½åšå®¢æºç ...
git add .
:: æ£€æŸ¥æ˜¯å¦æœ‰å˜åŠ¨ï¼Œæœ‰åˆ™æäº¤
git diff --quiet --exit-code --cached || git commit -m "Site Update: %date% %time%"
:: è¿™é‡Œçš„ main è¯·ç¡®è®¤æ˜¯ä½ ä»“åº“çš„åˆ†æ”¯å
git push origin master

:: 4. éƒ¨ç½²ç½‘é¡µ
echo [Step 4/4] æ­£åœ¨éƒ¨ç½²é™æ€é¡µé¢åˆ°çº¿ä¸Š...
call hexo d

echo.
echo ======================================================
echo   ğŸ‰ æ‰€æœ‰ä»»åŠ¡å·²åœ†æ»¡å®Œæˆï¼
echo   è¯·ç¨åè®¿é—®ï¼šblog.138gl.com
echo ======================================================
pause