<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo åŸºç¡€å‘½ä»¤ï¼šä»æœ¬åœ°æ’°å†™åˆ°ä¸€é”®éƒ¨ç½²</title>
    <url>/2025/04/01/Hexo-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>æ¬¢è¿æ¥åˆ° <a href="https://hexo.io/">Hexo</a>ï¼è¿™æ˜¯æ‚¨çš„ç¬¬ä¸€ç¯‡åšæ–‡ã€‚è¯·æŸ¥é˜… <a href="https://hexo.io/docs/">æ–‡æ¡£</a> ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨ Hexo æ—¶é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨ <a href="https://hexo.io/docs/troubleshooting.html">æ•…éšœæ’é™¤æŒ‡å—</a> ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ–è€…æ‚¨ä¹Ÿå¯ä»¥åœ¨ <a href="https://github.com/hexojs/hexo/issues">GitHub</a> ä¸Šå‘æˆ‘æé—®ã€‚</p>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><h3 id="æœ¬åœ°é¢„è§ˆ"><a href="#æœ¬åœ°é¢„è§ˆ" class="headerlink" title="æœ¬åœ°é¢„è§ˆ"></a>æœ¬åœ°é¢„è§ˆ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure>

<h3 id="æ¨é€-æ›´æ–°-éƒ¨ç½²"><a href="#æ¨é€-æ›´æ–°-éƒ¨ç½²" class="headerlink" title="æ¨é€ æ›´æ–° éƒ¨ç½²"></a>æ¨é€ æ›´æ–° éƒ¨ç½²</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo cl; hexo g; hexo d</span><br></pre></td></tr></table></figure>

<h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><h3 id="åˆ›å»ºæ–°è´´"><a href="#åˆ›å»ºæ–°è´´" class="headerlink" title="åˆ›å»ºæ–°è´´"></a>åˆ›å»ºæ–°è´´</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šä¿¡æ¯: <a href="https://hexo.io/docs/writing.html">å†™ä½œ</a></p>
<h3 id="å¯åŠ¨æœåŠ¡å™¨"><a href="#å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨"></a>å¯åŠ¨æœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šä¿¡æ¯: <a href="https://hexo.io/docs/server.html">æœåŠ¡å™¨</a></p>
<h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šä¿¡æ¯: <a href="https://hexo.io/docs/generating.html">ç”Ÿæˆ</a></p>
<h3 id="éƒ¨ç½²åˆ°è¿œç¨‹ç«™ç‚¹"><a href="#éƒ¨ç½²åˆ°è¿œç¨‹ç«™ç‚¹" class="headerlink" title="éƒ¨ç½²åˆ°è¿œç¨‹ç«™ç‚¹"></a>éƒ¨ç½²åˆ°è¿œç¨‹ç«™ç‚¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">éƒ¨ç½²</a></p>
]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢æ­å»º</tag>
        <tag>æŒ‡å—</tag>
      </tags>
  </entry>
  <entry>
    <title>å½±è§†TVï¼šåŸºäº LibreTV çš„å…¨èƒ½å¼€æºå½±éŸ³å¹³å°</title>
    <url>/2025/05/30/%E5%BD%B1%E8%A7%86tv/</url>
    <content><![CDATA[<p><img src="https://imgbed.138gl.com/file/dh/dbxc/1748494392477_wdys_2025-05-29_12-49-21.png" alt="æˆ‘çš„å½±è§†TV"></p>
<h2 id="ğŸ“º-æ¬¢è¿å…‰é¡¾æˆ‘çš„å½±è§†TV"><a href="#ğŸ“º-æ¬¢è¿å…‰é¡¾æˆ‘çš„å½±è§†TV" class="headerlink" title="ğŸ“º æ¬¢è¿å…‰é¡¾æˆ‘çš„å½±è§†TV"></a>ğŸ“º æ¬¢è¿å…‰é¡¾æˆ‘çš„å½±è§†TV</h2><p>è¿™æ˜¯ä¸€ä¸ªåŸºäºå¼€æºé¡¹ç›®æ„å»ºçš„å½±éŸ³åˆ†äº«å¹³å°ï¼Œæ—¨åœ¨ä¸ºå¤§å®¶æä¾›ä¸€ä¸ªæè‡´çº¯å‡€çš„è§‚å½±ç¯å¢ƒã€‚</p>
<hr>
<h3 id="ğŸ› ï¸-é¡¹ç›®å£°æ˜"><a href="#ğŸ› ï¸-é¡¹ç›®å£°æ˜" class="headerlink" title="ğŸ› ï¸ é¡¹ç›®å£°æ˜"></a>ğŸ› ï¸ é¡¹ç›®å£°æ˜</h3><p>æœ¬ç«™æ‰€ä½¿ç”¨çš„ç¨‹åº <strong>LibreTV</strong> æ¥æºäº GitHub å¼€å‘è€… <strong>LibreSpark</strong>ã€‚</p>
<ul>
<li><strong>æ€§è´¨</strong>ï¼šå¼€æºé¡¹ç›®ï¼Œä»…ä¾›æŠ€æœ¯äº¤æµä¸å­¦ä¹ ä½¿ç”¨ã€‚</li>
<li><strong>æºç ä»“åº“</strong>ï¼š<a href="https://github.com/LibreSpark/LibreTV">LibreSpark&#x2F;LibreTV</a></li>
</ul>
<h3 id="ğŸ¬-å¼€å§‹ä½¿ç”¨"><a href="#ğŸ¬-å¼€å§‹ä½¿ç”¨" class="headerlink" title="ğŸ¬ å¼€å§‹ä½¿ç”¨"></a>ğŸ¬ å¼€å§‹ä½¿ç”¨</h3><ul>
<li><strong>è®¿é—®åœ°å€</strong>ï¼š<a href="https://tv.138gl.com/"> ğŸ”— ç‚¹å‡»è¿›å…¥ å½±è§†TV </a></li>
<li><strong>è®¿é—®å‡­è¯</strong>ï¼šè¿›å…¥é¡µé¢éœ€è¾“å…¥å¯†ç ã€‚<strong>å¦‚æœæ‚¨è¿˜æ²¡æœ‰å¯†ç ï¼Œè¯·åœ¨æœ¬æ–‡ä¸‹æ–¹ç•™è¨€è·å–ã€‚</strong></li>
</ul>
<h3 id="âš™ï¸-è¿›é˜¶é…ç½®"><a href="#âš™ï¸-è¿›é˜¶é…ç½®" class="headerlink" title="âš™ï¸ è¿›é˜¶é…ç½®"></a>âš™ï¸ è¿›é˜¶é…ç½®</h3><ul>
<li><strong>è‡ªå®šä¹‰ API</strong>ï¼šè¿›å…¥ TV ç•Œé¢åï¼Œç‚¹å‡»<strong>å³ä¸Šè§’è®¾ç½®</strong>å›¾æ ‡ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ API å½±è§†æºã€‚</li>
<li><strong>éœ€æ±‚åé¦ˆ</strong>ï¼šå¦‚æœæ‚¨æœ‰æƒ³çœ‹ä½†æœä¸åˆ°çš„ç‰¹æ®Šç”µå½±ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ï¼Œæˆ‘ä¼šå°½åŠ›æ›´æ–°ã€‚</li>
</ul>
<hr>
<h3 id="âš ï¸-ä½¿ç”¨é¡»çŸ¥"><a href="#âš ï¸-ä½¿ç”¨é¡»çŸ¥" class="headerlink" title="âš ï¸ ä½¿ç”¨é¡»çŸ¥"></a>âš ï¸ ä½¿ç”¨é¡»çŸ¥</h3><blockquote>
<p>[!IMPORTANT]<br><strong>æœ¬å¹³å°å†…å®¹ä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œè¯·åŠ¡å¿…éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œè¯·å‹¿æ»¥ç”¨ï¼</strong></p>
</blockquote>
<div style="text-align:center; background: #222; padding: 25px; border-radius: 12px; margin-top: 40px; border: 1px solid #444;">
  <h1 style="color: #FFEB3B; margin: 0; letter-spacing: 5px;">ğŸˆ ç¥ï¼šå…­ä¸€å¿«ä¹ï¼Œç«¥å¿ƒæ°¸é©»ï¼</h1>
</div>]]></content>
      <categories>
        <category>å½±è§†</category>
      </categories>
      <tags>
        <tag>å½±è§†</tag>
        <tag>å¼€æºè½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§ä¿¡ä»‹ç»ï¼šé˜…åå³ç„šã€å®‰å…¨ä¼ è¾“çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</title>
    <url>/2025/05/30/%E7%A7%81%E4%BF%A1%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p><img src="https://imgbed.138gl.com/file/dh/dbxc/1748587910577_sx_2025-05-30_14-30-4201.png" alt="ç§ä¿¡ç³»ç»Ÿæ¼”ç¤º"></p>
<h2 id="ğŸ“–-å¿«é€Ÿä¸Šæ‰‹æŒ‡å—"><a href="#ğŸ“–-å¿«é€Ÿä¸Šæ‰‹æŒ‡å—" class="headerlink" title="ğŸ“– å¿«é€Ÿä¸Šæ‰‹æŒ‡å—"></a>ğŸ“– å¿«é€Ÿä¸Šæ‰‹æŒ‡å—</h2><p>ç§ä¿¡ç³»ç»Ÿï¼ˆ<a href="https://sx.138gl.com/">sx.138gl.com</a>ï¼‰æ˜¯ä¸€ä¸ªä¸“æ³¨äºéšç§ä¿æŠ¤çš„ä¿¡æ¯ä¼ è¾“å·¥å…·ã€‚</p>
<ol>
<li><strong>è¾“å…¥ä¿¡æ¯</strong>ï¼šåœ¨æ–‡æœ¬æ¡†è¾“å…¥æ‚¨æƒ³å‘é€çš„å†…å®¹ã€‚</li>
<li><strong>æ·»åŠ é™„ä»¶</strong>ï¼šç‚¹å‡»å³ä¾§åŠŸèƒ½æ¡†ï¼Œæ”¯æŒä¸Šä¼ æ–‡ä»¶ã€å›¾ç‰‡ç­‰é™„ä»¶ã€‚</li>
<li><strong>é«˜çº§è®¾ç½®</strong>ï¼š<ul>
<li><strong>ç¬”è®°å¯†ç </strong>ï¼šä¸ºä¿¡æ¯åŠ é”ï¼Œåªæœ‰æŒæœ‰å¯†ç çš„äººæ‰èƒ½æŸ¥çœ‹ã€‚</li>
<li><strong>é€‰æ‹©æ—¶é—´</strong>ï¼šè®¾ç½®ä¿¡æ¯çš„æœ‰æ•ˆæœŸé™ã€‚</li>
<li><strong>é”€æ¯åŠŸèƒ½</strong>ï¼šå¼€å¯åå®ç°â€œé˜…åå³ç„šâ€ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ğŸ“½ï¸-æ“ä½œæ¼”ç¤º"><a href="#ğŸ“½ï¸-æ“ä½œæ¼”ç¤º" class="headerlink" title="ğŸ“½ï¸ æ“ä½œæ¼”ç¤º"></a>ğŸ“½ï¸ æ“ä½œæ¼”ç¤º</h2><p>å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æŸ¥çœ‹åŠ¨æ€æ•™ç¨‹ï¼š</p>
<blockquote>
<p><strong><a href="https://imgbed.138gl.com/file/sx/jc/2025/05/30/1748606145850_sxlz_2025-05-30_19-11-44.gif">ğŸ¬ æŸ¥çœ‹æ“ä½œæŒ‡å— GIF æ¼”ç¤º â¡ï¸</a></strong></p>
</blockquote>
<hr>
<h2 id="âš ï¸-æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆå¿…è¯»ï¼‰"><a href="#âš ï¸-æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆå¿…è¯»ï¼‰" class="headerlink" title="âš ï¸ æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆå¿…è¯»ï¼‰"></a>âš ï¸ æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆå¿…è¯»ï¼‰</h2><p>ä¸ºäº†æ‚¨çš„ä¿¡æ¯å®‰å…¨ï¼Œè¯·åŠ¡å¿…äº†è§£<strong>é”€æ¯åŠŸèƒ½</strong>çš„é€»è¾‘ï¼š</p>
<blockquote>
<p>[!CAUTION]<br><strong>å…³äºâ€œå¼€å¯é”€æ¯â€åçš„é‡è¦æé†’ï¼š</strong><br>å½“æ‚¨å¼€å¯â€œé”€æ¯åŠŸèƒ½â€åï¼Œç³»ç»Ÿä¼šå°†<strong>ç‚¹å‡»æŸ¥çœ‹</strong>è¿™ä¸€åŠ¨ä½œåˆ¤å®šä¸ºé”€æ¯æŒ‡ä»¤ã€‚<br><strong>æ— è®ºå¯†ç è¾“å…¥æ˜¯å¦æ­£ç¡®ï¼Œä¿¡æ¯åœ¨ç‚¹å‡»åéƒ½ä¼šè¢«ç«‹å³æŠ¹é™¤ã€‚</strong><br><strong>è¯·æé†’æ¥æ”¶æ–¹ï¼š</strong> åŠ¡å¿…ç¡®è®¤å¯†ç æ— è¯¯åå†ç‚¹å‡»â€œæŸ¥çœ‹â€ï¼Œå¦åˆ™ä¿¡æ¯å°†æ— æ³•æ‰¾å›ï¼</p>
</blockquote>
<hr>
<h2 id="ğŸ’¬-ç»“è¯­"><a href="#ğŸ’¬-ç»“è¯­" class="headerlink" title="ğŸ’¬ ç»“è¯­"></a>ğŸ’¬ ç»“è¯­</h2><p>æœ¬ç³»ç»Ÿç§å¯†æ€§æé«˜ï¼Œéå¸¸é€‚åˆä¼ è¾“æ•æ„Ÿæ–‡æœ¬æˆ–ä¸´æ—¶æ–‡ä»¶ã€‚è‹¥åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€æˆ–é€šè¿‡ç§ä¿¡åŠŸèƒ½ç›´æ¥è”ç³»æˆ‘ã€‚</p>
<div style="text-align:center; background: #333; padding: 20px; border-radius: 10px; margin-top: 30px;">
  <h2 style="color: #FFD700; margin: 0;">ğŸ‹ ç¥å¤§å®¶ç«¯åˆå¼€å¿ƒå¿«ä¹ï¼</h2>
</div>]]></content>
      <categories>
        <category>è½¯ä»¶æ•™ç¨‹</category>
        <category>æ•™å­¦</category>
      </categories>
      <tags>
        <tag>ç§ä¿¡</tag>
        <tag>é˜…åå³ç„š</tag>
        <tag>å®‰å…¨é€šä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>WebViewTvLiveï¼šå…¨å¹³å°é€‚é…çš„å®‰å“ç”µè§†ç›´æ’­ç¥å™¨ (æ”¯æŒè½¦è½½ Android 16)</title>
    <url>/2026/01/30/WebViewTvLive%20%E7%BD%91%E8%A7%86%E7%94%B5%E8%A7%86/</url>
    <content><![CDATA[<h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><h2 id="ğŸ“º-é¡¹ç›®ç®€ä»‹"><a href="#ğŸ“º-é¡¹ç›®ç®€ä»‹" class="headerlink" title="ğŸ“º é¡¹ç›®ç®€ä»‹"></a>ğŸ“º é¡¹ç›®ç®€ä»‹</h2><p><strong>WebViewTvLive</strong> æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¤§å±å’Œç§»åŠ¨ç«¯è®¾è®¡çš„ç”µè§†ç›´æ’­å·¥å…·ã€‚å®ƒé€šè¿‡é›†æˆ <strong>è…¾è®¯ X5 (TBS) WebView å†…æ ¸</strong>ï¼Œç›´æ¥è°ƒç”¨å®˜æ–¹ç½‘é¡µç›´æ’­æµï¼Œä»æ ¹æºä¸Šè§£å†³äº†ç›´æ’­æºæ˜“å¤±æ•ˆçš„é—®é¢˜ï¼Œæä¾›å¦‚åŸç”Ÿ App èˆ¬çš„æµç•…ä½“éªŒã€‚</p>
<p><img src="https://github.com/hxh19950701/WebViewTvLive/raw/main/images/image_10.jpg" alt="WebViewTvLive æ¼”ç¤º"></p>
<hr>
<h2 id="âœ¨-åŠŸèƒ½äº®ç‚¹"><a href="#âœ¨-åŠŸèƒ½äº®ç‚¹" class="headerlink" title="âœ¨ åŠŸèƒ½äº®ç‚¹"></a>âœ¨ åŠŸèƒ½äº®ç‚¹</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <strong>å…¨å¹³å°è¦†ç›–</strong>ï¼šé€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè§†ç›’å­åŠ <strong>è½¦è½½ç³»ç»Ÿ (æœ€æ–°æ”¯æŒ Android 16)</strong>ã€‚</li>
<li><input checked="" disabled="" type="checkbox"> <strong>å†…æ ¸è‡ªç”±åˆ‡æ¢</strong>ï¼šæ”¯æŒè…¾è®¯ X5 å†…æ ¸ä¸ç³»ç»ŸåŸç”Ÿå†…æ ¸åˆ‡æ¢ï¼Œå…¼é¡¾æ€§èƒ½ä¸ç¨³å®šã€‚</li>
<li><input checked="" disabled="" type="checkbox"> <strong>ä¼ ç»Ÿæ“ä½œä½“éªŒ</strong>ï¼šå®Œæ•´æ”¯æŒ<strong>é¥æ§å™¨æ•°å­—é”®æ¢å°</strong>ã€ä¸Šä¸‹é”®åˆ‡å°ã€‚</li>
<li><input checked="" disabled="" type="checkbox"> <strong>æç®€çº¯å‡€</strong>ï¼šæ— å¯åŠ¨å¹¿å‘Šï¼Œä¸€é”®ç›´è¾¾å®˜æ–¹ç›´æ’­é¡µé¢ã€‚</li>
</ul>
<hr>
<h2 id="âš ï¸-åˆæ¬¡è¿è¡Œé‡è¦è®¾ç½®ï¼ˆè§£å†³æ˜¾ç¤ºå¼‚å¸¸ï¼‰"><a href="#âš ï¸-åˆæ¬¡è¿è¡Œé‡è¦è®¾ç½®ï¼ˆè§£å†³æ˜¾ç¤ºå¼‚å¸¸ï¼‰" class="headerlink" title="âš ï¸ åˆæ¬¡è¿è¡Œé‡è¦è®¾ç½®ï¼ˆè§£å†³æ˜¾ç¤ºå¼‚å¸¸ï¼‰"></a>âš ï¸ åˆæ¬¡è¿è¡Œé‡è¦è®¾ç½®ï¼ˆè§£å†³æ˜¾ç¤ºå¼‚å¸¸ï¼‰</h2><p>å¦‚æœåœ¨æ‰‹æœºæˆ–éƒ¨åˆ†è®¾å¤‡å®‰è£…åå‘ç°<strong>é¡µé¢æ˜¾ç¤ºä¸æ­£å¸¸</strong>ï¼ˆå¦‚æœªå…¨å±ã€æ¯”ä¾‹å¤±è°ƒç­‰ï¼‰ï¼Œè¯·å‚è€ƒä¸‹æ–¹è¯¦ç»†çš„æ“ä½œç¤ºæ„å›¾è¿›è¡Œå¿«é€Ÿä¿®å¤ï¼š</p>
<p><img src="https://imgbed.138gl.com/file/blog/%E6%96%87%E7%AB%A0/%E8%BD%AF%E4%BB%B6/PixPin_2026-01-30_22-50-53.webp" alt="è®¾ç½®æ“ä½œæ¼”ç¤º"></p>
<ol>
<li><strong>å”¤å‡ºè®¾ç½®</strong>ï¼šåœ¨æ’­æ”¾é¡µé¢<strong>ç‚¹å‡»å³ä¸‹è§’çš„å°é½¿è½®</strong>æˆ–<strong>å³ä¾§è¾¹æ æŒ‰é’®</strong>ã€‚</li>
<li><strong>è¿›å…¥èœå•</strong>ï¼šç‚¹å‡»å‡ºç°çš„ <strong>â€œè®¾ç½®â€</strong> é€‰é¡¹ã€‚</li>
<li><strong>å‘ä¸Šæ»‘åŠ¨</strong>ï¼šåœ¨è®¾ç½®åˆ—è¡¨ä¸­å‘ä¸Šæ»‘åŠ¨ï¼Œç›´åˆ°çœ‹åˆ°åº•éƒ¨çš„éšè—é€‰é¡¹ã€‚</li>
<li><strong>å¼€å¯å…¨å±</strong>ï¼šæ‰¾åˆ° <strong>â€œè‡ªåŠ¨å…¨å±æ’­æ”¾â€</strong>ï¼Œå°†å…¶åˆ‡æ¢ä¸º <strong>â€œæ‰“å¼€â€</strong> çŠ¶æ€ã€‚</li>
</ol>
<blockquote>
<p>[!TIP]<br>å®Œæˆä¸Šè¿°è®¾ç½®åï¼Œä¸‹æ¬¡è¿›å…¥åº”ç”¨å³å¯è‡ªåŠ¨é€‚é…å±å¹•ï¼Œå½»åº•è§£å†³ç”»é¢æ¯”ä¾‹å¤±è°ƒæˆ–æ— æ³•å…¨å±çš„é—®é¢˜ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ–¥ï¸-ç¡¬ä»¶æ¨èé…ç½®"><a href="#ğŸ–¥ï¸-ç¡¬ä»¶æ¨èé…ç½®" class="headerlink" title="ğŸ–¥ï¸ ç¡¬ä»¶æ¨èé…ç½®"></a>ğŸ–¥ï¸ ç¡¬ä»¶æ¨èé…ç½®</h2><table>
<thead>
<tr>
<th align="left">é¡¹ç›®</th>
<th align="left">æœ€ä½è¦æ±‚ (Minimum)</th>
<th align="left">æ¨èé…ç½® (Recommended)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>CPU</strong></td>
<td align="left">å››æ ¸ Cortex-A53</td>
<td align="left"><strong>A55 &#x2F; A76 æ¶æ„ (å¦‚æ™¶æ™¨ S905 ç³»åˆ—)</strong></td>
</tr>
<tr>
<td align="left"><strong>å†…å­˜</strong></td>
<td align="left">2GB</td>
<td align="left"><strong>4GB åŠä»¥ä¸Š</strong></td>
</tr>
<tr>
<td align="left"><strong>ç³»ç»Ÿç‰ˆæœ¬</strong></td>
<td align="left">Android 5.0</td>
<td align="left"><strong>Android 11 åŠä»¥ä¸Š (æ”¯æŒ Android 16)</strong></td>
</tr>
</tbody></table>
<blockquote>
<p>[!NOTE]<br><strong>TV ç”¨æˆ·è´´å£«</strong>ï¼šè‹¥è®¾å¤‡è¿è¡Œå¡é¡¿ï¼Œè¯·åœ¨è®¾ç½®ä¸­<strong>å…³é—­ TBS å†…æ ¸</strong>ï¼Œæ”¹ç”¨åŸç”Ÿç³»ç»Ÿå†…æ ¸ä»¥èŠ‚çœèµ„æºã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ“¥-è·å–åº”ç”¨-v2-1-1"><a href="#ğŸ“¥-è·å–åº”ç”¨-v2-1-1" class="headerlink" title="ğŸ“¥ è·å–åº”ç”¨ (v2.1.1)"></a>ğŸ“¥ è·å–åº”ç”¨ (v2.1.1)</h2><h3 id="1-æ‰«ç å¿«æ·ä¸‹è½½"><a href="#1-æ‰«ç å¿«æ·ä¸‹è½½" class="headerlink" title="1. æ‰«ç å¿«æ·ä¸‹è½½"></a>1. æ‰«ç å¿«æ·ä¸‹è½½</h3><table>
<thead>
<tr>
<th align="center">ç™¾åº¦ç½‘ç›˜ (æå–ç : h838)</th>
<th align="center">GitHub Release</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://pan.baidu.com/s/19mn7eo6J6ldnn-YEBvcmqw?pwd=h838" alt="ç™¾åº¦ç½‘ç›˜äºŒç»´ç "></td>
<td align="center"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://github.com/hxh19950701/WebViewTvLive/releases" alt="GitHubäºŒç»´ç "></td>
</tr>
</tbody></table>
<h3 id="2-ä¸‹è½½é“¾æ¥"><a href="#2-ä¸‹è½½é“¾æ¥" class="headerlink" title="2. ä¸‹è½½é“¾æ¥"></a>2. ä¸‹è½½é“¾æ¥</h3><a class="solitude-link-card" href="https://pan.baidu.com/s/19mn7eo6J6ldnn-YEBvcmqw?pwd=h838" target="_blank">
  <div class="link-card-content">
    <div class="link-card-title">ç™¾åº¦ç½‘ç›˜ (æå–ç : h838)</div>
    <div class="link-card-desc">é“¾æ¥: https://pan.baidu.com/s/19mn7eo6J6ldnn-YEBvcmqw æå–ç : h838</div>
  </div>
  <i class="fas fa-cloud-download-alt"></i>
</a>

<a class="solitude-link-card" href="https://url08.ctfile.com/f/62089408-8608834475-694a20?p=5845" target="_blank">
  <div class="link-card-content">
    <div class="link-card-title">å¤‡ç”¨ç½‘ç›˜é•œåƒ (å¯†ç : 5845)</div>
    <div class="link-card-desc">åŒ…å«è“å¥äº‘ä¸åŸé€šç½‘ç›˜é“¾æ¥ã€‚</div>
  </div>
  <i class="fas fa-download"></i>
</a>

<hr>
<p><strong>ğŸ’¬ äº’åŠ¨äº¤æµ</strong><br>å¦‚æœæ‚¨åœ¨é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæˆ–è€…åœ¨ç‰¹å®šç³»ç»Ÿä¸Šè¿è¡Œæœ‰è¯¯ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€åé¦ˆï¼</p>
]]></content>
      <categories>
        <category>è½¯ä»¶</category>
      </categories>
      <tags>
        <tag>å¼€æºè½¯ä»¶</tag>
        <tag>ç”µè§†ç›´æ’­</tag>
        <tag>TVåº”ç”¨</tag>
        <tag>å®‰å“è½¦è½½</tag>
        <tag>X5å†…æ ¸</tag>
      </tags>
  </entry>
  <entry>
    <title>AI å…è´¹éƒ¨ç½²æŒ‡å—ï¼šåˆ©ç”¨ Cloudflare Workers é›¶æˆæœ¬æ­å»ºæ–‡ç”Ÿå›¾å¹³å°</title>
    <url>/2025/08/19/AI%E5%85%8D%E8%B4%B9%E9%83%A8%E7%BD%B2%E6%96%87%E7%94%9F%E5%9B%BE/</url>
    <content><![CDATA[<p><img src="https://imgbed.138gl.com/file/blog/%E6%96%87%E7%AB%A0/AI/1755614107881_TWAIbt-001.png" alt="AIå…è´¹éƒ¨ç½²æ–‡ç”Ÿå›¾"></p>
<h2 id="ğŸš€-éƒ¨ç½²ç®€ä»‹"><a href="#ğŸš€-éƒ¨ç½²ç®€ä»‹" class="headerlink" title="ğŸš€ éƒ¨ç½²ç®€ä»‹"></a>ğŸš€ éƒ¨ç½²ç®€ä»‹</h2><p>é€šè¿‡ Cloudflare Workers AI æä¾›çš„å…è´¹ç®—åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é›¶æˆæœ¬æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ç”Ÿå›¾ï¼ˆText-to-Imageï¼‰å·¥å…·ã€‚æœ¬æ•™ç¨‹å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆä»ä»£ç å¤åˆ¶åˆ°åŸŸåç»‘å®šçš„å…¨è¿‡ç¨‹ã€‚</p>
<hr>
<h2 id="ğŸ› ï¸-éƒ¨ç½²æ­¥éª¤"><a href="#ğŸ› ï¸-éƒ¨ç½²æ­¥éª¤" class="headerlink" title="ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤"></a>ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤</h2><h3 id="ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–"></a>ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–</h3><ol>
<li><strong>å‡†å¤‡åŸŸå</strong>ï¼šå»ºè®®å‡†å¤‡ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆå¦‚ <code>ai.138gl.com</code>ï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·²æœ‰çš„åŸŸåæˆ–æ³¨å†Œå…è´¹åŸŸåã€‚</li>
<li><strong>ç™»å½•å¹³å°</strong>ï¼šè®¿é—®å¹¶ç™»å½• <a href="https://dash.cloudflare.com/">Cloudflare æ§åˆ¶å°</a>ã€‚</li>
<li><strong>åˆ›å»º Worker</strong>ï¼šè¿›å…¥ <strong>Workers å’Œ Pages</strong>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <strong>Hello World</strong> é¡¹ç›®ã€‚</li>
</ol>
<p>ç¬¬äºŒé˜¶æ®µï¼šä»£ç é…ç½®<br>æ³¨å…¥æ ¸å¿ƒé€»è¾‘ (worker.js)ï¼š</p>
<p>åœ¨ Cloudflare Workers çš„ä»£ç ç¼–è¾‘å™¨ä¸­ï¼Œæ‰¾åˆ°é»˜è®¤çš„ worker.jsã€‚<br>æ“ä½œï¼šå…¨é€‰å¹¶åˆ é™¤ç¼–è¾‘å™¨å†…çš„æ‰€æœ‰åŸæœ‰ä»£ç ã€‚<br>ä»£ç æ¥æºï¼šä½ å¯ä»¥ğŸ”— ç‚¹å‡»æ­¤å¤„è·³è½¬ GitHub å¤åˆ¶ï¼Œæˆ–è€…å±•å¼€ä¸‹æ–¹ä»£ç å—ç›´æ¥å¤åˆ¶ï¼š</p>
<details>
<summary>ğŸ“„ ç‚¹å‡»å±•å¼€ worker.js å®Œæ•´ä»£ç </summary>
    <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: kared</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>_date: 2025-05-10 21:15:59</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@last</span>_editors: kared</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@last</span>_edit_time: 2025-05-11 01:25:36</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: This Cloudflare Worker script handles image generation.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import html template</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">HTML</span> <span class="keyword">from</span> <span class="string">&#x27;./index.html&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Available models list</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">AVAILABLE_MODELS</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-xl-base-1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion XL Base 1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;Stability AI SDXL æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/stabilityai/stable-diffusion-xl-base-1.0&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;flux-1-schnell&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;FLUX.1 [schnell]&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;ç²¾ç¡®ç»†èŠ‚è¡¨ç°çš„é«˜æ€§èƒ½æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/black-forest-labs/flux-1-schnell&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;dreamshaper-8-lcm&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;DreamShaper 8 LCM&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;å¢å¼ºå›¾åƒçœŸå®æ„Ÿçš„ SD å¾®è°ƒæ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/lykon/dreamshaper-8-lcm&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-xl-lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion XL Lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;æ›´åŠ é«˜æ•ˆçš„æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/bytedance/stable-diffusion-xl-lightning&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-v1-5-img2img&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion v1.5 å›¾ç”Ÿå›¾&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;å°†è¾“å…¥å›¾åƒé£æ ¼åŒ–æˆ–å˜æ¢ï¼ˆéœ€è¦æä¾›å›¾åƒURLï¼‰&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/runwayml/stable-diffusion-v1-5-img2img&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Stable Diffusion v1.5 å±€éƒ¨é‡ç»˜&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;æ ¹æ®é®ç½©å¯¹å±€éƒ¨åŒºåŸŸè¿›è¡Œé‡ç»˜ï¼ˆéœ€è¦å›¾åƒURLï¼Œå¯é€‰é®ç½©URLï¼‰&#x27;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;@cf/runwayml/stable-diffusion-v1-5-inpainting&#x27;</span>,</span><br><span class="line">    <span class="attr">requiresImage</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">requiresMask</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Random prompts list</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">RANDOM_PROMPTS</span> = [</span><br><span class="line">  <span class="string">&#x27;cyberpunk cat samurai graphic art, blood splattered, beautiful colors&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;1girl, solo, outdoors, camping, night, mountains, nature, stars, moon, tent, twin ponytails, green eyes, cheerful, happy, backpack, sleeping bag, camping stove, water bottle, mountain boots, gloves, sweater, hat, flashlight,forest, rocks, river, wood, smoke, shadows, contrast, clear sky, constellations, Milky Way&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;masterpiece, best quality, amazing quality, very aesthetic, high resolution, ultra-detailed, absurdres, newest, scenery, anime, anime coloring, (dappled sunlight:1.2), rim light, backlit, dramatic shadow, 1girl, long blonde hair, blue eyes, shiny eyes, parted lips, medium breasts, puffy sleeve white dress, forest, flowers, white butterfly, looking at viewer&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;frost_glass, masterpiece, best quality, absurdres, cute girl wearing red Christmas dress, holding small reindeer, hug, braided ponytail, sidelocks, hairclip, hair ornaments, green eyes, (snowy forest, moonlight, Christmas trees), (sparkles, sparkling clothes), frosted, snow, aurora, moon, night, sharp focus, highly detailed, abstract, flowing&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;1girl, hatsune miku, white pupils, power elements, microphone, vibrant blue color palette, abstract,abstract background, dreamlike atmosphere, delicate linework, wind-swept hair, energy, masterpiece, best quality, amazing quality&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;cyberpunk cat(neon lights:1.3) clutter,ultra detailed, ctrash, chaotic, low light, contrast, dark, rain ,at night ,cinematic , dystopic, broken ground, tunnels, skyscrapers&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;Cyberpunk catgirl with purple hair, wearing leather and latex outfit with pink and purple cheetah print, holding a hand gun, black latex brassiere, glowing blue eyes with purple tech sunglasses, tail, large breasts, glowing techwear clothes, handguns, black leather jacket, tight shiny leather pants, cyberpunk alley background, Cyb3rWar3, Cyberware&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;a wide aerial view of a floating elven city in the sky, with two elven figures walking side by side across a glowing skybridge, the bridge arching between tall crystal towers, surrounded by clouds and golden light, majestic and serene atmosphere, vivid style, magical fantasy architecture&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;masterpiece, newest, absurdres,incredibly absurdres, best quality, amazing quality, very aesthetic, 1girl, very long hair, blonde, multi-tied hair, center-flap bangs, sunset, cumulonimbus cloud, old tree,sitting in tree, dark blue track suit, adidas, simple bird&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;beautiful girl, breasts, curvy, looking down scope, looking away from viewer, laying on the ground, laying ontop of jacket, aiming a sniper rifle, dark braided hair, backwards hat, armor, sleeveless, arm sleeve tattoos, muscle tone, dogtags, sweaty, foreshortening, depth of field, at night, night, alpine, lightly snowing, dusting of snow, Closeup, detailed face, freckles&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Passwords for authentication</span></span><br><span class="line"><span class="comment">// demo: const PASSWORDS = [&#x27;P@ssw0rd&#x27;]</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PASSWORDS</span> = [<span class="string">&#x27;admin123&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">request, env</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> originalHost = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;host&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// CORS Headers</span></span><br><span class="line">    <span class="keyword">const</span> corsHeaders = &#123;</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, OPTIONS&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;Content-Type&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: corsHeaders</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">      <span class="keyword">const</span> path = url.<span class="property">pathname</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// process api requests</span></span><br><span class="line">      <span class="keyword">if</span> (path === <span class="string">&#x27;/api/models&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// get available models list</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable constant_">AVAILABLE_MODELS</span>), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/prompts&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// get random prompts list</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable constant_">RANDOM_PROMPTS</span>), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/config&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// expose minimal config to client</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">require_password</span>: <span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> &gt; <span class="number">0</span> &#125;), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">&#x27;/api/auth&#x27;</span> &amp;&amp; request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// perform password authentication and set cookie</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">json</span>().<span class="title function_">catch</span>(<span class="function">() =&gt;</span> (&#123;&#125;));</span><br><span class="line">        <span class="keyword">const</span> ok = <span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> === <span class="number">0</span> ? <span class="literal">true</span> : (data &amp;&amp; <span class="keyword">typeof</span> data.<span class="property">password</span> === <span class="string">&#x27;string&#x27;</span> &amp;&amp; <span class="variable constant_">PASSWORDS</span>.<span class="title function_">includes</span>(data.<span class="property">password</span>));</span><br><span class="line">        <span class="keyword">if</span> (!ok) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;å¯†ç é”™è¯¯&#x27;</span> &#125;), &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> cookie = <span class="string">`auth=1; Path=/; Max-Age=<span class="subst">$&#123;<span class="number">7</span> * <span class="number">24</span> * <span class="number">3600</span>&#125;</span>; HttpOnly; SameSite=Lax; Secure`</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">success</span>: <span class="literal">true</span> &#125;), &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>, <span class="string">&#x27;Set-Cookie&#x27;</span>: cookie &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// process POST request for image generation</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">json</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Check if password is required and valid (Cookie or request body)</span></span><br><span class="line">        <span class="keyword">const</span> cookieHeader = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cookie&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">const</span> authedByCookie = <span class="regexp">/(?:^|;\s*)auth=1(?:;|$)/</span>.<span class="title function_">test</span>(cookieHeader);</span><br><span class="line">        <span class="keyword">const</span> authedByBody = data &amp;&amp; <span class="keyword">typeof</span> data.<span class="property">password</span> === <span class="string">&#x27;string&#x27;</span> &amp;&amp; <span class="variable constant_">PASSWORDS</span>.<span class="title function_">includes</span>(data.<span class="property">password</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">PASSWORDS</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; !(authedByCookie || authedByBody)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;éœ€è¦æ­£ç¡®çš„è®¿é—®å¯†ç &#x27;</span> &#125;), &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&#x27;prompt&#x27;</span> <span class="keyword">in</span> data &amp;&amp; <span class="string">&#x27;model&#x27;</span> <span class="keyword">in</span> data) &#123;</span><br><span class="line">          <span class="keyword">const</span> selectedModel = <span class="variable constant_">AVAILABLE_MODELS</span>.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === data.<span class="property">model</span>);</span><br><span class="line">          <span class="keyword">if</span> (!selectedModel) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Model is invalid&#x27;</span> &#125;), &#123; </span><br><span class="line">              <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">              <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">const</span> model = selectedModel.<span class="property">key</span>;</span><br><span class="line">          <span class="keyword">let</span> inputs = &#123;&#125;;</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">fetchImageToBytes</span> = <span class="keyword">async</span> (<span class="params">url, label</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">            <span class="keyword">if</span> (!resp.<span class="property">ok</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>è·å–å¤±è´¥ï¼ŒHTTP <span class="subst">$&#123;resp.status&#125;</span>`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> ct = resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (!ct.<span class="title function_">startsWith</span>(<span class="string">&#x27;image/&#x27;</span>)) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>ä¸æ˜¯å›¾ç‰‡èµ„æºï¼Œcontent-type=<span class="subst">$&#123;ct&#125;</span>`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> cl = <span class="built_in">parseInt</span>(resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-length&#x27;</span>) || <span class="string">&#x27;0&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">            <span class="comment">// è®¾å®š 10MB ä¸Šé™ï¼Œé¿å…å¤§æ–‡ä»¶è§¦å‘å†…éƒ¨é”™è¯¯</span></span><br><span class="line">            <span class="keyword">if</span> (cl &amp;&amp; cl &gt; <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="string">`<span class="subst">$&#123;label&#125;</span>ä½“ç§¯è¿‡å¤§(<span class="subst">$&#123;(cl/<span class="number">1024</span>/<span class="number">1024</span>).toFixed(<span class="number">2</span>)&#125;</span>MB)ï¼Œè¯·ä¸è¶…è¿‡10MB`</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="keyword">await</span> resp.<span class="title function_">arrayBuffer</span>());</span><br><span class="line">            <span class="keyword">return</span> &#123; bytes, <span class="attr">contentType</span>: ct, <span class="attr">size</span>: bytes.<span class="property">length</span> &#125;;</span><br><span class="line">          &#125;;</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">clamp</span> = (<span class="params">val, min, max</span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">max</span>(min, <span class="title class_">Math</span>.<span class="title function_">min</span>(max, val));</span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">sanitizeDimension</span> = (<span class="params">val, def = <span class="number">512</span></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> v = <span class="keyword">typeof</span> val === <span class="string">&#x27;number&#x27;</span> ? val : def;</span><br><span class="line">            v = <span class="title function_">clamp</span>(v, <span class="number">256</span>, <span class="number">2048</span>);</span><br><span class="line">            <span class="comment">// å››èˆäº”å…¥åˆ°æœ€è¿‘çš„64å€æ•°</span></span><br><span class="line">            v = <span class="title class_">Math</span>.<span class="title function_">round</span>(v / <span class="number">64</span>) * <span class="number">64</span>;</span><br><span class="line">            <span class="keyword">return</span> v;</span><br><span class="line">          &#125;;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// Input parameter processing</span></span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> steps = data.<span class="property">num_steps</span> || <span class="number">6</span>;</span><br><span class="line">            <span class="keyword">if</span> (steps &gt;= <span class="number">8</span>) steps = <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (steps &lt;= <span class="number">4</span>) steps = <span class="number">4</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Only prompt and steps</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">steps</span>: steps</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">            data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-img2img&#x27;</span> ||</span><br><span class="line">            data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span></span><br><span class="line">          ) &#123;</span><br><span class="line">            <span class="comment">// å›¾ç”Ÿå›¾ / å±€éƒ¨é‡ç»˜éœ€è¦å›¾åƒURL</span></span><br><span class="line">            <span class="keyword">if</span> (!data.<span class="property">image_url</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾› image_url å‚æ•°ï¼ˆè¾“å…¥å›¾åƒ URLï¼‰&#x27;</span> &#125;), &#123;</span><br><span class="line">                <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‹‰å–è¾“å…¥å›¾åƒ/é®ç½©ä¸ºäºŒè¿›åˆ¶å¹¶æ ¡éªŒ</span></span><br><span class="line">            <span class="keyword">const</span> imageResult = <span class="keyword">await</span> <span class="title function_">fetchImageToBytes</span>(data.<span class="property">image_url</span>, <span class="string">&#x27;è¾“å…¥å›¾åƒ&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (imageResult.<span class="property">error</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: imageResult.<span class="property">error</span> &#125;), &#123;</span><br><span class="line">                <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> maskBytes = <span class="literal">undefined</span>;</span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;stable-diffusion-v1-5-inpainting&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (!data.<span class="property">mask_url</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾› mask_url å‚æ•°ï¼ˆé®ç½©å›¾åƒ URLï¼‰&#x27;</span> &#125;), &#123;</span><br><span class="line">                  <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">const</span> maskResult = <span class="keyword">await</span> <span class="title function_">fetchImageToBytes</span>(data.<span class="property">mask_url</span>, <span class="string">&#x27;é®ç½©å›¾åƒ&#x27;</span>);</span><br><span class="line">              <span class="keyword">if</span> (maskResult.<span class="property">error</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: maskResult.<span class="property">error</span> &#125;), &#123;</span><br><span class="line">                  <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">              maskBytes = maskResult.<span class="property">bytes</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…¼å®¹ä¸€äº›æ¨¡å‹å¯¹å­—æ®µå‘½åçš„è¦æ±‚ï¼šæœ‰çš„éœ€è¦ mask_image</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">negative_prompt</span>: data.<span class="property">negative_prompt</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              <span class="comment">// å»ºè®®ä½¿ç”¨æ›´å°çš„åˆ†è¾¨ç‡ï¼Œé¿å… 3001 å†…éƒ¨é”™è¯¯</span></span><br><span class="line">              <span class="attr">height</span>: <span class="title function_">sanitizeDimension</span>(<span class="built_in">parseInt</span>(data.<span class="property">height</span>, <span class="number">10</span>) || <span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">              <span class="attr">width</span>: <span class="title function_">sanitizeDimension</span>(<span class="built_in">parseInt</span>(data.<span class="property">width</span>, <span class="number">10</span>) || <span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">              <span class="attr">num_steps</span>: <span class="title function_">clamp</span>(<span class="built_in">parseInt</span>(data.<span class="property">num_steps</span>, <span class="number">10</span>) || <span class="number">20</span>, <span class="number">1</span>, <span class="number">50</span>),</span><br><span class="line">              <span class="attr">strength</span>: <span class="title function_">clamp</span>(<span class="built_in">parseFloat</span>(data.<span class="property">strength</span> ?? <span class="number">0.8</span>), <span class="number">0.0</span>, <span class="number">1.0</span>),</span><br><span class="line">              <span class="attr">guidance</span>: <span class="title function_">clamp</span>(<span class="built_in">parseFloat</span>(data.<span class="property">guidance</span> ?? <span class="number">7.5</span>), <span class="number">0.0</span>, <span class="number">30.0</span>),</span><br><span class="line">              <span class="attr">seed</span>: data.<span class="property">seed</span> || <span class="built_in">parseInt</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1024</span> * <span class="number">1024</span>).<span class="title function_">toString</span>(), <span class="number">10</span>),</span><br><span class="line">              <span class="attr">image</span>: [...imageResult.<span class="property">bytes</span>],</span><br><span class="line">              ...(maskBytes ? &#123; <span class="attr">mask</span>: [...maskBytes], <span class="attr">mask_image</span>: [...maskBytes] &#125; : &#123;&#125;)</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Default input parameters</span></span><br><span class="line">            inputs = &#123;</span><br><span class="line">              <span class="attr">prompt</span>: data.<span class="property">prompt</span> || <span class="string">&#x27;cyberpunk cat&#x27;</span>,</span><br><span class="line">              <span class="attr">negative_prompt</span>: data.<span class="property">negative_prompt</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              <span class="attr">height</span>: data.<span class="property">height</span> || <span class="number">1024</span>,</span><br><span class="line">              <span class="attr">width</span>: data.<span class="property">width</span> || <span class="number">1024</span>,</span><br><span class="line">              <span class="attr">num_steps</span>: data.<span class="property">num_steps</span> || <span class="number">20</span>,</span><br><span class="line">              <span class="attr">strength</span>: data.<span class="property">strength</span> || <span class="number">0.1</span>,</span><br><span class="line">              <span class="attr">guidance</span>: data.<span class="property">guidance</span> || <span class="number">7.5</span>,</span><br><span class="line">              <span class="attr">seed</span>: data.<span class="property">seed</span> || <span class="built_in">parseInt</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1024</span> * <span class="number">1024</span>).<span class="title function_">toString</span>(), <span class="number">10</span>),</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Generating image with <span class="subst">$&#123;model&#125;</span> and prompt: <span class="subst">$&#123;inputs.prompt.substring(<span class="number">0</span>, <span class="number">50</span>)&#125;</span>...`</span>);</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> numOutputs = <span class="title function_">clamp</span>(<span class="built_in">parseInt</span>(data.<span class="property">num_outputs</span>, <span class="number">10</span>) || <span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">generateOnce</span> = <span class="keyword">async</span> (<span class="params">seedOffset = <span class="number">0</span></span>) =&gt; &#123;</span><br><span class="line">              <span class="keyword">const</span> localInputs = &#123; ...inputs &#125;;</span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> localInputs.<span class="property">seed</span> === <span class="string">&#x27;number&#x27;</span>) localInputs.<span class="property">seed</span> = localInputs.<span class="property">seed</span> + seedOffset;</span><br><span class="line">              <span class="keyword">const</span> t0 = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">              <span class="keyword">const</span> res = <span class="keyword">await</span> env.<span class="property">AI</span>.<span class="title function_">run</span>(model, localInputs);</span><br><span class="line">              <span class="keyword">const</span> t1 = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">              <span class="keyword">return</span> &#123; res, <span class="attr">seconds</span>: (t1 - t0) / <span class="number">1000</span> &#125;;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// helper: convert bytes to base64</span></span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">bytesToBase64</span> = (<span class="params">bytes</span>) =&gt; &#123;</span><br><span class="line">              <span class="keyword">let</span> binary = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">              <span class="keyword">const</span> chunk = <span class="number">0x8000</span>;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytes.<span class="property">length</span>; i += chunk) &#123;</span><br><span class="line">                <span class="keyword">const</span> sub = bytes.<span class="title function_">subarray</span>(i, i + chunk);</span><br><span class="line">                binary += <span class="title class_">String</span>.<span class="property">fromCharCode</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, sub);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="title function_">btoa</span>(binary);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (numOutputs &gt; <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="keyword">const</span> tasks = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: numOutputs &#125;, <span class="function">(<span class="params">_, i</span>) =&gt;</span> <span class="title function_">generateOnce</span>(i));</span><br><span class="line">              <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(tasks);</span><br><span class="line">              <span class="keyword">const</span> secondsAvg = results.<span class="title function_">reduce</span>(<span class="function">(<span class="params">s, r</span>) =&gt;</span> s + r.<span class="property">seconds</span>, <span class="number">0</span>) / results.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">const</span> images = [];</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">const</span> &#123; res &#125; <span class="keyword">of</span> results) &#123;</span><br><span class="line">                <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">                  <span class="keyword">const</span> json = <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> ? res : <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res);</span><br><span class="line">                  <span class="keyword">if</span> (!json.<span class="property">image</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Invalid response from FLUX: missing image&#x27;</span>);</span><br><span class="line">                  images.<span class="title function_">push</span>(<span class="string">`data:image/png;base64,<span class="subst">$&#123;json.image&#125;</span>`</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="comment">// binary bytes -&gt; base64</span></span><br><span class="line">                  <span class="keyword">let</span> bytes;</span><br><span class="line">                  <span class="keyword">if</span> (res <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span>) bytes = res;</span><br><span class="line">                  <span class="keyword">else</span> <span class="keyword">if</span> (res &amp;&amp; <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> res.<span class="property">byteLength</span> === <span class="string">&#x27;number&#x27;</span>) bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(res);</span><br><span class="line">                  <span class="keyword">else</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(res).<span class="title function_">arrayBuffer</span>());</span><br><span class="line">                  images.<span class="title function_">push</span>(<span class="string">`data:image/png;base64,<span class="subst">$&#123;bytesToBase64(bytes)&#125;</span>`</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; images &#125;), &#123;</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                  ...corsHeaders,</span><br><span class="line">                  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                  <span class="string">&#x27;X-Server-Seconds&#x27;</span>: secondsAvg.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">res</span>: response, <span class="attr">seconds</span>: serverSeconds &#125; = <span class="keyword">await</span> <span class="title function_">generateOnce</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">            <span class="comment">// Processing the response of the flux-1-schnell model</span></span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">model</span> === <span class="string">&#x27;flux-1-schnell&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">let</span> jsonResponse;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">typeof</span> response === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                jsonResponse = response;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  jsonResponse = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(response);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to parse JSON response:&#x27;</span>, e);</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                    <span class="attr">error</span>: <span class="string">&#x27;Failed to parse response&#x27;</span>,</span><br><span class="line">                    <span class="attr">details</span>: e.<span class="property">message</span></span><br><span class="line">                  &#125;), &#123; </span><br><span class="line">                    <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                    <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">if</span> (!jsonResponse.<span class="property">image</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                  <span class="attr">error</span>: <span class="string">&#x27;Invalid response format&#x27;</span>,</span><br><span class="line">                  <span class="attr">details</span>: <span class="string">&#x27;Image data not found in response&#x27;</span></span><br><span class="line">                &#125;), &#123; </span><br><span class="line">                  <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">              <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// Convert from base64 to binary data</span></span><br><span class="line">                <span class="keyword">const</span> binaryString = <span class="title function_">atob</span>(jsonResponse.<span class="property">image</span>);</span><br><span class="line">                <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(binaryString.<span class="property">length</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; binaryString.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                  bytes[i] = binaryString.<span class="title function_">charCodeAt</span>(i);</span><br><span class="line">                &#125;</span><br><span class="line">  </span><br><span class="line">                <span class="comment">// Returns binary data in PNG format</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(bytes, &#123;</span><br><span class="line">                  <span class="attr">headers</span>: &#123;</span><br><span class="line">                    ...corsHeaders,</span><br><span class="line">                    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                    ...(inputs.<span class="property">seed</span> ? &#123; <span class="string">&#x27;X-Seed&#x27;</span>: <span class="title class_">String</span>(inputs.<span class="property">seed</span>) &#125; : &#123;&#125;),</span><br><span class="line">                    <span class="string">&#x27;X-Image-Bytes&#x27;</span>: <span class="title class_">String</span>(bytes.<span class="property">length</span>),</span><br><span class="line">                    <span class="string">&#x27;X-Server-Seconds&#x27;</span>: serverSeconds.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to convert base64 to binary:&#x27;</span>, e);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">                  <span class="attr">error</span>: <span class="string">&#x27;Failed to process image data&#x27;</span>,</span><br><span class="line">                  <span class="attr">details</span>: e.<span class="property">message</span></span><br><span class="line">                &#125;), &#123; </span><br><span class="line">                  <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">                  <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Return the response directly (binary)</span></span><br><span class="line">                <span class="keyword">let</span> imageByteSize = <span class="literal">undefined</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  <span class="keyword">if</span> (response &amp;&amp; <span class="keyword">typeof</span> response === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (response <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span>) imageByteSize = response.<span class="property">length</span>;</span><br><span class="line">                    <span class="comment">// ArrayBuffer has byteLength</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> response.<span class="property">byteLength</span> === <span class="string">&#x27;number&#x27;</span>) imageByteSize = response.<span class="property">byteLength</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (_) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(response, &#123;</span><br><span class="line">                  <span class="attr">headers</span>: &#123;</span><br><span class="line">                    ...corsHeaders,</span><br><span class="line">                    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;X-Used-Model&#x27;</span>: selectedModel.<span class="property">id</span>,</span><br><span class="line">                    ...(inputs.<span class="property">seed</span> ? &#123; <span class="string">&#x27;X-Seed&#x27;</span>: <span class="title class_">String</span>(inputs.<span class="property">seed</span>) &#125; : &#123;&#125;),</span><br><span class="line">                    ...(imageByteSize ? &#123; <span class="string">&#x27;X-Image-Bytes&#x27;</span>: <span class="title class_">String</span>(imageByteSize) &#125; : &#123;&#125;),</span><br><span class="line">                    <span class="string">&#x27;X-Server-Seconds&#x27;</span>: serverSeconds.<span class="title function_">toFixed</span>(<span class="number">3</span>),</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (aiError) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;AI generation error:&#x27;</span>, aiError);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; </span><br><span class="line">              <span class="attr">error</span>: <span class="string">&#x27;Image generation failed&#x27;</span>,</span><br><span class="line">              <span class="attr">details</span>: aiError &amp;&amp; (aiError.<span class="property">message</span> || aiError.<span class="title function_">toString</span>()),</span><br><span class="line">              <span class="attr">model</span>: selectedModel.<span class="property">id</span></span><br><span class="line">            &#125;), &#123; </span><br><span class="line">              <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">              <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Missing required parameter: prompt or model&#x27;</span> &#125;), &#123; </span><br><span class="line">            <span class="attr">status</span>: <span class="number">400</span>, </span><br><span class="line">            <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125; </span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (path.<span class="title function_">endsWith</span>(<span class="string">&#x27;.html&#x27;</span>) || path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// redirect to index.html for HTML requests</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">HTML</span>.<span class="title function_">replace</span>(<span class="regexp">/&#123;&#123;host&#125;&#125;/g</span>, originalHost), &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Not Found&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">404</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Worker error:&#x27;</span>, error);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal server error&#x27;</span>, <span class="attr">details</span>: error.<span class="property">message</span> &#125;), &#123; </span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
    </details>

<ol start="5">
<li><p><strong>è®¾ç½®è®¿é—®å¯†ç </strong>ï¼š</p>
<ul>
<li>åœ¨ <code>worker.js</code> ä¸­æ‰¾åˆ°ä»¥ä¸‹ä½ç½®ï¼ˆçº¦ç¬¬ 75 è¡Œï¼‰ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ğŸ’¡ æç¤ºï¼šåœ¨ä¸‹é¢è¿™è¡Œä¿®æ”¹ä½ çš„è®¿é—®å¯†ç </span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PASSWORDS</span> = [<span class="string">&#x27;admin123&#x27;</span>]; </span><br></pre></td></tr></table></figure>
<ul>
<li><strong>å…³é”®æ­¥éª¤ï¼š</strong> å°† <code>&#39;admin123&#39;</code> æ›¿æ¢ä¸ºä½ è‡ªå®šä¹‰çš„å¯†ç ï¼Œé˜²æ­¢ä»–äººæ»¥ç”¨ä½ çš„ç®—åŠ›é¢åº¦ã€‚ï¼ˆæ³¨æ„ä¿ç•™å•å¼•å·ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>æ·»åŠ å‰ç«¯ç•Œé¢ (<code>index.html</code>)</strong>ï¼š</p>
<ul>
<li>åœ¨ Workers ç¼–è¾‘å™¨å·¦ä¾§æ–‡ä»¶æ ï¼Œç‚¹å‡» â€œ+â€ æˆ–å³é”®ç‚¹å‡» <strong>â€œNew Fileâ€</strong>ã€‚</li>
<li>æ–‡ä»¶åï¼šåŠ¡å¿…å¡«å…¥ <code>index.html</code>ï¼ˆå…¨å°å†™ï¼‰ã€‚</li>
<li><a href="https://github.com/gl33332/138gl-ai/blob/main/index.html">ğŸ”— ç‚¹å‡»æ­¤å¤„è·³è½¬ GitHub å¤åˆ¶ </a>ï¼Œæˆ–è€…å±•å¼€ä¸‹æ–¹ä»£ç å—å¤åˆ¶ï¼š</li>
</ul>
</li>
</ol>
<details>
<summary>ğŸ“„ ç‚¹å‡»å±•å¼€ index.html å®Œæ•´ä»£ç </summary>
    <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span> <span class="attr">class</span>=<span class="string">&quot;light&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŸºäº CloudFlare çš„åœ¨çº¿æ–‡ç”Ÿå›¾æœåŠ¡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/huarzone/Text2img-Cloudflare-Workers@main/public/favicon.ico&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-pseudo">:root</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary</span>: <span class="number">#5046e5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-light</span>: <span class="number">#6e67eb</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-dark</span>: <span class="number">#4338ca</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--secondary</span>: <span class="number">#f0f4f8</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text</span>: <span class="number">#1a202c</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text-light</span>: <span class="number">#4a5568</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--background</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--card-bg</span>: <span class="number">#f7fafc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--border</span>: <span class="number">#e2e8f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--success</span>: <span class="number">#10b981</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--error</span>: <span class="number">#ef4444</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--warning</span>: <span class="number">#f59e0b</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--info</span>: <span class="number">#3b82f6</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.dark</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary</span>: <span class="number">#6e67eb</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-light</span>: <span class="number">#8a84ee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--primary-dark</span>: <span class="number">#5046e5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--secondary</span>: <span class="number">#2d3748</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text</span>: <span class="number">#f7fafc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--text-light</span>: <span class="number">#cbd5e0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--background</span>: <span class="number">#111827</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--card-bg</span>: <span class="number">#1f2937</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--border</span>: <span class="number">#374151</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--success</span>: <span class="number">#10b981</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--error</span>: <span class="number">#ef4444</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--warning</span>: <span class="number">#f59e0b</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attr">--info</span>: <span class="number">#3b82f6</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease, color <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&quot;Segoe UI&quot;</span>, Roboto, Helvetica, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.375rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary-light);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.06</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-primary</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary-dark);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--secondary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1px</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> -<span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.06</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn-secondary</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">15px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> -<span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span>, <span class="selector-tag">select</span>, <span class="selector-tag">textarea</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.375rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>, <span class="selector-tag">select</span><span class="selector-pseudo">:focus</span>, <span class="selector-tag">textarea</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-color</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span> &#123;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-webkit-slider-thumb &#123;</span></span><br><span class="line"><span class="language-css">            -webkit-<span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">appearance</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-webkit-slider-thumb:hover &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-moz-range-thumb &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">var</span>(--primary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.slider</span>::-moz-range-thumb:hover &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">80</span>, <span class="number">70</span>, <span class="number">229</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.animate-pulse</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: pulse <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.4</span>, <span class="number">0</span>, <span class="number">0.6</span>, <span class="number">1</span>) infinite;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> pulse &#123;</span></span><br><span class="line"><span class="language-css">            <span class="number">0%</span>, <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="number">50%</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">opacity</span>: .<span class="number">5</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loading-mask</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">10</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">4px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.image-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">aspect-ratio</span>: <span class="number">1</span> / <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-height</span>: <span class="number">400px</span>; <span class="comment">/* æ·»åŠ æœ€å¤§é«˜åº¦é™åˆ¶ */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* å±…ä¸­æ˜¾ç¤º */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>; <span class="comment">/* ä¿æŒå®½åº¦å“åº”å¼ */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#imageStatus</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">20</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.25rem</span> <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">9999px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.param-badge</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--secondary);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0.25rem</span> <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0.25rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.fade-in</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">animation</span>: fadeIn <span class="number">0.5s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@keyframes</span> fadeIn &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">from</span> &#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">to</span> &#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">visibility</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--card-bg);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">var</span>(--text);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">125%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: opacity <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--border);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">0.75rem</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tooltip</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">visibility</span>: visible;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.mobile-flex-col</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding-left</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding-right</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.image-container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">max-height</span>: <span class="number">400px</span>; <span class="comment">/* ç§»åŠ¨ç«¯é€‚å½“å‡å°æœ€å¤§é«˜åº¦ */</span></span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1024px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;min-h-screen py-4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container mx-auto px-4 py-4 max-w-6xl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center justify-between mb-6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;text-2xl md:text-3xl font-bold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                ğŸ³<span class="symbol">&amp;nbsp;</span>åœ¨çº¿æ–‡ç”Ÿå›¾æœåŠ¡</span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center space-x-2&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;themeToggle&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary p-2 h-10 w-10 flex items-center justify-center&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;åˆ‡æ¢æš—è‰²ä¸»é¢˜&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-moon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;github&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary p-2 h-10 w-10 flex items-center justify-center&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;é¡¹ç›®åœ°å€&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.open(&#x27;https://github.com/huarzone/Text2img-Cloudflare-Workers&#x27;, &#x27;_blank&#x27;)&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-brands fa-github&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex flex-col lg:flex-row gap-6 mobile-flex-col&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å·¦ä¾§æ§åˆ¶é¢æ¿ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full lg:w-2/5 space-y-4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-sliders mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            åŸºæœ¬è®¾ç½®</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;randomButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-dice mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> éšæœºæç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-key mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è®¿é—®å¯†ç </span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥è®¿é—®å¯†ç &quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin123&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;prompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-wand-magic-sparkles mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ­£å‘æç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;prompt&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;æè¿°æ‚¨æƒ³è¦ç”Ÿæˆçš„å›¾åƒå†…å®¹åŠæ ·å¼...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span>cyberpunk cat<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;negative_prompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-ban mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> åå‘æç¤ºè¯</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;negative_prompt&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;2&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;æè¿°åœ¨ç”Ÿæˆçš„å›¾åƒä¸­è¦é¿å…çš„å…ƒç´ æ–‡æœ¬...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;model&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-robot mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ–‡ç”Ÿå›¾æ¨¡å‹</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;model&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">disabled</span> <span class="attr">selected</span>&gt;</span>åŠ è½½ä¸­...<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 mt-2&quot;</span>&gt;</span>éƒ¨åˆ†æ¨¡å‹éœ€è¦æä¾›å›¾ç‰‡URLæˆ–é®ç½©URLï¼ˆè§ä¸‹æ–¹è¾“å…¥æ¡†ï¼‰ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;img2imgInputs&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden space-y-2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;image_url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¾“å…¥å›¾åƒURLï¼ˆå¿…å¡«ï¼‰</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;image_url&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;https://example.com/your-image.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mask_url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-mask mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> é®ç½©å›¾åƒURLï¼ˆå¿…å¡«ï¼Œinpainting ä½¿ç”¨ï¼‰</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mask_url&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;https://example.com/your-mask.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-gear mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            é«˜çº§é€‰é¡¹</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;toggleAdvanced&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-xs btn btn-secondary py-1 px-3 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-chevron-down mr-1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;advancedIcon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ˜¾ç¤º/éšè—</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;advancedOptions&quot;</span> <span class="attr">class</span>=<span class="string">&quot;space-y-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;width&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-arrows-left-right mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å›¾åƒå®½åº¦</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;widthValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>1024px<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;width&quot;</span> <span class="attr">min</span>=<span class="string">&quot;256&quot;</span> <span class="attr">max</span>=<span class="string">&quot;2048&quot;</span> <span class="attr">step</span>=<span class="string">&quot;64&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1024&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;height&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-arrows-up-down mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å›¾åƒé«˜åº¦</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;heightValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>1024px<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;height&quot;</span> <span class="attr">min</span>=<span class="string">&quot;256&quot;</span> <span class="attr">max</span>=<span class="string">&quot;2048&quot;</span> <span class="attr">step</span>=<span class="string">&quot;64&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1024&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;num_steps&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-shoe-prints mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¿­ä»£æ­¥æ•°</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>æ›´é«˜çš„æ­¥æ•°é€šå¸¸ä¼šäº§ç”Ÿæ›´ç²¾ç»†çš„ç»†èŠ‚ï¼Œä½†éœ€è¦æ›´é•¿çš„å¤„ç†æ—¶é—´<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;num_stepsValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;num_steps&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;20&quot;</span> <span class="attr">step</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;guidance&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-compass mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å¼•å¯¼ç³»æ•°</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>æ§åˆ¶ç”Ÿæˆå›¾åƒä¸æç¤ºè¯çš„åŒ¹é…ç¨‹åº¦ï¼Œè¾ƒé«˜çš„å€¼ä¼šæ›´ä¸¥æ ¼éµå¾ªæç¤ºè¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;guidanceValue&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-mono&quot;</span>&gt;</span>7.5<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">id</span>=<span class="string">&quot;guidance&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;30&quot;</span> <span class="attr">step</span>=<span class="string">&quot;0.5&quot;</span> <span class="attr">value</span>=<span class="string">&quot;7.5&quot;</span> <span class="attr">class</span>=<span class="string">&quot;slider w-full&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;seed&quot;</span> <span class="attr">class</span>=<span class="string">&quot;block text-sm font-medium mb-1 flex items-center tooltip&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-seedling mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> éšæœºç§å­</span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;tooltiptext&quot;</span>&gt;</span>ä½¿ç”¨ç›¸åŒçš„ç§å­å€¼å¯ä»¥åœ¨å…¶ä»–å‚æ•°ç›¸åŒçš„æƒ…å†µä¸‹ç”Ÿæˆç›¸ä¼¼çš„å›¾åƒ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex gap-2&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;seed&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;éšæœºç§å­å€¼&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;randomSeed&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-random&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 mt-1&quot;</span>&gt;</span>ç•™ç©ºåˆ™éšæœºç”Ÿæˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;submitButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary w-full py-3 flex items-center justify-center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-wand-magic-sparkles mr-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç”Ÿæˆå›¾åƒ</span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- å³ä¾§å›¾åƒå±•ç¤º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full lg:w-3/5&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card h-full p-4 space-y-4 fade-in&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between items-center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-lg font-semibold flex items-center&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image mr-2 text-primary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            ç”Ÿæˆç»“æœ</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex space-x-2&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;copyParamsButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-copy mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> å¤åˆ¶å‚æ•°</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-download mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä¸‹è½½å›¾åƒ</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadZipButton&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-secondary text-sm py-1 px-3 hidden&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-file-zipper mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä¸‹è½½ZIP</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;image-container card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;loadingOverlay&quot;</span> <span class="attr">class</span>=<span class="string">&quot;loading-mask hidden&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center w-full px-6&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-white mt-3 font-medium&quot;</span>&gt;</span>ç”Ÿæˆä¸­ï¼Œè¯·ç¨å€™...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-white text-sm mt-1&quot;</span>&gt;</span>è¿™å¯èƒ½éœ€è¦å‡ ç§’åˆ°å‡ åç§’ä¸ç­‰<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;progressBarContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-full mt-4&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;progressBar&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg-blue-500 h-2.5 rounded-full&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 0%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between text-xs mt-1 text-white&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;progressText&quot;</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;progressExtra&quot;</span>&gt;</span>ä¼°ç®—<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;initialPrompt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-center text-gray-400 dark:text-gray-600&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-image-portrait text-4xl mb-2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹åˆ›å»ºå›¾åƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;imageStatus&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg-gray-300 text-gray-700 hidden&quot;</span>&gt;</span>çŠ¶æ€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;aiImage&quot;</span> <span class="attr">class</span>=<span class="string">&quot;max-h-full max-w-full rounded hidden&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç”Ÿæˆçš„å›¾åƒ&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageGallery&quot;</span> <span class="attr">class</span>=<span class="string">&quot;grid grid-cols-4 gap-2 mt-3 hidden&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageInfo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;space-y-3 mt-2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid grid-cols-2 gap-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-regular fa-clock mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç”Ÿæˆæ—¶é—´ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;generationTime&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-microchip mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ä½¿ç”¨æ¨¡å‹ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;usedModel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-bolt mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç®—åŠ›ä¼°è®¡ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;computeInfo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text-xs text-gray-500 ml-2&quot;</span>&gt;</span>(it/s)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-sm flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font-medium flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-database mr-1 text-xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> è¾“å‡ºå¤§å°ï¼š</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;imageSize&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ml-1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;allParamsContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden mt-3 border-t border-gray-200 dark:border-gray-700 pt-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-medium mb-2 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-list-check mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ‰€æœ‰å‚æ•°</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;allParams&quot;</span> <span class="attr">class</span>=<span class="string">&quot;flex flex-wrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;imageMeta&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden mt-3 border-t border-gray-200 dark:border-gray-700 pt-3&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;text-sm font-medium mb-2 flex items-center&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-table mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ¯å¼ å›¾ç‰‡ä¿¡æ¯</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;w-full text-xs&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;text-left&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>å°ºå¯¸<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">&quot;py-1&quot;</span>&gt;</span>å¤§å°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;imageMetaBody&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åˆå§‹åŒ–æ¨¡å‹åˆ—è¡¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> availableModels = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> randomPromptsList = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> currentImageParams = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> currentImagesArray = <span class="literal">null</span>; <span class="comment">// å¤šå›¾æ—¶çš„ dataURL æ•°ç»„</span></span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åŠ è½½æ¨¡å‹åˆ—è¡¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadModels</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/models&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨å¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    availableModels = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> modelSelect = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ¸…ç©ºå½“å‰é€‰é¡¹</span></span></span><br><span class="line"><span class="language-javascript">                    modelSelect.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ·»åŠ æ–°é€‰é¡¹</span></span></span><br><span class="line"><span class="language-javascript">                    availableModels.<span class="title function_">forEach</span>(<span class="function"><span class="params">model</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> option = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;option&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">value</span> = model.<span class="property">id</span>;</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;model.name&#125;</span> - <span class="subst">$&#123;model.description&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                        option.<span class="property">dataset</span>.<span class="property">requiresImage</span> = model.<span class="property">requiresImage</span> ? <span class="string">&#x27;1&#x27;</span> : <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        modelSelect.<span class="title function_">appendChild</span>(option);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// é»˜è®¤é€‰æ‹©ç¬¬äºŒä¸ªæ¨¡å‹ï¼ˆé€šå¸¸æ˜¯æ›´å¥½çš„æ¨¡å‹ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (availableModels.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        modelSelect.<span class="property">value</span> = availableModels[<span class="number">1</span>].<span class="property">id</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨é”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;åŠ è½½æ¨¡å‹åˆ—è¡¨å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åŠ è½½éšæœºæç¤ºè¯</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadRandomPrompts</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/prompts&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;åŠ è½½æç¤ºè¯å¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    randomPromptsList = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;åŠ è½½æç¤ºè¯é”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    randomPromptsList = [<span class="string">&#x27;æœªèƒ½åŠ è½½æç¤ºè¯åˆ—è¡¨ï¼Œè¯·é‡è¯•æˆ–æ‰‹åŠ¨è¾“å…¥&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åˆå§‹åŒ–åŠ è½½èµ„æº</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadModels</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadRandomPrompts</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç™»å½•</span></span></span><br><span class="line"><span class="language-javascript">            (<span class="title function_">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/config&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> cfg = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (cfg.<span class="property">require_password</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">showLogin</span>();</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)();</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ç›¸å…³ä»£ç </span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> themeToggle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;themeToggle&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> html = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> moonIcon = <span class="string">`&lt;i class=&quot;fa-solid fa-moon&quot;&gt;&lt;/i&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> sunIcon = <span class="string">`&lt;i class=&quot;fa-solid fa-sun&quot;&gt;&lt;/i&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ£€æŸ¥ç³»ç»Ÿä¸»é¢˜æˆ–å­˜å‚¨çš„ä¸»é¢˜å¹¶è®¾ç½®åˆå§‹çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="property">theme</span> === <span class="string">&#x27;dark&#x27;</span> || (!(<span class="string">&#x27;theme&#x27;</span> <span class="keyword">in</span> <span class="variable language_">localStorage</span>) &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(<span class="string">&#x27;(prefers-color-scheme: dark)&#x27;</span>).<span class="property">matches</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                html.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="property">innerHTML</span> = sunIcon;</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢äº®è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                html.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="property">innerHTML</span> = moonIcon;</span></span><br><span class="line"><span class="language-javascript">                themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢æš—è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            themeToggle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (html.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    html.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">localStorage</span>.<span class="property">theme</span> = <span class="string">&#x27;light&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="property">innerHTML</span> = moonIcon;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢æš—è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    html.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">localStorage</span>.<span class="property">theme</span> = <span class="string">&#x27;dark&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="property">innerHTML</span> = sunIcon;</span></span><br><span class="line"><span class="language-javascript">                    themeToggle.<span class="title function_">setAttribute</span>(<span class="string">&#x27;aria-label&#x27;</span>, <span class="string">&#x27;åˆ‡æ¢äº®è‰²ä¸»é¢˜&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é«˜çº§é€‰é¡¹åˆ‡æ¢</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> toggleAdvanced = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;toggleAdvanced&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> advancedOptions = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;advancedOptions&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> advancedIcon = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;advancedIcon&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            toggleAdvanced.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (advancedOptions.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hidden&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    advancedOptions.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;fa-chevron-down&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;fa-chevron-up&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    advancedOptions.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;fa-chevron-up&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    advancedIcon.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;fa-chevron-down&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ¨¡å‹åˆ‡æ¢æ—¶æ˜¾ç¤º/éšè—å›¾ç”Ÿå›¾å­—æ®µ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> modelSelectEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> img2imgInputs = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;img2imgInputs&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (modelSelectEl &amp;&amp; img2imgInputs) &#123;</span></span><br><span class="line"><span class="language-javascript">                modelSelectEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> selected = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === <span class="variable language_">this</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (selected &amp;&amp; selected.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        img2imgInputs.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        img2imgInputs.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ»‘å—å€¼æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> sliders = [<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;num_steps&#x27;</span>, <span class="string">&#x27;guidance&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">            sliders.<span class="title function_">forEach</span>(<span class="function"><span class="params">id</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> slider = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> valueDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">`<span class="subst">$&#123;id&#125;</span>Value`</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                slider.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (id === <span class="string">&#x27;width&#x27;</span> || id === <span class="string">&#x27;height&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span>px`</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (id === <span class="string">&#x27;guidance&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="built_in">parseFloat</span>(<span class="variable language_">this</span>.<span class="property">value</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        valueDisplay.<span class="property">textContent</span> = <span class="variable language_">this</span>.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç”Ÿæˆæ•°é‡æ§ä»¶</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> countContainer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            countContainer.<span class="property">className</span> = <span class="string">&#x27;mt-2&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            countContainer.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;label for=&quot;num_outputs&quot; class=&quot;block text-sm font-medium mb-1 flex items-center&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;i class=&quot;fa-solid fa-layer-group mr-1 text-xs&quot;&gt;&lt;/i&gt; ç”Ÿæˆæ•°é‡</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/label&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;select id=&quot;num_outputs&quot; class=&quot;w-full&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;1&quot; selected&gt;1&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;7&quot;&gt;7&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;option value=&quot;8&quot;&gt;8&lt;/option&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/select&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">            `</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.card.p-4.space-y-4.fade-in&#x27;</span>).<span class="title function_">appendChild</span>(countContainer);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// éšæœºç§å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;randomSeed&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> randomSeed = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4294967295</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;seed&#x27;</span>).<span class="property">value</span> = randomSeed;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// éšæœºæç¤ºè¯</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;randomButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (randomPromptsList.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> randomIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * randomPromptsList.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prompt&#x27;</span>).<span class="property">value</span> = randomPromptsList[randomIndex];</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æç¤ºè¯åˆ—è¡¨æœªåŠ è½½ï¼Œè¯·ç¨åå†è¯•&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å¤åˆ¶å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;copyParamsButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!currentImageParams) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åˆ›å»ºå‚æ•°æ–‡æœ¬</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> paramsText = <span class="string">&#x27;--- AIç»˜å›¾åˆ›ä½œç”Ÿæˆå‚æ•° ---\n&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(currentImageParams)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (key === <span class="string">&#x27;password&#x27;</span>) <span class="keyword">continue</span>; <span class="comment">// ä¸å¤åˆ¶å¯†ç </span></span></span><br><span class="line"><span class="language-javascript">                    paramsText += <span class="string">`<span class="subst">$&#123;formatParamName(key)&#125;</span>: <span class="subst">$&#123;value&#125;</span>\n`</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¤åˆ¶åˆ°å‰ªè´´æ¿</span></span></span><br><span class="line"><span class="language-javascript">                navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(paramsText)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å‚æ•°å·²å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¤åˆ¶å¤±è´¥:&#x27;</span>, err);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å¤åˆ¶å‚æ•°å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ ¼å¼åŒ–å‚æ•°åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">formatParamName</span>(<span class="params">name</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> nameMap = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;prompt&#x27;</span>: <span class="string">&#x27;æ­£å‘æç¤ºè¯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;negative_prompt&#x27;</span>: <span class="string">&#x27;åå‘æç¤ºè¯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;model&#x27;</span>: <span class="string">&#x27;æ–‡ç”Ÿå›¾æ¨¡å‹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;width&#x27;</span>: <span class="string">&#x27;å›¾åƒå®½åº¦&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;height&#x27;</span>: <span class="string">&#x27;å›¾åƒé«˜åº¦&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;num_steps&#x27;</span>: <span class="string">&#x27;è¿­ä»£æ­¥æ•°&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;guidance&#x27;</span>: <span class="string">&#x27;å¼•å¯¼ç³»æ•°&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;seed&#x27;</span>: <span class="string">&#x27;éšæœºç§å­&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> nameMap[name] || name;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸‹è½½å›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aiImage&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> gallery = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageGallery&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> src = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!gallery.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hidden&#x27;</span>) &amp;&amp; currentImagesArray &amp;&amp; currentImagesArray.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    src = currentImagesArray[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    src = img.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!src) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ²¡æœ‰å¯ä¸‹è½½çš„å›¾åƒ&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ä»å›¾åƒæ•°æ®åˆ›å»ºblob</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(src);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> blob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// åˆ›å»ºä¸‹è½½é“¾æ¥</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ç”Ÿæˆæ–‡ä»¶å</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>.png`</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è§¦å‘ä¸‹è½½</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ¸…ç†</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å›¾åƒä¸‹è½½æˆåŠŸ&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ä¸‹è½½å›¾åƒé”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ä¸‹è½½å›¾åƒå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä¸‹è½½ ZIPï¼ˆå¤šå›¾ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadZipButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!currentImagesArray || currentImagesArray.<span class="property">length</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ²¡æœ‰å¯æ‰“åŒ…çš„å›¾ç‰‡&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> zip = <span class="keyword">new</span> <span class="title class_">JSZip</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; currentImagesArray.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> dataURL = currentImagesArray[i];</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> base64 = dataURL.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">                        zip.<span class="title function_">file</span>(<span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>-<span class="subst">$&#123;i+<span class="number">1</span>&#125;</span>.png`</span>, base64, &#123; <span class="attr">base64</span>: <span class="literal">true</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> blob = <span class="keyword">await</span> zip.<span class="title function_">generateAsync</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;blob&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>.zip`</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    link.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ZIP ä¸‹è½½å·²å¼€å§‹&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ZIPæ‰“åŒ…å¤±è´¥:&#x27;</span>, e);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showStatus</span>(<span class="string">&#x27;æ‰“åŒ…ZIPå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æäº¤ç”Ÿæˆè¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å¤ç”¨å…¨å±€çš„è®¡æ—¶å™¨ä¸æ§åˆ¶å™¨ï¼Œé¿å…é—ªçƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> progressTimer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> pendingController = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;submitButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤ºåŠ è½½ä¸­çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> loadingOverlay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loadingOverlay&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> initialPrompt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;initialPrompt&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> aiImage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aiImage&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressBarContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressBarContainer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressBar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressBar&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressText = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressText&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> progressExtra = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progressExtra&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!loadingOverlay || !initialPrompt || !aiImage) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¿…è¦çš„DOMå…ƒç´ æœªæ‰¾åˆ°&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// éšè—åˆå§‹æç¤ºå’Œå›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">                initialPrompt.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                loadingOverlay.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// éšè—ä¹‹å‰çš„æç¤ºå’ŒæŒ‰é’®ï¼Œå¹¶æ¸…ç†ä¸Šä¸€æ¬¡çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> imageStatus = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageStatus&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> copyParamsButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;copyParamsButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> downloadButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (imageStatus) imageStatus.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (copyParamsButton) copyParamsButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (downloadButton) downloadButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (progressTimer) &#123; <span class="built_in">clearInterval</span>(progressTimer); progressTimer = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (pendingController) &#123; <span class="keyword">try</span> &#123; pendingController.<span class="title function_">abort</span>(); &#125; <span class="keyword">catch</span>(_)&#123;&#125; pendingController = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è·å–å‚æ•°ï¼ˆåˆå§‹è‰æ¡ˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> rawParams = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">password</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;password&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">prompt</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prompt&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">negative_prompt</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;negative_prompt&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">model</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;model&#x27;</span>)?.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">width</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;width&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1024</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">height</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;height&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1024</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_steps</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;num_steps&#x27;</span>)?.<span class="property">value</span>) || <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">guidance</span>: <span class="built_in">parseFloat</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;guidance&#x27;</span>)?.<span class="property">value</span>) || <span class="number">7.5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">seed</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;seed&#x27;</span>)?.<span class="property">value</span>) || <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4294967295</span>),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">image_url</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;image_url&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">mask_url</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mask_url&#x27;</span>)?.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_outputs</span>: <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;num_outputs&#x27;</span>)?.<span class="property">value</span>) || <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åŸºäºæ¨¡å‹ç‰¹æ€§ï¼Œæ¸…æ´—å‡ºæœ€ç»ˆè¦å‘é€/å±•ç¤ºçš„å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> selectedModelMeta = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === rawParams.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> params = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">password</span>: rawParams.<span class="property">password</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">prompt</span>: rawParams.<span class="property">prompt</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">negative_prompt</span>: rawParams.<span class="property">negative_prompt</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">model</span>: rawParams.<span class="property">model</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">width</span>: rawParams.<span class="property">width</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">height</span>: rawParams.<span class="property">height</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_steps</span>: rawParams.<span class="property">num_steps</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">guidance</span>: rawParams.<span class="property">guidance</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">seed</span>: rawParams.<span class="property">seed</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num_outputs</span>: rawParams.<span class="property">num_outputs</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta?.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    params.<span class="property">image_url</span> = rawParams.<span class="property">image_url</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta?.<span class="property">requiresMask</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    params.<span class="property">mask_url</span> = rawParams.<span class="property">mask_url</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ä¿å­˜å½“å‰å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                currentImageParams = &#123;...params&#125;;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å‰ç«¯å¿…å¡«æ ¡éªŒï¼ˆä¾æ®æ¨¡å‹å…ƒä¿¡æ¯ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta &amp;&amp; selectedModelMeta.<span class="property">requiresImage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!rawParams.<span class="property">image_url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;è¯¥æ¨¡å‹éœ€è¦æä¾›è¾“å…¥å›¾åƒURL&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (selectedModelMeta &amp;&amp; selectedModelMeta.<span class="property">requiresMask</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!rawParams.<span class="property">mask_url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;å±€éƒ¨é‡ç»˜æ¨¡å‹éœ€è¦æä¾›é®ç½©URL&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// å‘é€è¯·æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// å¯åŠ¨æ‹ŸçœŸè¿›åº¦æ¡</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> progress = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressBarContainer &amp;&amp; progressBar &amp;&amp; progressText) &#123;</span></span><br><span class="line"><span class="language-javascript">                        progressBarContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        progress = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;0%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        progressText.<span class="property">textContent</span> = <span class="string">&#x27;0%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (progressExtra) progressExtra.<span class="property">textContent</span> = <span class="string">&#x27;ä¼°ç®—&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> steps = params.<span class="property">num_steps</span> || <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> baseMs = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">4000</span>, <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">20000</span>, steps * <span class="number">600</span>));</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> startTs = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">                        progressTimer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> elapsed = <span class="title class_">Date</span>.<span class="title function_">now</span>() - startTs;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> ratio = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">0.95</span>, elapsed / baseMs); <span class="comment">// æœ€é«˜åˆ°95%ï¼Œç­‰å¾…çœŸå®å®Œæˆå†å°é¡¶</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> cur = <span class="title class_">Math</span>.<span class="title function_">floor</span>(ratio * <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (cur &gt; progress) &#123;</span></span><br><span class="line"><span class="language-javascript">                                progress = cur;</span></span><br><span class="line"><span class="language-javascript">                                progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">                                progressText.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;, <span class="number">150</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 60ç§’è¶…æ—¶æ§åˆ¶</span></span></span><br><span class="line"><span class="language-javascript">                    pendingController = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> pendingController &amp;&amp; pendingController.<span class="title function_">abort</span>(<span class="string">&#x27;timeout&#x27;</span>), <span class="number">60000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;image/*&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(params),</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">signal</span>: pendingController.<span class="property">signal</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearTimeout</span>(timeoutId);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> contentType = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (contentType?.<span class="title function_">includes</span>(<span class="string">&#x27;application/json&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> errorData = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> msg = errorData.<span class="property">error</span> || errorData.<span class="property">message</span> || <span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> details = errorData.<span class="property">details</span> ? <span class="string">`ï¼ˆ<span class="subst">$&#123;errorData.details&#125;</span>ï¼‰`</span> : <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;msg&#125;</span><span class="subst">$&#123;details&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> errorText = <span class="keyword">await</span> response.<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æœåŠ¡å™¨é”™è¯¯:&#x27;</span>, errorText);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> respType = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> serverSecondsHeader = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Server-Seconds&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> serverSeconds = serverSecondsHeader ? <span class="built_in">parseFloat</span>(serverSecondsHeader) : <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> base64Image = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> imageBlob = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> imagesArray = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (respType.<span class="title function_">includes</span>(<span class="string">&#x27;application/json&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(json.<span class="property">images</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                            imagesArray = json.<span class="property">images</span>;</span></span><br><span class="line"><span class="language-javascript">                            base64Image = imagesArray[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;å“åº”æ ¼å¼é”™è¯¯&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        imageBlob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                        base64Image = <span class="keyword">await</span> <span class="title function_">blobToBase64</span>(imageBlob);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> endTime = performance.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> generationTime = ((endTime - startTime) / <span class="number">1000</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è®¾ç½®å›¾åƒä¿¡æ¯å¹¶æ˜¾ç¤ºå›¾åƒ</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> gallery = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageGallery&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    gallery.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        gallery.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        currentImagesArray = imagesArray.<span class="title function_">slice</span>();</span></span><br><span class="line"><span class="language-javascript">                        imagesArray.<span class="title function_">forEach</span>(<span class="function">(<span class="params">src, idx</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> wrap = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="property">className</span> = <span class="string">&#x27;relative group&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">src</span> = src;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">alt</span> = <span class="string">`ç”Ÿæˆçš„å›¾åƒ <span class="subst">$&#123;idx+<span class="number">1</span>&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">className</span> = <span class="string">&#x27;w-full h-auto rounded&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;zoom-in&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> <span class="title function_">openImageModal</span>(src));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// æ‚¬æµ®æ“ä½œæ¡</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> bar = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="property">className</span> = <span class="string">&#x27;absolute bottom-1 left-1 right-1 hidden group-hover:flex bg-black bg-opacity-50 text-white text-xs rounded px-1 py-0.5 gap-1 justify-center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnZoom = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-magnifying-glass-plus&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">title</span> = <span class="string">&#x27;æ”¾å¤§&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnZoom.<span class="property">onclick</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; e.<span class="title function_">stopPropagation</span>(); <span class="title function_">openImageModal</span>(src); &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnCopy = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-copy&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">title</span> = <span class="string">&#x27;å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnCopy.<span class="property">onclick</span> = <span class="title function_">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                                e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">await</span> navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;å¤åˆ¶å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btnDl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fa-solid fa-download&quot;&gt;&lt;/i&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">title</span> = <span class="string">&#x27;ä¸‹è½½æ­¤å›¾&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            btnDl.<span class="property">onclick</span> = <span class="title function_">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                                e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> blob = <span class="keyword">await</span> response.<span class="title function_">blob</span>();</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> model = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>).<span class="property">textContent</span> || <span class="string">&#x27;ai-image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>().<span class="title function_">replace</span>(<span class="regexp">/[:.]/g</span>, <span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    link.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">                                    link.<span class="property">download</span> = <span class="string">`<span class="subst">$&#123;model&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span>-<span class="subst">$&#123;idx+<span class="number">1</span>&#125;</span>.png`</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link); link.<span class="title function_">click</span>(); <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">                                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">showStatus</span>(<span class="string">&#x27;ä¸‹è½½å¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnZoom);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnCopy);</span></span><br><span class="line"><span class="language-javascript">                            bar.<span class="title function_">appendChild</span>(btnDl);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="title function_">appendChild</span>(img);</span></span><br><span class="line"><span class="language-javascript">                            wrap.<span class="title function_">appendChild</span>(bar);</span></span><br><span class="line"><span class="language-javascript">                            gallery.<span class="title function_">appendChild</span>(wrap);</span></span><br><span class="line"><span class="language-javascript">                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        gallery.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        currentImagesArray = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">src</span> = base64Image;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// ç»Ÿä¸€çš„UIå®Œæˆé€»è¾‘ï¼ˆä¸ä¾èµ– onload ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> <span class="title function_">finalize</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å›¾åƒåŠ è½½å®Œæˆåæ›´æ–°UI</span></span></span><br><span class="line"><span class="language-javascript">                        loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!imagesArray || imagesArray.<span class="property">length</span> &lt;= <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            aiImage.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å®‰å…¨åœ°æ›´æ–°ä¿¡æ¯æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> elements = &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">generationTime</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;generationTime&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">usedModel</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;usedModel&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">computeInfo</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;computeInfo&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">imageSize</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageSize&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">generationTime</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">generationTime</span>.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;generationTime&#125;</span>ç§’`</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">usedModel</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">usedModel</span>.<span class="property">textContent</span> = <span class="title function_">getModelNameById</span>(params.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// ä»å“åº”å¤´æå–ä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> usedModelHeader = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Used-Model&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> usedModelName = usedModelHeader ? <span class="title function_">getModelNameById</span>(usedModelHeader) : <span class="title function_">getModelNameById</span>(params.<span class="property">model</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">usedModel</span>) elements.<span class="property">usedModel</span>.<span class="property">textContent</span> = usedModelName;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> bytesStr = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;X-Image-Bytes&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">imageSize</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (bytesStr) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> bytes = <span class="built_in">parseInt</span>(bytesStr, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(bytes);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (imageBlob) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="comment">// å›é€€ï¼šç”¨blobå¤§å°</span></span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(imageBlob.<span class="property">size</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray[<span class="number">0</span>]) &#123;</span></span><br><span class="line"><span class="language-javascript">                                elements.<span class="property">imageSize</span>.<span class="property">textContent</span> = <span class="title function_">formatBytes</span>(<span class="title function_">dataURLBytes</span>(imagesArray[<span class="number">0</span>]));</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// è®¡ç®—çœŸå® it/sï¼šè¿­ä»£æ­¥æ•° / å®é™…è€—æ—¶</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> itPerSec = (<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> steps = <span class="title class_">Number</span>(params.<span class="property">num_steps</span>) || <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> seconds = serverSeconds &amp;&amp; serverSeconds &gt; <span class="number">0</span> ? serverSeconds : (<span class="built_in">parseFloat</span>(generationTime) || <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (steps &gt; <span class="number">0</span> &amp;&amp; seconds &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> (steps / seconds).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> <span class="string">&#x27;-&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (elements.<span class="property">computeInfo</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            elements.<span class="property">computeInfo</span>.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;itPerSec&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// æ›´æ–°æ‰€æœ‰å‚æ•°é¢æ¿ï¼ˆéšè—ä¸ç›¸å…³å­—æ®µï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">updateParamsDisplay</span>(params);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¡«å……æ¯å¼ å›¾ç‰‡çš„å°ºå¯¸ä¸å¤§å°</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> metaPanel = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMeta&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> metaBody = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMetaBody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; metaPanel &amp;&amp; metaBody) &#123;</span></span><br><span class="line"><span class="language-javascript">                            metaBody.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> loadPromises = imagesArray.<span class="title function_">map</span>(<span class="function">(<span class="params">src, i</span>) =&gt;</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> probe = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> tr = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;tr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">const</span> sizeBytes = <span class="title function_">dataURLBytes</span>(src);</span></span><br><span class="line"><span class="language-javascript">                                    tr.<span class="property">innerHTML</span> = <span class="string">`&lt;td class=\&quot;py-1 pr-3\&quot;&gt;<span class="subst">$&#123;i+<span class="number">1</span>&#125;</span>&lt;/td&gt;&lt;td class=\&quot;py-1 pr-3\&quot;&gt;<span class="subst">$&#123;probe.width&#125;</span>Ã—<span class="subst">$&#123;probe.height&#125;</span>&lt;/td&gt;&lt;td class=\&quot;py-1\&quot;&gt;<span class="subst">$&#123;formatBytes(sizeBytes)&#125;</span>&lt;/td&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">                                    metaBody.<span class="title function_">appendChild</span>(tr);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="title function_">resolve</span>();</span></span><br><span class="line"><span class="language-javascript">                                &#125;;</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">onerror</span> = <span class="function">() =&gt;</span> <span class="title function_">resolve</span>();</span></span><br><span class="line"><span class="language-javascript">                                probe.<span class="property">src</span> = src;</span></span><br><span class="line"><span class="language-javascript">                            &#125;));</span></span><br><span class="line"><span class="language-javascript">                            <span class="title class_">Promise</span>.<span class="title function_">all</span>(loadPromises).<span class="title function_">then</span>(<span class="function">() =&gt;</span> metaPanel.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> panel = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageMeta&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (panel) panel.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        </span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// è¿›åº¦æ¡æ”¶å£åˆ°100%</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (progressBarContainer &amp;&amp; progressBar &amp;&amp; progressText) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (progressTimer) <span class="built_in">clearInterval</span>(progressTimer);</span></span><br><span class="line"><span class="language-javascript">                            progressBar.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            progressText.<span class="property">textContent</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> progressBarContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>), <span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// æ˜¾ç¤ºçŠ¶æ€å’Œæ“ä½œæŒ‰é’®</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(imagesArray ? <span class="string">`ç”ŸæˆæˆåŠŸï¼ˆ<span class="subst">$&#123;imagesArray.length&#125;</span> å¼ ï¼‰`</span> : <span class="string">&#x27;ç”ŸæˆæˆåŠŸ&#x27;</span>, <span class="string">&#x27;success&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (copyParamsButton) copyParamsButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (downloadButton) downloadButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> downloadZipButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadZipButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (downloadZipButton) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) downloadZipButton.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">else</span> downloadZipButton.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è§¦å‘ finalize</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (imagesArray &amp;&amp; imagesArray.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">finalize</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        aiImage.<span class="property">onload</span> = finalize;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç”Ÿæˆå›¾åƒé”™è¯¯:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (error &amp;&amp; (error.<span class="property">name</span> === <span class="string">&#x27;AbortError&#x27;</span> || error.<span class="property">message</span> === <span class="string">&#x27;timeout&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(<span class="string">&#x27;ç”Ÿæˆè¶…æ—¶ï¼Œè¯·å°è¯•æ›´æ¢æ¨¡å‹æˆ–é™ä½å®½é«˜åé‡è¯•&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">showStatus</span>(error.<span class="property">message</span> || <span class="string">&#x27;ç”Ÿæˆå¤±è´¥&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// æ˜¾ç¤ºåˆå§‹æç¤º</span></span></span><br><span class="line"><span class="language-javascript">                    initialPrompt.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    aiImage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">finally</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    loadingOverlay.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressTimer) &#123; <span class="built_in">clearInterval</span>(progressTimer); progressTimer = <span class="literal">null</span>; &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (progressBarContainer) progressBarContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    pendingController = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å°†Blobè½¬æ¢ä¸ºBase64</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">blobToBase64</span>(<span class="params">blob</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onloadend</span> = <span class="function">() =&gt;</span> <span class="title function_">resolve</span>(reader.<span class="property">result</span>);</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onerror</span> = reject;</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="title function_">readAsDataURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å­—èŠ‚è½¬å¯è¯»å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">formatBytes</span>(<span class="params">bytes</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!bytes &amp;&amp; bytes !== <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;-&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> sizes = [<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;KB&#x27;</span>, <span class="string">&#x27;MB&#x27;</span>, <span class="string">&#x27;GB&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (bytes === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;0 B&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">log</span>(bytes) / <span class="title class_">Math</span>.<span class="title function_">log</span>(<span class="number">1024</span>));</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> value = (bytes / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">1024</span>, i)).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;value&#125;</span> <span class="subst">$&#123;sizes[i]&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è®¡ç®— dataURL çš„å­—èŠ‚å¤§å°ï¼ˆç²—ç•¥ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">dataURLBytes</span>(<span class="params">dataURL</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> base64 = dataURL.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// base64 é•¿åº¦ * 3/4 çº¦ç­‰äºå­—èŠ‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>((base64.<span class="property">length</span> * <span class="number">3</span>) / <span class="number">4</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç®€æ˜“å›¾ç‰‡æ”¾å¤§é¢„è§ˆ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">openImageModal</span>(<span class="params">src</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> existing = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imgModal&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (existing) existing.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> modal = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">id</span> = <span class="string">&#x27;imgModal&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">inset</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(0,0,0,0.7)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;flex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">alignItems</span> = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">justifyContent</span> = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;1000&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;div class=&quot;max-w-5xl max-h-[90vh] p-2&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;img src=&quot;<span class="subst">$&#123;src&#125;</span>&quot; class=&quot;rounded shadow-lg max-h-[85vh] mx-auto&quot; /&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;div class=&quot;text-center mt-2&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                      &lt;button id=&quot;closeImgModal&quot; class=&quot;btn btn-secondary&quot;&gt;å…³é—­&lt;/button&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;/div&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(modal);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;closeImgModal&#x27;</span>).<span class="property">onclick</span> = <span class="function">() =&gt;</span> modal.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                modal.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; <span class="keyword">if</span> (e.<span class="property">target</span> === modal) modal.<span class="title function_">remove</span>(); &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é€šè¿‡IDè·å–æ¨¡å‹åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">getModelNameById</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> model = availableModels.<span class="title function_">find</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">id</span> === id);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> model ? model.<span class="property">name</span> : id;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ›´æ–°å‚æ•°æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">updateParamsDisplay</span>(<span class="params">params</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> allParamsContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;allParamsContainer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> allParamsElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;allParams&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!allParamsContainer || !allParamsElement) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ¸…ç©ºç°æœ‰å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                allParamsElement.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ·»åŠ æ–°å‚æ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(params)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (key === <span class="string">&#x27;password&#x27;</span>) <span class="keyword">continue</span>; <span class="comment">// ä¸æ˜¾ç¤ºå¯†ç </span></span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> paramName = <span class="title function_">formatParamName</span>(key);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> paramValue = value;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// åˆ›å»ºå‚æ•°å¾½ç« </span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> badge = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    badge.<span class="property">className</span> = <span class="string">&#x27;param-badge&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    badge.<span class="property">innerHTML</span> = <span class="string">`&lt;span class=&quot;font-medium&quot;&gt;<span class="subst">$&#123;paramName&#125;</span>:&lt;/span&gt; <span class="subst">$&#123;paramValue&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    allParamsElement.<span class="title function_">appendChild</span>(badge);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤ºå‚æ•°å®¹å™¨</span></span></span><br><span class="line"><span class="language-javascript">                allParamsContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ˜¾ç¤ºçŠ¶æ€æç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">showStatus</span>(<span class="params">message, type = <span class="string">&#x27;info&#x27;</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> statusElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;imageStatus&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!statusElement) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">switch</span> (type) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;success&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-green-100&#x27;</span>, <span class="string">&#x27;text-green-800&#x27;</span>, <span class="string">&#x27;dark:bg-green-900&#x27;</span>, <span class="string">&#x27;dark:text-green-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;error&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-red-100&#x27;</span>, <span class="string">&#x27;text-red-800&#x27;</span>, <span class="string">&#x27;dark:bg-red-900&#x27;</span>, <span class="string">&#x27;dark:text-red-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-yellow-100&#x27;</span>, <span class="string">&#x27;text-yellow-800&#x27;</span>, <span class="string">&#x27;dark:bg-yellow-900&#x27;</span>, <span class="string">&#x27;dark:text-yellow-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                        statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;bg-blue-100&#x27;</span>, <span class="string">&#x27;text-blue-800&#x27;</span>, <span class="string">&#x27;dark:bg-blue-900&#x27;</span>, <span class="string">&#x27;dark:text-blue-100&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è®¾ç½®æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">textContent</span> = message;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">                statusElement.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 5ç§’åè‡ªåŠ¨éšè—</span></span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    statusElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ç™»å½•é®ç½©åŠé€»è¾‘</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">showLogin</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginOverlay&#x27;</span>)) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">id</span> = <span class="string">&#x27;loginOverlay&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">inset</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">backdropFilter</span> = <span class="string">&#x27;blur(3px)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(0,0,0,0.4)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;1000&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            overlay.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;div class=&quot;w-full h-full flex items-center justify-center&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;div class=&quot;card p-6 w-96 bg-white dark:bg-gray-800&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;h3 class=&quot;text-lg font-semibold mb-4&quot;&gt;è¯·è¾“å…¥è®¿é—®å¯†ç &lt;/h3&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;input type=&quot;password&quot; id=&quot;loginPassword&quot; class=&quot;w-full&quot; placeholder=&quot;è®¿é—®å¯†ç &quot; /&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;button id=&quot;loginButton&quot; class=&quot;btn btn-primary w-full mt-4&quot;&gt;ç™»å½•&lt;/button&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p id=&quot;loginError&quot; class=&quot;text-red-500 text-sm mt-2 hidden&quot;&gt;å¯†ç é”™è¯¯&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/div&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(overlay);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">submitLogin</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> pwd = (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/auth&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">password</span>: pwd &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!resp.<span class="property">ok</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginError&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    overlay.<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (_) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginError&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, submitLogin);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loginPassword&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;Enter&#x27;</span>) <span class="title function_">submitLogin</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>
7.  **ä¿å­˜éƒ¨ç½²**ï¼šç‚¹å‡»å³ä¸Šè§’çš„è“è‰² **â€œéƒ¨ç½²â€** æŒ‰é’®ã€‚

<h3 id="ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰"></a>ç¬¬ä¸‰é˜¶æ®µï¼šèµ„æºç»‘å®šï¼ˆå…³é”®ï¼‰</h3><ol start="8">
<li><strong>è¿›å…¥è®¾ç½®</strong>ï¼šè¿”å› Workers é¡¹ç›®ä¸»é¡µï¼Œç‚¹å‡» <strong>è®¾ç½® (Settings)</strong> -&gt; <strong>å˜é‡ (Variables)</strong>ã€‚</li>
<li><strong>æ·»åŠ  AI ç»‘å®š</strong>ï¼š<ul>
<li>åœ¨ä¸‹æ–¹æ‰¾åˆ° <strong>â€œWorkers AI ç»‘å®šâ€</strong> éƒ¨åˆ†ï¼Œç‚¹å‡»æ·»åŠ ç»‘å®šã€‚</li>
<li>åç§°é€šå¸¸ä¿æŒé»˜è®¤ï¼Œä¿å­˜å³å¯ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥"><a href="#ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥" class="headerlink" title="ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥"></a>ç¬¬å››é˜¶æ®µï¼šåŸŸåæ¥å…¥</h3><ol start="10">
<li><strong>æ·»åŠ è‡ªå®šä¹‰åŸŸ</strong>ï¼šåœ¨é¡¹ç›®é¡µç‚¹å‡» <strong>è®¾ç½®</strong> -&gt; <strong>è§¦å‘å™¨ (Triggers)</strong> -&gt; <strong>æ·»åŠ è‡ªå®šä¹‰åŸŸ</strong>ã€‚</li>
<li><strong>å¡«å†™åŸŸå</strong>ï¼šè¾“å…¥æ‚¨çš„åŸŸåï¼ˆä¾‹å¦‚ <code>ai.138gl.com</code>ï¼‰ï¼Œç‚¹å‡»æ·»åŠ ã€‚</li>
<li><strong>è§£æç”Ÿæ•ˆ</strong>ï¼šç­‰å¾… Cloudflare å®Œæˆ DNS è§£æåï¼Œå³å¯é€šè¿‡è¯¥åŸŸåç›´æ¥è®¿é—®å¹¶å¼€å§‹ AI ç»˜å›¾ï¼</li>
</ol>
<hr>
<h2 id="ğŸ’¡-ä½¿ç”¨å°è´´å£«"><a href="#ğŸ’¡-ä½¿ç”¨å°è´´å£«" class="headerlink" title="ğŸ’¡ ä½¿ç”¨å°è´´å£«"></a>ğŸ’¡ ä½¿ç”¨å°è´´å£«</h2><ul>
<li><strong>ç™»å½•æ–¹å¼</strong>ï¼šè®¿é—®åŸŸååï¼Œè¾“å…¥æ‚¨åœ¨ç¬¬ 5 æ­¥è®¾ç½®çš„å¯†ç å³å¯ç™»å½•ã€‚</li>
<li><strong>å…è´¹é¢åº¦</strong>ï¼šCloudflare Workers AI ç›®å‰æœ‰æ¯æ—¥å…è´¹é¢åº¦é™åˆ¶ï¼Œå»ºè®®ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œè¯·å‹¿æ»¥ç”¨ã€‚</li>
</ul>
<blockquote>
<p>[!TIP]<br>å¦‚æœéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ° <code>Environment Variable</code> ç›¸å…³é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç¬¬ 9 æ­¥çš„ AI ç»‘å®šæ˜¯å¦æˆåŠŸå®Œæˆã€‚</p>
</blockquote>
<hr>
<p><strong>ğŸ’¬ ç•™è¨€åé¦ˆ</strong><br>å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•æŠ¥é”™ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºè´´å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šååŠ©æ‚¨è§£å†³ï¼</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Cloudflare</tag>
        <tag>AIéƒ¨ç½²</tag>
        <tag>æ–‡ç”Ÿå›¾</tag>
      </tags>
  </entry>
</search>
